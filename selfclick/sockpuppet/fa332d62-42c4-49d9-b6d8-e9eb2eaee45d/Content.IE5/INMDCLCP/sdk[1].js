!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Raven=e()}}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){function r(e){this.name="RavenConfigError",this.message=e}r.prototype=new Error,r.prototype.constructor=r,t.exports=r},{}],2:[function(e,t,n){(function(n){function r(){return+new Date}function i(e,t){return s(t)?function(n){return t(n,e)}:t}function o(){this._hasDocument=!a(T)&&9==T.nodeType,this._lastData=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],crossOrigin:"anonymous",collectWindowErrors:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,instrument:!0,sampleRate:1},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._plugins=[],this._startTime=r(),this._wrappedBuiltIns=[],this._resetBackoff()}function a(e){return void 0===e}function s(e){return"function"==typeof e}function l(e){return"[object String]"===R.toString.call(e)}function u(e){for(var t in e)return!1;return!0}function c(e,t){var n,r;if(a(e.length))for(n in e)h(e,n)&&t.call(null,n,e[n]);else if(r=e.length)for(n=0;n<r;n++)t.call(null,n,e[n])}function f(e,t){return t?(c(t,function(t,n){e[t]=n}),e):e}function p(e,t){return!t||e.length<=t?e:e.substr(0,t)+"…"}function h(e,t){return R.hasOwnProperty.call(e,t)}function d(e){for(var t,n=[],r=0,i=e.length;r<i;r++)t=e[r],l(t)?n.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&n.push(t.source);return new RegExp(n.join("|"),"i")}function g(e){var t=[];return c(e,function(e,n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.join("&")}function _(e){var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",r=t[8]||"";return{protocol:t[2],host:t[4],path:t[5],relative:t[5]+n+r}}function v(e,t){return!!(!!e^!!t)}function m(e,t){return!v(e,t)&&(e=e.values[0],t=t.values[0],e.type===t.type&&e.value===t.value&&b(e.stacktrace,t.stacktrace))}function b(e,t){if(v(e,t))return!1;var n=e.frames,r=t.frames;if(n.length!==r.length)return!1;for(var i,o,a=0;a<n.length;a++)if(i=n[a],o=r[a],i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i["function"]!==o["function"])return!1;return!0}function y(e,t,n,r){var i=e[t];e[t]=n(i),r&&r.push([e,t,i])}var w=e(5),k=e(6),E=e(1),S="source protocol user pass host port path".split(" "),x=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/,O="undefined"!=typeof window?window:"undefined"!=typeof n?n:"undefined"!=typeof self?self:{},T=O.document;o.prototype={VERSION:"0.0.1",TraceKit:w,config:function(e,t){var n=this;if(n._globalServer)return n;if(!e)return n;var r=n._globalOptions;t&&c(t,function(e,t){"tags"===e||"extra"===e||"user"===e?n._globalContext[e]=t:r[e]=t}),n.setDSN(e),r.ignoreErrors.push(/^Script error\.?$/),r.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),r.ignoreErrors=d(r.ignoreErrors),r.ignoreUrls=!!r.ignoreUrls.length&&d(r.ignoreUrls),r.whitelistUrls=!!r.whitelistUrls.length&&d(r.whitelistUrls),r.includePaths=d(r.includePaths);var i={tryCatch:!0},o=r.instrument;return"[object Object]"==={}.toString.call(o)?o=f(i,o):o!==!1&&(o=i),r.instrument=o,w.collectWindowErrors=!!r.collectWindowErrors,n},install:function(){var e=this;return e._isRavenInstalled||(w.report.subscribe(function(){e._handleOnErrorStackInfo.apply(e,arguments)}),e._globalOptions.instrument&&e._globalOptions.instrument.tryCatch&&e._instrumentTryCatch(),e._isRavenInstalled=!0),Error.stackTraceLimit=e._globalOptions.stackTraceLimit,this},setDSN:function(e){var t=this,n=t._parseDSN(e),r=n.path.lastIndexOf("/"),i=n.path.substr(1,r);t._dsn=e,t._globalKey=n.user,t._globalSecret=n.pass&&n.pass.substr(1),t._globalProject=n.path.substr(r+1),t._globalServer=t._getGlobalServer(n),t._globalEndpoint=t._globalServer+"/"+i+"api/"+t._globalProject+"/store/",this._resetBackoff()},wrap:function(e,t,n){function r(){var r=[],o=arguments.length,a=!e||e&&e.deep!==!1;for(n&&s(n)&&n.apply(this,arguments);o--;)r[o]=a?i.wrap(e,arguments[o]):arguments[o];try{return t.apply(this,r)}catch(l){throw i._ignoreNextOnError(),i.captureException(l,e),l}}var i=this;if(a(t)&&!s(e))return e;if(s(e)&&(t=e,e=void 0),!s(t))return t;try{if(t.__raven__)return t;if(t.__raven_wrapper__)return t.__raven_wrapper__}catch(o){return t}for(var l in t)h(t,l)&&(r[l]=t[l]);return r.prototype=t.prototype,t.__raven_wrapper__=r,r.__raven__=!0,r.__inner__=t,r},captureException:function(e,t){try{var n=w.computeStackTrace(e);this._handleStackInfo(n,t)}catch(r){if(e!==r)throw r}return this},addPlugin:function(e){var t=[].slice.call(arguments,1);return this._plugins.push([e,t]),this._isRavenInstalled&&this._drainPlugins(),this},setDataCallback:function(e){var t=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=i(t,e),this},setTransport:function(e){return this._globalOptions.transport=e,this},isSetup:function(){return!(!this._hasJSON()||!this._hasTransport()||!this._globalServer&&(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0),1))},afterLoad:function(){var e=O.RavenConfig;e&&this.config(e.dsn,e.config).install()},_ignoreNextOnError:function(){var e=this;this._ignoreOnError+=1,setTimeout(function(){e._ignoreOnError-=1})},_hasJSON:function(){return!("object"!=typeof JSON||!JSON.stringify)},_hasTransport:function(){return this._globalOptions.transport||window.XMLHttpRequest||window.XDomainRequest},_triggerEvent:function(e,t){var n,r;if(this._hasDocument){t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),T.createEvent?(n=T.createEvent("HTMLEvents"),n.initEvent(e,!0,!0)):(n=T.createEventObject(),n.eventType=e);for(r in t)h(t,r)&&(n[r]=t[r]);if(T.createEvent)T.dispatchEvent(n);else try{T.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(i){}}},_instrumentTryCatch:function(){function e(e){return function(t,r){for(var i=new Array(arguments.length),o=0;o<i.length;++o)i[o]=arguments[o];var a=i[0];return s(a)&&(i[0]=n.wrap(a)),e.apply?e.apply(this,i):e(i[0],i[1])}}function t(e){var t=O[e]&&O[e].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(y(t,"addEventListener",function(e){return function(t,r,i,o){try{r&&r.handleEvent&&(r.handleEvent=n.wrap(r.handleEvent))}catch(a){}var s;return e.call(this,t,n.wrap(r,void 0,s),i,o)}},r),y(t,"removeEventListener",function(e){return function(t,n,r,i){try{n=n&&(n.__raven_wrapper__?n.__raven_wrapper__:n)}catch(o){}return e.call(this,t,n,r,i)}},r))}var n=this,r=n._wrappedBuiltIns;y(O,"setTimeout",e,r),y(O,"setInterval",e,r),O.requestAnimationFrame&&y(O,"requestAnimationFrame",function(e){return function(t){return e(n.wrap(t))}},r);for(var i=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],o=0;o<i.length;o++)t(i[o])},_drainPlugins:function(){var e=this;c(this._plugins,function(t,n){var r=n[0],i=n[1];r.apply(e,[e].concat(i))})},_parseDSN:function(e){var t=x.exec(e),n={},r=7;try{for(;r--;)n[S[r]]=t[r]||""}catch(i){throw new E("Invalid DSN: "+e)}if(n.pass&&!this._globalOptions.allowSecretKey)throw new E("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return n},_getGlobalServer:function(e){var t="//"+e.host+(e.port?":"+e.port:"");return e.protocol&&(t=e.protocol+":"+t),t},_handleOnErrorStackInfo:function(){this._ignoreOnError||this._handleStackInfo.apply(this,arguments)},_handleStackInfo:function(e,t){var n=this._prepareFrames(e,t);this._triggerEvent("handle",{stackInfo:e,options:t}),this._processException(e.name,e.message,e.url,e.lineno,n,t)},_prepareFrames:function(e,t){var n=this,r=[];if(e.stack&&e.stack.length&&(c(e.stack,function(e,t){var i=n._normalizeFrame(t);i&&r.push(i)}),t&&t.trimHeadFrames))for(var i=0;i<t.trimHeadFrames&&i<r.length;i++)r[i].in_app=!1;return r=r.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function(e){if(e.url){var t={filename:e.url,lineno:e.line,colno:e.column,"function":e.func||"?"};return t.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(t.filename)||/(Raven|TraceKit)\./.test(t["function"])||/raven\.(min\.)?js$/.test(t.filename)),t}},_processException:function(e,t,n,r,i,o){var a;if((!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t))&&(t+="",i&&i.length?(n=i[0].filename||n,i.reverse(),a={frames:i}):n&&(a={frames:[{filename:n,lineno:r,in_app:!0}]}),(!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(n))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(n)))){var s=f({exception:{values:[{type:e,value:t,stacktrace:a}]},culprit:n},o);this._send(s)}},_trimPacket:function(e){var t=this._globalOptions.maxMessageLength;if(e.message&&(e.message=p(e.message,t)),e.exception){var n=e.exception.values[0];n.value=p(n.value,t)}var r=e.request;return r&&(r.url&&(r.url=p(r.url,this._globalOptions.maxUrlLength)),r.Referer&&(r.Referer=p(r.Referer,this._globalOptions.maxUrlLength))),e},_resetBackoff:function(){this._backoffDuration=0,this._backoffStart=null},_shouldBackoff:function(){return this._backoffDuration&&r()-this._backoffStart<this._backoffDuration},_isRepeatData:function(e){var t=this._lastData;return!(!t||e.message!==t.message||e.culprit!==t.culprit)&&(e.stacktrace||t.stacktrace?b(e.stacktrace,t.stacktrace):!e.exception&&!t.exception||m(e.exception,t.exception))},_setBackoffState:function(e){if(!this._shouldBackoff()){var t=e.status;if(400===t||401===t||429===t){var n;try{n=e.getResponseHeader("Retry-After"),n=1e3*parseInt(n,10)}catch(i){}this._backoffDuration=n?n:2*this._backoffDuration||1e3,this._backoffStart=r()}}},_send:function(e){var t=this._globalOptions,n={project:this._globalProject,logger:t.logger,platform:"javascript"};e.trimHeadFrames&&delete e.trimHeadFrames,e=f(n,e),e.tags=f(f({},this._globalContext.tags),e.tags),e.extra=f(f({},this._globalContext.extra),e.extra),e.extra["session:duration"]=r()-this._startTime,u(e.tags)&&delete e.tags,this._globalContext.user&&(e.user=this._globalContext.user),t.environment&&(e.environment=t.environment),t.release&&(e.release=t.release),t.serverName&&(e.server_name=t.serverName),s(t.dataCallback)&&(e=t.dataCallback(e)||e),e&&!u(e)&&(s(t.shouldSendCallback)&&!t.shouldSendCallback(e)||this._shouldBackoff()||("number"==typeof t.sampleRate?Math.random()<t.sampleRate&&this._sendProcessedPayload(e):this._sendProcessedPayload(e)))},_sendProcessedPayload:function(e,t){var n=this,r=this._globalOptions;if(this.isSetup()&&(e=this._trimPacket(e),this._globalOptions.allowDuplicates||!this._isRepeatData(e))){this._lastData=e;var i={sentry_version:"7",sentry_client:"simplify-raven-js/"+this.VERSION,sentry_key:this._globalKey};this._globalSecret&&(i.sentry_secret=this._globalSecret);var o=this._globalEndpoint;(r.transport||this._makeRequest).call(this,{url:o,auth:i,data:e,options:r,onSuccess:function(){n._resetBackoff(),n._triggerEvent("success",{data:e,src:o}),t&&t()},onError:function(r){r.request&&n._setBackoffState(r.request),n._triggerEvent("failure",{data:e,src:o}),r=r||new Error("Raven send failed (no additional details provided)"),t&&t(r)}})}},_makeRequest:function(e){var t=new XMLHttpRequest,n="withCredentials"in t||"undefined"!=typeof XDomainRequest;if(n){var r=e.url;"withCredentials"in t?t.onreadystatechange=function(){if(4===t.readyState)if(200===t.status)e.onSuccess&&e.onSuccess();else if(e.onError){var n=new Error("Sentry error code: "+t.status);n.request=t,e.onError(n)}}:(t=new XDomainRequest,r=r.replace(/^https?:/,""),e.onSuccess&&(t.onload=e.onSuccess),e.onError&&(t.onerror=function(){var n=new Error("Sentry error code: XDomainRequest");n.request=t,e.onError(n)})),t.open("POST",r+"?"+g(e.auth)),t.send(k(e.data))}}};var R=Object.prototype;"undefined"!=typeof __DEV__&&__DEV__&&(o.utils={isUndefined:a,isFunction:s,isString:l,isEmptyObject:u,each:c,objectMerge:f,truncate:p,hasKey:h,joinRegExp:d,urlencode:g,parseUrl:_,fill:y}),t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1,5:5,6:6}],3:[function(e,t,n){(function(n){var r=e(2),i="undefined"!=typeof window?window:"undefined"!=typeof n?n:"undefined"!=typeof self?self:{},o=i.Raven,a=new r;a.noConflict=function(){return i.Raven=o,a},a.afterLoad(),t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){function r(e){return"object"==typeof e&&null!==e}function i(e){switch({}.toString.call(e)){case"[object Error]":return!0;case"[object Exception]":return!0;case"[object DOMException]":return!0;default:return e instanceof Error}}function o(e){function t(t,n){var r=e(t)||t;return n?n(r)||r:r}return t}t.exports={isObject:r,isError:i,wrappedCallback:o}},{}],5:[function(e,t,n){(function(n){"use strict";function r(){return"undefined"==typeof document||9!=document.nodeType||"undefined"==typeof document.location?"":document.location.href}var i=e(4),o={collectWindowErrors:!0,debug:!1},a="undefined"!=typeof window?window:"undefined"!=typeof n?n:"undefined"!=typeof self?self:{},s=[].slice,l="?",u=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;o.report=function(){function e(e){p(),m.push(e)}function t(e){for(var t=m.length-1;t>=0;--t)m[t]===e&&m.splice(t,1)}function n(){h(),m=[]}function c(e,t){var n=null;if(!t||o.collectWindowErrors){for(var r in m)if(m.hasOwnProperty(r))try{m[r].apply(null,[e].concat(s.call(arguments,2)))}catch(i){n=i}if(n)throw n}}function f(e,t,n,a,s){var f=null;if(w)o.computeStackTrace.augmentStackTraceWithInitialElement(w,t,n,e),d();else if(s&&i.isError(s))f=o.computeStackTrace(s),c(f,!0);else{var p,h={url:t,line:n,column:a},g=void 0,v=e;if("[object String]"==={}.toString.call(e)){var p=e.match(u);p&&(g=p[1],v=p[2])}h.func=l,f={name:g,message:v,url:r(),stack:[h]},c(f,!0)}return!!_&&_.apply(this,arguments)}function p(){v||(_=a.onerror,a.onerror=f,v=!0)}function h(){v&&(a.onerror=_,v=!1,_=void 0)}function d(){var e=w,t=b;b=null,w=null,y=null,c.apply(null,[e,!1].concat(t))}function g(e,t){var n=s.call(arguments,1);if(w){if(y===e)return;d()}var r=o.computeStackTrace(e);if(w=r,y=e,b=n,setTimeout(function(){y===e&&d()},r.incomplete?2e3:0),t!==!1)throw e}var _,v,m=[],b=null,y=null,w=null;return g.subscribe=e,g.unsubscribe=t,g.uninstall=n,g}(),o.computeStackTrace=function(){function e(e){if("undefined"!=typeof e.stack&&e.stack){for(var t,n,i,o=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,s=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,u=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,c=/\((\S*)(?::(\d+))(?::(\d+))\)/,f=e.stack.split("\n"),p=[],h=(/^(.*) is undefined$/.exec(e.message),0),d=f.length;h<d;++h){if(n=o.exec(f[h])){var g=n[2]&&0===n[2].indexOf("native"),_=n[2]&&0===n[2].indexOf("eval");_&&(t=c.exec(n[2]))&&(n[2]=t[1],n[3]=t[2],n[4]=t[3]),i={url:g?null:n[2],func:n[1]||l,args:g?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=s.exec(f[h]))i={url:n[2],func:n[1]||l,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=a.exec(f[h])))continue;var _=n[3]&&n[3].indexOf(" > eval")>-1;_&&(t=u.exec(n[3]))?(n[3]=t[1],n[4]=t[2],n[5]=null):0!==h||n[5]||"undefined"==typeof e.columnNumber||(p[0].column=e.columnNumber+1),i={url:n[3],func:n[1]||l,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!i.func&&i.line&&(i.func=l),p.push(i)}return p.length?{name:e.name,message:e.message,url:r(),stack:p}:null}}function t(e,t,n,r){var i={url:t,line:n};if(i.url&&i.line){if(e.incomplete=!1,i.func||(i.func=l),e.stack.length>0&&e.stack[0].url===i.url){if(e.stack[0].line===i.line)return!1;if(!e.stack[0].line&&e.stack[0].func===i.func)return e.stack[0].line=i.line,!1}return e.stack.unshift(i),e.partial=!0,!0}return e.incomplete=!0,!1}function n(e,a){for(var s,u,c=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,f=[],p={},h=!1,d=n.caller;d&&!h;d=d.caller)if(d!==i&&d!==o.report){if(u={url:null,func:l,line:null,column:null},d.name?u.func=d.name:(s=c.exec(d.toString()))&&(u.func=s[1]),"undefined"==typeof u.func)try{u.func=s.input.substring(0,s.input.indexOf("{"))}catch(g){}p[""+d]?h=!0:p[""+d]=!0,f.push(u)}a&&f.splice(0,a);var _={name:e.name,message:e.message,url:r(),stack:f};return t(_,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),_}function i(t,i){var a=null;i=null==i?0:+i;try{if(a=e(t))return a}catch(s){if(o.debug)throw s}try{if(a=n(t,i+1))return a}catch(s){if(o.debug)throw s}return{name:t.name,message:t.message,url:r()}}return i.augmentStackTraceWithInitialElement=t,i.computeStackTraceFromStackProp=e,i}(),t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{4:4}],6:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}function i(e,t,n,r){return JSON.stringify(e,o(t,r),n)}function o(e,t){var n=[],i=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+i.slice(0,r(n,t)).join(".")+"]"}),function(o,a){if(n.length>0){var s=r(n,this);~s?n.splice(s+1):n.push(this),~s?i.splice(s,1/0,o):i.push(o),~r(n,a)&&(a=t.call(this,o,a))}else n.push(a);return null==e?a:e.call(this,o,a)}}n=t.exports=i,n.getSerialize=o},{}]},{},[3])(3)});
var LZString=function(){function o(o,r){if(!t[o]){t[o]={};for(var n=0;n<o.length;n++)t[o][o.charAt(n)]=n}return t[o][r]}var r=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",t={},i={compressToBase64:function(o){if(null==o)return"";var r=i._compress(o,6,function(o){return n.charAt(o)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(r){return null==r?"":""==r?null:i._decompress(r.length,32,function(e){return o(n,r.charAt(e))})},compressToUTF16:function(o){return null==o?"":i._compress(o,15,function(o){return r(o+32)})+" "},decompressFromUTF16:function(o){return null==o?"":""==o?null:i._decompress(o.length,16384,function(r){return o.charCodeAt(r)-32})},compressToUint8Array:function(o){for(var r=i.compress(o),n=new Uint8Array(2*r.length),e=0,t=r.length;e<t;e++){var s=r.charCodeAt(e);n[2*e]=s>>>8,n[2*e+1]=s%256}return n},decompressFromUint8Array:function(o){if(null===o||void 0===o)return i.decompress(o);for(var n=new Array(o.length/2),e=0,t=n.length;e<t;e++)n[e]=256*o[2*e]+o[2*e+1];var s=[];return n.forEach(function(o){s.push(r(o))}),i.decompress(s.join(""))},compressToEncodedURIComponent:function(o){return null==o?"":i._compress(o,6,function(o){return e.charAt(o)})},decompressFromEncodedURIComponent:function(r){return null==r?"":""==r?null:(r=r.replace(/ /g,"+"),i._decompress(r.length,32,function(n){return o(e,r.charAt(n))}))},compress:function(o){return i._compress(o,16,function(o){return r(o)})},_compress:function(o,r,n){if(null==o)return"";var e,t,i,s={},u={},p="",a="",c="",l=2,f=3,h=2,d=[],m=0,v=0;for(i=0;i<o.length;i+=1)if(p=o.charAt(i),Object.prototype.hasOwnProperty.call(s,p)||(s[p]=f++,u[p]=!0),a=c+p,Object.prototype.hasOwnProperty.call(s,a))c=a;else{if(Object.prototype.hasOwnProperty.call(u,c)){if(c.charCodeAt(0)<256){for(e=0;e<h;e++)m<<=1,v==r-1?(v=0,d.push(n(m)),m=0):v++;for(t=c.charCodeAt(0),e=0;e<8;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;e<h;e++)m=m<<1|t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=c.charCodeAt(0),e=0;e<16;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}l--,0==l&&(l=Math.pow(2,h),h++),delete u[c]}else for(t=s[c],e=0;e<h;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;l--,0==l&&(l=Math.pow(2,h),h++),s[a]=f++,c=String(p)}if(""!==c){if(Object.prototype.hasOwnProperty.call(u,c)){if(c.charCodeAt(0)<256){for(e=0;e<h;e++)m<<=1,v==r-1?(v=0,d.push(n(m)),m=0):v++;for(t=c.charCodeAt(0),e=0;e<8;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;e<h;e++)m=m<<1|t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=c.charCodeAt(0),e=0;e<16;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}l--,0==l&&(l=Math.pow(2,h),h++),delete u[c]}else for(t=s[c],e=0;e<h;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;l--,0==l&&(l=Math.pow(2,h),h++)}for(t=2,e=0;e<h;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;for(;;){if(m<<=1,v==r-1){d.push(n(m));break}v++}return d.join("")},decompress:function(o){return null==o?"":""==o?null:i._decompress(o.length,32768,function(r){return o.charCodeAt(r)})},_decompress:function(o,n,e){var t,i,s,u,p,a,c,l,f=[],h=4,d=4,m=3,v="",g=[],w={val:e(0),position:n,index:1};for(i=0;i<3;i+=1)f[i]=i;for(u=0,a=Math.pow(2,2),c=1;c!=a;)p=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),u|=(p>0?1:0)*c,c<<=1;switch(t=u){case 0:for(u=0,a=Math.pow(2,8),c=1;c!=a;)p=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),u|=(p>0?1:0)*c,c<<=1;l=r(u);break;case 1:for(u=0,a=Math.pow(2,16),c=1;c!=a;)p=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),u|=(p>0?1:0)*c,c<<=1;l=r(u);break;case 2:return""}for(f[3]=l,s=l,g.push(l);;){if(w.index>o)return"";for(u=0,a=Math.pow(2,m),c=1;c!=a;)p=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),u|=(p>0?1:0)*c,c<<=1;switch(l=u){case 0:for(u=0,a=Math.pow(2,8),c=1;c!=a;)p=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),u|=(p>0?1:0)*c,c<<=1;f[d++]=r(u),l=d-1,h--;break;case 1:for(u=0,a=Math.pow(2,16),c=1;c!=a;)p=w.val&w.position,w.position>>=1,0==w.position&&(w.position=n,w.val=e(w.index++)),u|=(p>0?1:0)*c,c<<=1;f[d++]=r(u),l=d-1,h--;break;case 2:return g.join("")}if(0==h&&(h=Math.pow(2,m),m++),f[l])v=f[l];else{if(l!==d)return null;v=s+s.charAt(0)}g.push(v),f[d++]=s+v.charAt(0),h--,s=v,0==h&&(h=Math.pow(2,m),m++)}}};return i}();"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module?module.exports=LZString:"undefined"!=typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",function(){return LZString});
!function(t,e){try{"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.JSEncrypt={})}catch(i){window.console&&window.console.log("jsen error")}}(this,function(t){"use strict";function e(t){return V.charAt(t)}function i(t,e){return t&e}function r(t,e){return t|e}function n(t,e){return t^e}function s(t,e){return t&~e}function o(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function h(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function a(t){var e,i,r="";for(e=0;e+3<=t.length;e+=3)i=parseInt(t.substring(e,e+3),16),r+=I.charAt(i>>6)+I.charAt(63&i);for(e+1==t.length?(i=parseInt(t.substring(e,e+1),16),r+=I.charAt(i<<2)):e+2==t.length&&(i=parseInt(t.substring(e,e+2),16),r+=I.charAt(i>>2)+I.charAt((3&i)<<4));(3&r.length)>0;)r+=N;return r}function u(t){var i,r="",n=0,s=0;for(i=0;i<t.length&&t.charAt(i)!=N;++i){var o=I.indexOf(t.charAt(i));o<0||(0==n?(r+=e(o>>2),s=3&o,n=1):1==n?(r+=e(s<<2|o>>4),s=15&o,n=2):2==n?(r+=e(s),r+=e(o>>2),s=3&o,n=3):(r+=e(s<<2|o>>4),r+=e(15&o),n=0))}return 1==n&&(r+=e(s<<2)),r}function f(t,e){function i(){this.constructor=t}P(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function c(t,e){return t.length>e&&(t=t.substring(0,e)+H),t}function l(){return new $(null)}function p(t,e){return new $(t,e)}function g(t,e,i,r,n,s){for(;--s>=0;){var o=e*this[t++]+i[r]+n;n=Math.floor(o/67108864),i[r++]=67108863&o}return n}function d(t,e,i,r,n,s){for(var o=32767&e,h=e>>15;--s>=0;){var a=32767&this[t],u=this[t++]>>15,f=h*a+u*o;a=o*a+((32767&f)<<15)+i[r]+(1073741823&n),n=(a>>>30)+(f>>>15)+h*u+(n>>>30),i[r++]=1073741823&a}return n}function y(t,e,i,r,n,s){for(var o=16383&e,h=e>>14;--s>=0;){var a=16383&this[t],u=this[t++]>>14,f=h*a+u*o;a=o*a+((16383&f)<<14)+i[r]+n,n=(a>>28)+(f>>14)+h*u,i[r++]=268435455&a}return n}function m(t,e){var i=it[t.charCodeAt(e)];return null==i?-1:i}function v(t){var e=l();return e.fromInt(t),e}function b(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function T(){return new st}function S(){if(null==rt){for(rt=T();nt<ot;){var t=Math.floor(65536*Math.random());ht[nt++]=255&t}for(rt.init(ht),nt=0;nt<ht.length;++nt)ht[nt]=0;nt=0}return rt.next()}function E(t,e){if(e<t.length+22)return console.error("Message too long for RSA"),null;for(var i=e-t.length-6,r="",n=0;n<i;n+=2)r+="ff";var s="0001"+r+"00"+t;return p(s,16)}function w(t,e){if(e<t.length+11)return console.error("Message too long for RSA"),null;for(var i=[],r=t.length-1;r>=0&&e>0;){var n=t.charCodeAt(r--);n<128?i[--e]=n:n>127&&n<2048?(i[--e]=63&n|128,i[--e]=n>>6|192):(i[--e]=63&n|128,i[--e]=n>>6&63|128,i[--e]=n>>12|224)}i[--e]=0;for(var s=new ct,o=[];e>2;){for(o[0]=0;0==o[0];)s.nextBytes(o);i[--e]=o[0]}return i[--e]=2,i[--e]=0,new $(i)}function D(t,e){for(var i=t.toByteArray(),r=0;r<i.length&&0==i[r];)++r;if(i.length-r!=e-1||2!=i[r])return null;for(++r;0!=i[r];)if(++r>=i.length)return null;for(var n="";++r<i.length;){var s=255&i[r];s<128?n+=String.fromCharCode(s):s>191&&s<224?(n+=String.fromCharCode((31&s)<<6|63&i[r+1]),++r):(n+=String.fromCharCode((15&s)<<12|(63&i[r+1])<<6|63&i[r+2]),r+=2)}return n}function x(t){return pt[t]||""}function R(t){for(var e in pt)if(pt.hasOwnProperty(e)){var i=pt[e],r=i.length;if(t.substr(0,r)==i)return t.substr(r)}return t}var B,A,O,V="0123456789abcdefghijklmnopqrstuvwxyz",I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N="=",P=function(t,e){return(P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},M={decode:function(t){var e;if(void 0===B){var i="0123456789ABCDEF",r=" \f\n\r\t \u2028\u2029";for(B={},e=0;e<16;++e)B[i.charAt(e)]=e;for(i=i.toLowerCase(),e=10;e<16;++e)B[i.charAt(e)]=e;for(e=0;e<r.length;++e)B[r.charAt(e)]=-1}var n=[],s=0,o=0;for(e=0;e<t.length;++e){var h=t.charAt(e);if("="==h)break;if(h=B[h],h!=-1){if(void 0===h)throw new Error("Illegal character at offset "+e);s|=h,++o>=2?(n[n.length]=s,s=0,o=0):s<<=4}}if(o)throw new Error("Hex encoding incomplete: 4 bits missing");return n}},q={decode:function(t){var e;if(void 0===A){var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="= \f\n\r\t \u2028\u2029";for(A=Object.create(null),e=0;e<64;++e)A[i.charAt(e)]=e;for(e=0;e<r.length;++e)A[r.charAt(e)]=-1}var n=[],s=0,o=0;for(e=0;e<t.length;++e){var h=t.charAt(e);if("="==h)break;if(h=A[h],h!=-1){if(void 0===h)throw new Error("Illegal character at offset "+e);s|=h,++o>=4?(n[n.length]=s>>16,n[n.length]=s>>8&255,n[n.length]=255&s,s=0,o=0):s<<=6}}switch(o){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:n[n.length]=s>>10;break;case 3:n[n.length]=s>>16,n[n.length]=s>>8&255}return n},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(t){var e=q.re.exec(t);if(e)if(e[1])t=e[1];else{if(!e[2])throw new Error("RegExp out of sync");t=e[2]}return q.decode(t)}},j=1e13,L=function(){function t(t){this.buf=[+t||0]}return t.prototype.mulAdd=function(t,e){var i,r,n=this.buf,s=n.length;for(i=0;i<s;++i)r=n[i]*t+e,r<j?e=0:(e=0|r/j,r-=e*j),n[i]=r;e>0&&(n[i]=e)},t.prototype.sub=function(t){var e,i,r=this.buf,n=r.length;for(e=0;e<n;++e)i=r[e]-t,i<0?(i+=j,t=1):t=0,r[e]=i;for(;0===r[r.length-1];)r.pop()},t.prototype.toString=function(t){if(10!=(t||10))throw new Error("only base 10 is supported");for(var e=this.buf,i=e[e.length-1].toString(),r=e.length-2;r>=0;--r)i+=(j+e[r]).toString().substring(1);return i},t.prototype.valueOf=function(){for(var t=this.buf,e=0,i=t.length-1;i>=0;--i)e=e*j+t[i];return e},t.prototype.simplify=function(){var t=this.buf;return 1==t.length?t[0]:this},t}(),H="…",C=/^(\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,F=/^(\d\d\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,U=function(){function t(e,i){this.hexDigits="0123456789ABCDEF",e instanceof t?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=i)}return t.prototype.get=function(t){if(void 0===t&&(t=this.pos++),t>=this.enc.length)throw new Error("Requesting byte offset "+t+" on a stream of length "+this.enc.length);return"string"==typeof this.enc?this.enc.charCodeAt(t):this.enc[t]},t.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},t.prototype.hexDump=function(t,e,i){for(var r="",n=t;n<e;++n)if(r+=this.hexByte(this.get(n)),i!==!0)switch(15&n){case 7:r+="  ";break;case 15:r+="\n";break;default:r+=" "}return r},t.prototype.isASCII=function(t,e){for(var i=t;i<e;++i){var r=this.get(i);if(r<32||r>176)return!1}return!0},t.prototype.parseStringISO=function(t,e){for(var i="",r=t;r<e;++r)i+=String.fromCharCode(this.get(r));return i},t.prototype.parseStringUTF=function(t,e){for(var i="",r=t;r<e;){var n=this.get(r++);i+=n<128?String.fromCharCode(n):n>191&&n<224?String.fromCharCode((31&n)<<6|63&this.get(r++)):String.fromCharCode((15&n)<<12|(63&this.get(r++))<<6|63&this.get(r++))}return i},t.prototype.parseStringBMP=function(t,e){for(var i,r,n="",s=t;s<e;)i=this.get(s++),r=this.get(s++),n+=String.fromCharCode(i<<8|r);return n},t.prototype.parseTime=function(t,e,i){var r=this.parseStringISO(t,e),n=(i?C:F).exec(r);return n?(i&&(n[1]=+n[1],n[1]+=+n[1]<70?2e3:1900),r=n[1]+"-"+n[2]+"-"+n[3]+" "+n[4],n[5]&&(r+=":"+n[5],n[6]&&(r+=":"+n[6],n[7]&&(r+="."+n[7]))),n[8]&&(r+=" UTC","Z"!=n[8]&&(r+=n[8],n[9]&&(r+=":"+n[9]))),r):"Unrecognized time: "+r},t.prototype.parseInteger=function(t,e){for(var i,r=this.get(t),n=r>127,s=n?255:0,o="";r==s&&++t<e;)r=this.get(t);if(i=e-t,0===i)return n?-1:0;if(i>4){for(o=r,i<<=3;0==(128&(+o^s));)o=+o<<1,--i;o="("+i+" bit)\n"}n&&(r-=256);for(var h=new L(r),a=t+1;a<e;++a)h.mulAdd(256,this.get(a));return o+h.toString()},t.prototype.parseBitString=function(t,e,i){for(var r=this.get(t),n=(e-t-1<<3)-r,s="("+n+" bit)\n",o="",h=t+1;h<e;++h){for(var a=this.get(h),u=h==e-1?r:0,f=7;f>=u;--f)o+=a>>f&1?"1":"0";if(o.length>i)return s+c(o,i)}return s+o},t.prototype.parseOctetString=function(t,e,i){if(this.isASCII(t,e))return c(this.parseStringISO(t,e),i);var r=e-t,n="("+r+" byte)\n";i/=2,r>i&&(e=t+i);for(var s=t;s<e;++s)n+=this.hexByte(this.get(s));return r>i&&(n+=H),n},t.prototype.parseOID=function(t,e,i){for(var r="",n=new L,s=0,o=t;o<e;++o){var h=this.get(o);if(n.mulAdd(128,127&h),s+=7,!(128&h)){if(""===r)if(n=n.simplify(),n instanceof L)n.sub(80),r="2."+n.toString();else{var a=n<80?n<40?0:1:2;r=a+"."+(n-40*a)}else r+="."+n.toString();if(r.length>i)return c(r,i);n=new L,s=0}}return s>0&&(r+=".incomplete"),r},t}(),K=function(){function t(t,e,i,r,n){if(!(r instanceof k))throw new Error("Invalid tag value.");this.stream=t,this.header=e,this.length=i,this.tag=r,this.sub=n}return t.prototype.typeName=function(){switch(this.tag.tagClass){case 0:switch(this.tag.tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString"}return"Universal_"+this.tag.tagNumber.toString();case 1:return"Application_"+this.tag.tagNumber.toString();case 2:return"["+this.tag.tagNumber.toString()+"]";case 3:return"Private_"+this.tag.tagNumber.toString()}},t.prototype.content=function(t){if(void 0===this.tag)return null;void 0===t&&(t=1/0);var e=this.posContent(),i=Math.abs(this.length);if(!this.tag.isUniversal())return null!==this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(e,e+i,t);switch(this.tag.tagNumber){case 1:return 0===this.stream.get(e)?"false":"true";case 2:return this.stream.parseInteger(e,e+i);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(e,e+i,t);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(e,e+i,t);case 6:return this.stream.parseOID(e,e+i,t);case 16:case 17:return null!==this.sub?"("+this.sub.length+" elem)":"(no elem)";case 12:return c(this.stream.parseStringUTF(e,e+i),t);case 18:case 19:case 20:case 21:case 22:case 26:return c(this.stream.parseStringISO(e,e+i),t);case 30:return c(this.stream.parseStringBMP(e,e+i),t);case 23:case 24:return this.stream.parseTime(e,e+i,23==this.tag.tagNumber)}return null},t.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},t.prototype.toPrettyString=function(t){void 0===t&&(t="");var e=t+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(e+="+"),e+=this.length,this.tag.tagConstructed?e+=" (constructed)":!this.tag.isUniversal()||3!=this.tag.tagNumber&&4!=this.tag.tagNumber||null===this.sub||(e+=" (encapsulates)"),e+="\n",null!==this.sub){t+="  ";for(var i=0,r=this.sub.length;i<r;++i)e+=this.sub[i].toPrettyString(t)}return e},t.prototype.posStart=function(){return this.stream.pos},t.prototype.posContent=function(){return this.stream.pos+this.header},t.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},t.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},t.decodeLength=function(t){var e=t.get(),i=127&e;if(i==e)return i;if(i>6)throw new Error("Length over 48 bits not supported at position "+(t.pos-1));if(0===i)return null;e=0;for(var r=0;r<i;++r)e=256*e+t.get();return e},t.prototype.getHexStringValue=function(){var t=this.toHexString(),e=2*this.header,i=2*this.length;return t.substr(e,i)},t.decode=function(e){var i;i=e instanceof U?e:new U(e,0);var r=new U(i),n=new k(i),s=t.decodeLength(i),o=i.pos,h=o-r.pos,a=null,u=function(){var e=[];if(null!==s){for(var r=o+s;i.pos<r;)e[e.length]=t.decode(i);if(i.pos!=r)throw new Error("Content size is not correct for container starting at offset "+o)}else try{for(;;){var n=t.decode(i);if(n.tag.isEOC())break;e[e.length]=n}s=o-i.pos}catch(h){throw new Error("Exception while decoding undefined length content: "+h)}return e};if(n.tagConstructed)a=u();else if(n.isUniversal()&&(3==n.tagNumber||4==n.tagNumber))try{if(3==n.tagNumber&&0!=i.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");a=u();for(var f=0;f<a.length;++f)if(a[f].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(c){a=null}if(null===a){if(null===s)throw new Error("We can't skip over an invalid tag with undefined length at offset "+o);i.pos=o+Math.abs(s)}return new t(r,h,s,n,a)},t}(),k=function(){function t(t){var e=t.get();if(this.tagClass=e>>6,this.tagConstructed=0!==(32&e),this.tagNumber=31&e,31==this.tagNumber){var i=new L;do e=t.get(),i.mulAdd(128,127&e);while(128&e);this.tagNumber=i.simplify()}}return t.prototype.isUniversal=function(){return 0===this.tagClass},t.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},t}(),_=0xdeadbeefcafe,z=15715070==(16777215&_),Z=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],G=(1<<26)/Z[Z.length-1],$=function(){function t(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}return t.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var i;if(16==t)i=4;else if(8==t)i=3;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return this.toRadix(t);i=2}var r,n=(1<<i)-1,s=!1,o="",h=this.t,a=this.DB-h*this.DB%i;if(h-- >0)for(a<this.DB&&(r=this[h]>>a)>0&&(s=!0,o=e(r));h>=0;)a<i?(r=(this[h]&(1<<a)-1)<<i-a,r|=this[--h]>>(a+=this.DB-i)):(r=this[h]>>(a-=i)&n,a<=0&&(a+=this.DB,--h)),r>0&&(s=!0),s&&(o+=e(r));return s?o:"0"},t.prototype.negate=function(){var e=l();return t.ZERO.subTo(this,e),e},t.prototype.abs=function(){return this.s<0?this.negate():this},t.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(e=i-t.t,0!=e)return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0},t.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+b(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(e){var i=l();return this.abs().divRemTo(e,null,i),this.s<0&&i.compareTo(t.ZERO)>0&&e.subTo(i,i),i},t.prototype.modPowInt=function(t,e){var i;return i=t<256||e.isEven()?new J(e):new X(e),this.exp(t,i)},t.prototype.clone=function(){var t=l();return this.copyTo(t),t},t.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},t.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},t.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},t.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},t.prototype.toByteArray=function(){var t=this.t,e=[];e[0]=this.s;var i,r=this.DB-t*this.DB%8,n=0;if(t-- >0)for(r<this.DB&&(i=this[t]>>r)!=(this.s&this.DM)>>r&&(e[n++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this[t]&(1<<r)-1)<<8-r,i|=this[--t]>>(r+=this.DB-8)):(i=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==n&&(128&this.s)!=(128&i)&&++n,(n>0||i!=this.s)&&(e[n++]=i);return e},t.prototype.equals=function(t){return 0==this.compareTo(t)},t.prototype.min=function(t){return this.compareTo(t)<0?this:t},t.prototype.max=function(t){return this.compareTo(t)>0?this:t},t.prototype.and=function(t){var e=l();return this.bitwiseTo(t,i,e),e},t.prototype.or=function(t){var e=l();return this.bitwiseTo(t,r,e),e},t.prototype.xor=function(t){var e=l();return this.bitwiseTo(t,n,e),e},t.prototype.andNot=function(t){var e=l();return this.bitwiseTo(t,s,e),e},t.prototype.not=function(){for(var t=l(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},t.prototype.shiftLeft=function(t){var e=l();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},t.prototype.shiftRight=function(t){var e=l();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},t.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+o(this[t]);return this.s<0?this.t*this.DB:-1},t.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=h(this[i]^e);return t},t.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},t.prototype.setBit=function(t){return this.changeBit(t,r)},t.prototype.clearBit=function(t){return this.changeBit(t,s)},t.prototype.flipBit=function(t){return this.changeBit(t,n)},t.prototype.add=function(t){var e=l();return this.addTo(t,e),e},t.prototype.subtract=function(t){var e=l();return this.subTo(t,e),e},t.prototype.multiply=function(t){var e=l();return this.multiplyTo(t,e),e},t.prototype.divide=function(t){var e=l();return this.divRemTo(t,e,null),e},t.prototype.remainder=function(t){var e=l();return this.divRemTo(t,null,e),e},t.prototype.divideAndRemainder=function(t){var e=l(),i=l();return this.divRemTo(t,e,i),[e,i]},t.prototype.modPow=function(t,e){var i,r,n=t.bitLength(),s=v(1);if(n<=0)return s;i=n<18?1:n<48?3:n<144?4:n<768?5:6,r=n<8?new J(e):e.isEven()?new Q(e):new X(e);var o=[],h=3,a=i-1,u=(1<<i)-1;if(o[1]=r.convert(this),i>1){var f=l();for(r.sqrTo(o[1],f);h<=u;)o[h]=l(),r.mulTo(f,o[h-2],o[h]),h+=2}var c,p,g=t.t-1,d=!0,y=l();for(n=b(t[g])-1;g>=0;){for(n>=a?c=t[g]>>n-a&u:(c=(t[g]&(1<<n+1)-1)<<a-n,g>0&&(c|=t[g-1]>>this.DB+n-a)),h=i;0==(1&c);)c>>=1,--h;if((n-=h)<0&&(n+=this.DB,--g),d)o[c].copyTo(s),d=!1;else{for(;h>1;)r.sqrTo(s,y),r.sqrTo(y,s),h-=2;h>0?r.sqrTo(s,y):(p=s,s=y,y=p),r.mulTo(y,o[c],s)}for(;g>=0&&0==(t[g]&1<<n);)r.sqrTo(s,y),p=s,s=y,y=p,--n<0&&(n=this.DB-1,--g)}return r.revert(s)},t.prototype.modInverse=function(e){var i=e.isEven();if(this.isEven()&&i||0==e.signum())return t.ZERO;for(var r=e.clone(),n=this.clone(),s=v(1),o=v(0),h=v(0),a=v(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),i?(s.isEven()&&o.isEven()||(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),i?(h.isEven()&&a.isEven()||(h.addTo(this,h),a.subTo(e,a)),h.rShiftTo(1,h)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),i&&s.subTo(h,s),o.subTo(a,o)):(n.subTo(r,n),i&&h.subTo(s,h),a.subTo(o,a))}return 0!=n.compareTo(t.ONE)?t.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},t.prototype.pow=function(t){return this.exp(t,new Y)},t.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var r=e;e=i,i=r}var n=e.getLowestSetBit(),s=i.getLowestSetBit();if(s<0)return e;for(n<s&&(s=n),s>0&&(e.rShiftTo(s,e),i.rShiftTo(s,i));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=i.getLowestSetBit())>0&&i.rShiftTo(n,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return s>0&&i.lShiftTo(s,i),i},t.prototype.isProbablePrime=function(t){var e,i=this.abs();if(1==i.t&&i[0]<=Z[Z.length-1]){for(e=0;e<Z.length;++e)if(i[0]==Z[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<Z.length;){for(var r=Z[e],n=e+1;n<Z.length&&r<G;)r*=Z[n++];for(r=i.modInt(r);e<n;)if(r%Z[e++]==0)return!1}return i.millerRabin(t)},t.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},t.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},t.prototype.fromString=function(e,i){var r;if(16==i)r=4;else if(8==i)r=3;else if(256==i)r=8;else if(2==i)r=1;else if(32==i)r=5;else{if(4!=i)return void this.fromRadix(e,i);r=2}this.t=0,this.s=0;for(var n=e.length,s=!1,o=0;--n>=0;){var h=8==r?255&+e[n]:m(e,n);h<0?"-"==e.charAt(n)&&(s=!0):(s=!1,0==o?this[this.t++]=h:o+r>this.DB?(this[this.t-1]|=(h&(1<<this.DB-o)-1)<<o,this[this.t++]=h>>this.DB-o):this[this.t-1]|=h<<o,o+=r,o>=this.DB&&(o-=this.DB))}8==r&&0!=(128&+e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},t.prototype.dlShiftTo=function(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s},t.prototype.drShiftTo=function(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s},t.prototype.lShiftTo=function(t,e){for(var i=t%this.DB,r=this.DB-i,n=(1<<r)-1,s=Math.floor(t/this.DB),o=this.s<<i&this.DM,h=this.t-1;h>=0;--h)e[h+s+1]=this[h]>>r|o,o=(this[h]&n)<<i;for(var h=s-1;h>=0;--h)e[h]=0;e[s]=o,e.t=this.t+s+1,e.s=this.s,e.clamp()},t.prototype.rShiftTo=function(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)return void(e.t=0);var r=t%this.DB,n=this.DB-r,s=(1<<r)-1;e[0]=this[i]>>r;for(var o=i+1;o<this.t;++o)e[o-i-1]|=(this[o]&s)<<n,e[o-i]=this[o]>>r;r>0&&(e[this.t-i-1]|=(this.s&s)<<n),e.t=this.t-i,e.clamp()},t.prototype.subTo=function(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);i<n;)r+=this[i]-t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r-=t[i],e[i++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[i++]=this.DV+r:r>0&&(e[i++]=r),e.t=i,e.clamp()},t.prototype.multiplyTo=function(e,i){var r=this.abs(),n=e.abs(),s=r.t;for(i.t=s+n.t;--s>=0;)i[s]=0;for(s=0;s<n.t;++s)i[s+r.t]=r.am(0,n[s],i,s,0,r.t);i.s=0,i.clamp(),this.s!=e.s&&t.ZERO.subTo(i,i)},t.prototype.squareTo=function(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var r=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,r,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()},t.prototype.divRemTo=function(e,i,r){var n=e.abs();if(!(n.t<=0)){var s=this.abs();if(s.t<n.t)return null!=i&&i.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=l());var o=l(),h=this.s,a=e.s,u=this.DB-b(n[n.t-1]);u>0?(n.lShiftTo(u,o),s.lShiftTo(u,r)):(n.copyTo(o),s.copyTo(r));var f=o.t,c=o[f-1];if(0!=c){var p=c*(1<<this.F1)+(f>1?o[f-2]>>this.F2:0),g=this.FV/p,d=(1<<this.F1)/p,y=1<<this.F2,m=r.t,v=m-f,T=null==i?l():i;for(o.dlShiftTo(v,T),r.compareTo(T)>=0&&(r[r.t++]=1,r.subTo(T,r)),t.ONE.dlShiftTo(f,T),T.subTo(o,o);o.t<f;)o[o.t++]=0;for(;--v>=0;){var S=r[--m]==c?this.DM:Math.floor(r[m]*g+(r[m-1]+y)*d);if((r[m]+=o.am(0,S,r,v,0,f))<S)for(o.dlShiftTo(v,T),r.subTo(T,r);r[m]<--S;)r.subTo(T,r)}null!=i&&(r.drShiftTo(f,i),h!=a&&t.ZERO.subTo(i,i)),r.t=f,r.clamp(),u>0&&r.rShiftTo(u,r),h<0&&t.ZERO.subTo(r,r)}}},t.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e},t.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},t.prototype.exp=function(e,i){if(e>4294967295||e<1)return t.ONE;var r=l(),n=l(),s=i.convert(this),o=b(e)-1;for(s.copyTo(r);--o>=0;)if(i.sqrTo(r,n),(e&1<<o)>0)i.mulTo(n,s,r);else{var h=r;r=n,n=h}return i.revert(r)},t.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},t.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),r=v(i),n=l(),s=l(),o="";for(this.divRemTo(r,n,s);n.signum()>0;)o=(i+s.intValue()).toString(t).substr(1)+o,n.divRemTo(r,n,s);return s.intValue().toString(t)+o},t.prototype.fromRadix=function(e,i){this.fromInt(0),null==i&&(i=10);for(var r=this.chunkSize(i),n=Math.pow(i,r),s=!1,o=0,h=0,a=0;a<e.length;++a){var u=m(e,a);u<0?"-"==e.charAt(a)&&0==this.signum()&&(s=!0):(h=i*h+u,++o>=r&&(this.dMultiply(n),this.dAddOffset(h,0),o=0,h=0))}o>0&&(this.dMultiply(Math.pow(i,o)),this.dAddOffset(h,0)),s&&t.ZERO.subTo(this,this)},t.prototype.fromNumber=function(e,i,n){if("number"==typeof i)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),r,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(i);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{var s=[],o=7&e;s.length=(e>>3)+1,i.nextBytes(s),o>0?s[0]&=(1<<o)-1:s[0]=0,this.fromString(s,256)}},t.prototype.bitwiseTo=function(t,e,i){var r,n,s=Math.min(t.t,this.t);for(r=0;r<s;++r)i[r]=e(this[r],t[r]);if(t.t<this.t){for(n=t.s&this.DM,r=s;r<this.t;++r)i[r]=e(this[r],n);i.t=this.t}else{for(n=this.s&this.DM,r=s;r<t.t;++r)i[r]=e(n,t[r]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()},t.prototype.changeBit=function(e,i){var r=t.ONE.shiftLeft(e);return this.bitwiseTo(r,i,r),r},t.prototype.addTo=function(t,e){for(var i=0,r=0,n=Math.min(t.t,this.t);i<n;)r+=this[i]+t[i],e[i++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;i<this.t;)r+=this[i],e[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<t.t;)r+=t[i],e[i++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[i++]=r:r<-1&&(e[i++]=this.DV+r),e.t=i,e.clamp()},t.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},t.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},t.prototype.multiplyLowerTo=function(t,e,i){var r=Math.min(this.t+t.t,e);for(i.s=0,i.t=r;r>0;)i[--r]=0;for(var n=i.t-this.t;r<n;++r)i[r+this.t]=this.am(0,t[r],i,r,0,this.t);for(var n=Math.min(t.t,e);r<n;++r)this.am(0,t[r],i,r,0,e-r);i.clamp()},t.prototype.multiplyUpperTo=function(t,e,i){--e;var r=i.t=this.t+t.t-e;for(i.s=0;--r>=0;)i[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)i[this.t+r-e]=this.am(e-r,t[r],i,0,0,this.t+r-e);i.clamp(),i.drShiftTo(1,i)},t.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var r=this.t-1;r>=0;--r)i=(e*i+this[r])%t;return i},t.prototype.millerRabin=function(e){var i=this.subtract(t.ONE),r=i.getLowestSetBit();if(r<=0)return!1;var n=i.shiftRight(r);e=e+1>>1,e>Z.length&&(e=Z.length);for(var s=l(),o=0;o<e;++o){s.fromInt(Z[Math.floor(Math.random()*Z.length)]);var h=s.modPow(n,this);if(0!=h.compareTo(t.ONE)&&0!=h.compareTo(i)){for(var a=1;a++<r&&0!=h.compareTo(i);)if(h=h.modPowInt(2,this),0==h.compareTo(t.ONE))return!1;if(0!=h.compareTo(i))return!1}}return!0},t.prototype.square=function(){var t=l();return this.squareTo(t),t},t.prototype.gcda=function(t,e){var i=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(i.compareTo(r)<0){var n=i;i=r,r=n}var s=i.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return void e(i);s<o&&(o=s),o>0&&(i.rShiftTo(o,i),r.rShiftTo(o,r));var h=function(){(s=i.getLowestSetBit())>0&&i.rShiftTo(s,i),(s=r.getLowestSetBit())>0&&r.rShiftTo(s,r),i.compareTo(r)>=0?(i.subTo(r,i),i.rShiftTo(1,i)):(r.subTo(i,r),r.rShiftTo(1,r)),i.signum()>0?setTimeout(h,0):(o>0&&r.lShiftTo(o,r),setTimeout(function(){e(r)},0))};setTimeout(h,10)},t.prototype.fromNumberAsync=function(e,i,n,s){if("number"==typeof i)if(e<2)this.fromInt(1);else{this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),r,this),this.isEven()&&this.dAddOffset(1,0);var o=this,h=function(){o.dAddOffset(2,0),o.bitLength()>e&&o.subTo(t.ONE.shiftLeft(e-1),o),o.isProbablePrime(i)?setTimeout(function(){s()},0):setTimeout(h,0)};setTimeout(h,0)}else{var a=[],u=7&e;a.length=(e>>3)+1,i.nextBytes(a),u>0?a[0]&=(1<<u)-1:a[0]=0,this.fromString(a,256)}},t}(),Y=function(){function t(){}return t.prototype.convert=function(t){return t},t.prototype.revert=function(t){return t},t.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i)},t.prototype.sqrTo=function(t,e){t.squareTo(e)},t}(),J=function(){function t(t){this.m=t}return t.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},t.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),X=function(){function t(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}return t.prototype.convert=function(t){var e=l();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo($.ZERO)>0&&this.m.subTo(e,e),e},t.prototype.revert=function(t){var e=l();return t.copyTo(e),this.reduce(e),e},t.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],r=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(i=e+this.m.t,t[i]+=this.m.am(0,r,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),Q=function(){function t(t){this.m=t,this.r2=l(),this.q3=l(),$.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t)}return t.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=l();return t.copyTo(e),this.reduce(e),e},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}();z&&"Microsoft Internet Explorer"==navigator.appName?($.prototype.am=d,O=30):z&&"Netscape"!=navigator.appName?($.prototype.am=g,O=26):($.prototype.am=y,O=28),$.prototype.DB=O,$.prototype.DM=(1<<O)-1,$.prototype.DV=1<<O;var W=52;$.prototype.FV=Math.pow(2,W),$.prototype.F1=W-O,$.prototype.F2=2*O-W;var tt,et,it=[];for(tt="0".charCodeAt(0),et=0;et<=9;++et)it[tt++]=et;for(tt="a".charCodeAt(0),et=10;et<36;++et)it[tt++]=et;for(tt="A".charCodeAt(0),et=10;et<36;++et)it[tt++]=et;$.ZERO=v(0),$.ONE=v(1);var rt,nt,st=function(){function t(){this.i=0,this.j=0,this.S=[]}return t.prototype.init=function(t){var e,i,r;for(e=0;e<256;++e)this.S[e]=e;for(i=0,e=0;e<256;++e)i=i+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[i],this.S[i]=r;this.i=0,this.j=0},t.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]},t}(),ot=256,ht=null;if(null==ht){ht=[],nt=0;var at=void 0;if(window.crypto&&window.crypto.getRandomValues){var ut=new Uint32Array(256);for(window.crypto.getRandomValues(ut),at=0;at<ut.length;++at)ht[nt++]=255&ut[at];
}var ft=function(t){if(this.count=this.count||0,this.count>=256||nt>=ot)return void(window.removeEventListener?window.removeEventListener("mousemove",ft,!1):window.detachEvent&&window.detachEvent("onmousemove",ft));try{var e=t.x+t.y;ht[nt++]=255&e,this.count+=1}catch(i){}};window.addEventListener?window.addEventListener("mousemove",ft,!1):window.attachEvent&&window.attachEvent("onmousemove",ft)}var ct=function(){function t(){}return t.prototype.nextBytes=function(t){for(var e=0;e<t.length;++e)t[e]=S()},t}(),lt=function(){function t(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return t.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},t.prototype.doPrivate=function(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),i=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(i)<0;)e=e.add(this.p);return e.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)},t.prototype.setPublic=function(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=p(t,16),this.e=parseInt(e,16)):console.error("Invalid RSA public key")},t.prototype.encrypt=function(t){var e=w(t,this.n.bitLength()+7>>3);if(null==e)return null;var i=this.doPublic(e);if(null==i)return null;var r=i.toString(16);return 0==(1&r.length)?r:"0"+r},t.prototype.setPrivate=function(t,e,i){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=p(t,16),this.e=parseInt(e,16),this.d=p(i,16)):console.error("Invalid RSA private key")},t.prototype.setPrivateEx=function(t,e,i,r,n,s,o,h){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=p(t,16),this.e=parseInt(e,16),this.d=p(i,16),this.p=p(r,16),this.q=p(n,16),this.dmp1=p(s,16),this.dmq1=p(o,16),this.coeff=p(h,16)):console.error("Invalid RSA private key")},t.prototype.generate=function(t,e){var i=new ct,r=t>>1;this.e=parseInt(e,16);for(var n=new $(e,16);;){for(;this.p=new $(t-r,1,i),0!=this.p.subtract($.ONE).gcd(n).compareTo($.ONE)||!this.p.isProbablePrime(10););for(;this.q=new $(r,1,i),0!=this.q.subtract($.ONE).gcd(n).compareTo($.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var s=this.p;this.p=this.q,this.q=s}var o=this.p.subtract($.ONE),h=this.q.subtract($.ONE),a=o.multiply(h);if(0==a.gcd(n).compareTo($.ONE)){this.n=this.p.multiply(this.q),this.d=n.modInverse(a),this.dmp1=this.d.mod(o),this.dmq1=this.d.mod(h),this.coeff=this.q.modInverse(this.p);break}}},t.prototype.decrypt=function(t){var e=p(t,16),i=this.doPrivate(e);return null==i?null:D(i,this.n.bitLength()+7>>3)},t.prototype.generateAsync=function(t,e,i){var r=new ct,n=t>>1;this.e=parseInt(e,16);var s=new $(e,16),o=this,h=function(){var e=function(){if(o.p.compareTo(o.q)<=0){var t=o.p;o.p=o.q,o.q=t}var e=o.p.subtract($.ONE),r=o.q.subtract($.ONE),n=e.multiply(r);0==n.gcd(s).compareTo($.ONE)?(o.n=o.p.multiply(o.q),o.d=s.modInverse(n),o.dmp1=o.d.mod(e),o.dmq1=o.d.mod(r),o.coeff=o.q.modInverse(o.p),setTimeout(function(){i()},0)):setTimeout(h,0)},a=function(){o.q=l(),o.q.fromNumberAsync(n,1,r,function(){o.q.subtract($.ONE).gcda(s,function(t){0==t.compareTo($.ONE)&&o.q.isProbablePrime(10)?setTimeout(e,0):setTimeout(a,0)})})},u=function(){o.p=l(),o.p.fromNumberAsync(t-n,1,r,function(){o.p.subtract($.ONE).gcda(s,function(t){0==t.compareTo($.ONE)&&o.p.isProbablePrime(10)?setTimeout(a,0):setTimeout(u,0)})})};setTimeout(u,0)};setTimeout(h,0)},t.prototype.sign=function(t,e,i){var r=x(i),n=r+e(t).toString(),s=E(n,this.n.bitLength()/4);if(null==s)return null;var o=this.doPrivate(s);if(null==o)return null;var h=o.toString(16);return 0==(1&h.length)?h:"0"+h},t.prototype.verify=function(t,e,i){var r=p(e,16),n=this.doPublic(r);if(null==n)return null;var s=n.toString(16).replace(/^1f+00/,""),o=R(s);return o==i(t).toString()},t}(),pt={md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",ripemd160:"3021300906052b2403020105000414"},gt={};gt.lang={extend:function(t,e,i){if(!e||!t)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var r=function(){};if(r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e),i){var n;for(n in i)t.prototype[n]=i[n];var s=function(){},o=["toString","valueOf"];try{/MSIE/.test(navigator.userAgent)&&(s=function(t,e){for(n=0;n<o.length;n+=1){var i=o[n],r=e[i];"function"==typeof r&&r!=Object.prototype[i]&&(t[i]=r)}})}catch(h){}s(t.prototype,i)}}};var dt={};"undefined"!=typeof dt.asn1&&dt.asn1||(dt.asn1={}),dt.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var i=e.substr(1),r=i.length;r%2==1?r+=1:e.match(/^[0-7]/)||(r+=2);for(var n="",s=0;s<r;s++)n+="f";var o=new $(n,16),h=o.xor(t).add($.ONE);e=h.toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return hextopem(t,e)},this.newObject=function(t){var e=dt,i=e.asn1,r=i.DERBoolean,n=i.DERInteger,s=i.DERBitString,o=i.DEROctetString,h=i.DERNull,a=i.DERObjectIdentifier,u=i.DEREnumerated,f=i.DERUTF8String,c=i.DERNumericString,l=i.DERPrintableString,p=i.DERTeletexString,g=i.DERIA5String,d=i.DERUTCTime,y=i.DERGeneralizedTime,m=i.DERSequence,v=i.DERSet,b=i.DERTaggedObject,T=i.ASN1Util.newObject,S=Object.keys(t);if(1!=S.length)throw"key of param shall be only one.";var E=S[0];if(":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+E+":")==-1)throw"undefined key: "+E;if("bool"==E)return new r(t[E]);if("int"==E)return new n(t[E]);if("bitstr"==E)return new s(t[E]);if("octstr"==E)return new o(t[E]);if("null"==E)return new h(t[E]);if("oid"==E)return new a(t[E]);if("enum"==E)return new u(t[E]);if("utf8str"==E)return new f(t[E]);if("numstr"==E)return new c(t[E]);if("prnstr"==E)return new l(t[E]);if("telstr"==E)return new p(t[E]);if("ia5str"==E)return new g(t[E]);if("utctime"==E)return new d(t[E]);if("gentime"==E)return new y(t[E]);if("seq"==E){for(var w=t[E],D=[],x=0;x<w.length;x++){var R=T(w[x]);D.push(R)}return new m({array:D})}if("set"==E){for(var w=t[E],D=[],x=0;x<w.length;x++){var R=T(w[x]);D.push(R)}return new v({array:D})}if("tag"==E){var B=t[E];if("[object Array]"===Object.prototype.toString.call(B)&&3==B.length){var A=T(B[2]);return new b({tag:B[0],explicit:B[1],obj:A})}var O={};if(void 0!==B.explicit&&(O.explicit=B.explicit),void 0!==B.tag&&(O.tag=B.tag),void 0===B.obj)throw"obj shall be specified for 'tag'.";return O.obj=T(B.obj),new b(O)}},this.jsonToASN1HEX=function(t){var e=this.newObject(t);return e.getEncodedHex()}},dt.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",i=parseInt(t.substr(0,2),16),r=Math.floor(i/40),n=i%40,e=r+"."+n,s="",o=2;o<t.length;o+=2){var h=parseInt(t.substr(o,2),16),a=("00000000"+h.toString(2)).slice(-8);if(s+=a.substr(1,7),"0"==a.substr(0,1)){var u=new $(s,2);e=e+"."+u.toString(10),s=""}}return e},dt.asn1.ASN1Util.oidIntToHex=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},i=function(t){var i="",r=new $(t,10),n=r.toString(2),s=7-n.length%7;7==s&&(s=0);for(var o="",h=0;h<s;h++)o+="0";n=o+n;for(var h=0;h<n.length-1;h+=7){var a=n.substr(h,7);h!=n.length-7&&(a="1"+a),i+=e(parseInt(a,2))}return i};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",n=t.split("."),s=40*parseInt(n[0])+parseInt(n[1]);r+=e(s),n.splice(0,2);for(var o=0;o<n.length;o++)r+=i(n[o]);return r},dt.asn1.ASN1Object=function(){var t="";this.getLengthHexFromValue=function(){if("undefined"==typeof this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+t.length+",v="+this.hV;var e=this.hV.length/2,i=e.toString(16);if(i.length%2==1&&(i="0"+i),e<128)return i;var r=i.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);var n=128+r;return n.toString(16)+i},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},dt.asn1.DERAbstractString=function(t){dt.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(this.s)},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("string"==typeof t?this.setString(t):"undefined"!=typeof t.str?this.setString(t.str):"undefined"!=typeof t.hex&&this.setStringHex(t.hex))},gt.lang.extend(dt.asn1.DERAbstractString,dt.asn1.ASN1Object),dt.asn1.DERAbstractTime=function(t){dt.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){utc=t.getTime()+6e4*t.getTimezoneOffset();var e=new Date(utc);return e},this.formatDate=function(t,e,i){var r=this.zeroPadding,n=this.localDateToUTC(t),s=String(n.getFullYear());"utc"==e&&(s=s.substr(2,2));var o=r(String(n.getMonth()+1),2),h=r(String(n.getDate()),2),a=r(String(n.getHours()),2),u=r(String(n.getMinutes()),2),f=r(String(n.getSeconds()),2),c=s+o+h+a+u+f;if(i===!0){var l=n.getMilliseconds();if(0!=l){var p=r(String(l),3);p=p.replace(/[0]+$/,""),c=c+"."+p}}return c+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(t)},this.setByDateValue=function(t,e,i,r,n,s){var o=new Date(Date.UTC(t,e-1,i,r,n,s,0));this.setByDate(o)},this.getFreshValueHex=function(){return this.hV}},gt.lang.extend(dt.asn1.DERAbstractTime,dt.asn1.ASN1Object),dt.asn1.DERAbstractStructured=function(t){dt.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,"undefined"!=typeof t&&"undefined"!=typeof t.array&&(this.asn1Array=t.array)},gt.lang.extend(dt.asn1.DERAbstractStructured,dt.asn1.ASN1Object),dt.asn1.DERBoolean=function(){dt.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},gt.lang.extend(dt.asn1.DERBoolean,dt.asn1.ASN1Object),dt.asn1.DERInteger=function(t){dt.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=dt.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new $(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t.bigint?this.setByBigInteger(t.bigint):"undefined"!=typeof t["int"]?this.setByInteger(t["int"]):"number"==typeof t?this.setByInteger(t):"undefined"!=typeof t.hex&&this.setValueHex(t.hex))},gt.lang.extend(dt.asn1.DERInteger,dt.asn1.ASN1Object),dt.asn1.DERBitString=function(t){if(void 0!==t&&"undefined"!=typeof t.obj){var e=dt.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}dt.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var i="0"+t;this.hTLV=null,this.isModified=!0,this.hV=i+e},this.setByBinaryString=function(t){t=t.replace(/0+$/,"");var e=8-t.length%8;8==e&&(e=0);for(var i=0;i<=e;i++)t+="0";for(var r="",i=0;i<t.length-1;i+=8){var n=t.substr(i,8),s=parseInt(n,2).toString(16);1==s.length&&(s="0"+s),r+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+e+r},this.setByBooleanArray=function(t){for(var e="",i=0;i<t.length;i++)e+=1==t[i]?"1":"0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=!1;return e},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):"undefined"!=typeof t.hex?this.setHexValueIncludingUnusedBits(t.hex):"undefined"!=typeof t.bin?this.setByBinaryString(t.bin):"undefined"!=typeof t.array&&this.setByBooleanArray(t.array))},gt.lang.extend(dt.asn1.DERBitString,dt.asn1.ASN1Object),dt.asn1.DEROctetString=function(t){if(void 0!==t&&"undefined"!=typeof t.obj){var e=dt.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}dt.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},gt.lang.extend(dt.asn1.DEROctetString,dt.asn1.DERAbstractString),dt.asn1.DERNull=function(){dt.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},gt.lang.extend(dt.asn1.DERNull,dt.asn1.ASN1Object),dt.asn1.DERObjectIdentifier=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},i=function(t){var i="",r=new $(t,10),n=r.toString(2),s=7-n.length%7;7==s&&(s=0);for(var o="",h=0;h<s;h++)o+="0";n=o+n;for(var h=0;h<n.length-1;h+=7){var a=n.substr(h,7);h!=n.length-7&&(a="1"+a),i+=e(parseInt(a,2))}return i};dt.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",n=t.split("."),s=40*parseInt(n[0])+parseInt(n[1]);r+=e(s),n.splice(0,2);for(var o=0;o<n.length;o++)r+=i(n[o]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(t){var e=dt.asn1.x509.OID.name2oid(t);if(""===e)throw"DERObjectIdentifier oidName undefined: "+t;this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t):void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},gt.lang.extend(dt.asn1.DERObjectIdentifier,dt.asn1.ASN1Object),dt.asn1.DEREnumerated=function(t){dt.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=dt.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new $(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t["int"]?this.setByInteger(t["int"]):"number"==typeof t?this.setByInteger(t):"undefined"!=typeof t.hex&&this.setValueHex(t.hex))},gt.lang.extend(dt.asn1.DEREnumerated,dt.asn1.ASN1Object),dt.asn1.DERUTF8String=function(t){dt.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},gt.lang.extend(dt.asn1.DERUTF8String,dt.asn1.DERAbstractString),dt.asn1.DERNumericString=function(t){dt.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},gt.lang.extend(dt.asn1.DERNumericString,dt.asn1.DERAbstractString),dt.asn1.DERPrintableString=function(t){dt.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},gt.lang.extend(dt.asn1.DERPrintableString,dt.asn1.DERAbstractString),dt.asn1.DERTeletexString=function(t){dt.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},gt.lang.extend(dt.asn1.DERTeletexString,dt.asn1.DERAbstractString),dt.asn1.DERIA5String=function(t){dt.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},gt.lang.extend(dt.asn1.DERIA5String,dt.asn1.DERAbstractString),dt.asn1.DERUTCTime=function(t){dt.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return"undefined"==typeof this.date&&"undefined"==typeof this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},gt.lang.extend(dt.asn1.DERUTCTime,dt.asn1.DERAbstractTime),dt.asn1.DERGeneralizedTime=function(t){dt.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),t.millis===!0&&(this.withMillis=!0))},gt.lang.extend(dt.asn1.DERGeneralizedTime,dt.asn1.DERAbstractTime),dt.asn1.DERSequence=function(t){dt.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++){var i=this.asn1Array[e];t+=i.getEncodedHex()}return this.hV=t,this.hV}},gt.lang.extend(dt.asn1.DERSequence,dt.asn1.DERAbstractStructured),dt.asn1.DERSet=function(t){dt.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++){var i=this.asn1Array[e];t.push(i.getEncodedHex())}return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},"undefined"!=typeof t&&"undefined"!=typeof t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},gt.lang.extend(dt.asn1.DERSet,dt.asn1.DERAbstractStructured),dt.asn1.DERTaggedObject=function(t){dt.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,i){this.hT=e,this.isExplicit=t,this.asn1Object=i,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=i.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t.tag&&(this.hT=t.tag),"undefined"!=typeof t.explicit&&(this.isExplicit=t.explicit),"undefined"!=typeof t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},gt.lang.extend(dt.asn1.DERTaggedObject,dt.asn1.ASN1Object);var yt=function(t){function e(i){var r=t.call(this)||this;return i&&("string"==typeof i?r.parseKey(i):(e.hasPrivateKeyProperty(i)||e.hasPublicKeyProperty(i))&&r.parsePropertiesFrom(i)),r}return f(e,t),e.prototype.parseKey=function(t){try{var e=0,i=0,r=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/,n=r.test(t)?M.decode(t):q.unarmor(t),s=K.decode(n);if(3===s.sub.length&&(s=s.sub[2].sub[0]),9===s.sub.length){e=s.sub[1].getHexStringValue(),this.n=p(e,16),i=s.sub[2].getHexStringValue(),this.e=parseInt(i,16);var o=s.sub[3].getHexStringValue();this.d=p(o,16);var h=s.sub[4].getHexStringValue();this.p=p(h,16);var a=s.sub[5].getHexStringValue();this.q=p(a,16);var u=s.sub[6].getHexStringValue();this.dmp1=p(u,16);var f=s.sub[7].getHexStringValue();this.dmq1=p(f,16);var c=s.sub[8].getHexStringValue();this.coeff=p(c,16)}else{if(2!==s.sub.length)return!1;var l=s.sub[1],g=l.sub[0];e=g.sub[0].getHexStringValue(),this.n=p(e,16),i=g.sub[1].getHexStringValue(),this.e=parseInt(i,16)}return!0}catch(d){return!1}},e.prototype.getPrivateBaseKey=function(){var t={array:[new dt.asn1.DERInteger({"int":0}),new dt.asn1.DERInteger({bigint:this.n}),new dt.asn1.DERInteger({"int":this.e}),new dt.asn1.DERInteger({bigint:this.d}),new dt.asn1.DERInteger({bigint:this.p}),new dt.asn1.DERInteger({bigint:this.q}),new dt.asn1.DERInteger({bigint:this.dmp1}),new dt.asn1.DERInteger({bigint:this.dmq1}),new dt.asn1.DERInteger({bigint:this.coeff})]},e=new dt.asn1.DERSequence(t);return e.getEncodedHex()},e.prototype.getPrivateBaseKeyB64=function(){return a(this.getPrivateBaseKey())},e.prototype.getPublicBaseKey=function(){var t=new dt.asn1.DERSequence({array:[new dt.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new dt.asn1.DERNull]}),e=new dt.asn1.DERSequence({array:[new dt.asn1.DERInteger({bigint:this.n}),new dt.asn1.DERInteger({"int":this.e})]}),i=new dt.asn1.DERBitString({hex:"00"+e.getEncodedHex()}),r=new dt.asn1.DERSequence({array:[t,i]});return r.getEncodedHex()},e.prototype.getPublicBaseKeyB64=function(){return a(this.getPublicBaseKey())},e.wordwrap=function(t,e){if(e=e||64,!t)return t;var i="(.{1,"+e+"})( +|$\n?)|(.{1,"+e+"})";return t.match(RegExp(i,"g")).join("\n")},e.prototype.getPrivateKey=function(){var t="-----BEGIN RSA PRIVATE KEY-----\n";return t+=e.wordwrap(this.getPrivateBaseKeyB64())+"\n",t+="-----END RSA PRIVATE KEY-----"},e.prototype.getPublicKey=function(){var t="-----BEGIN PUBLIC KEY-----\n";return t+=e.wordwrap(this.getPublicBaseKeyB64())+"\n",t+="-----END PUBLIC KEY-----"},e.hasPublicKeyProperty=function(t){return t=t||{},t.hasOwnProperty("n")&&t.hasOwnProperty("e")},e.hasPrivateKeyProperty=function(t){return t=t||{},t.hasOwnProperty("n")&&t.hasOwnProperty("e")&&t.hasOwnProperty("d")&&t.hasOwnProperty("p")&&t.hasOwnProperty("q")&&t.hasOwnProperty("dmp1")&&t.hasOwnProperty("dmq1")&&t.hasOwnProperty("coeff")},e.prototype.parsePropertiesFrom=function(t){this.n=t.n,this.e=t.e,t.hasOwnProperty("d")&&(this.d=t.d,this.p=t.p,this.q=t.q,this.dmp1=t.dmp1,this.dmq1=t.dmq1,this.coeff=t.coeff)},e}(lt),mt=function(){function t(t){t=t||{},this.default_key_size=parseInt(t.default_key_size,10)||1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null}return t.prototype.setKey=function(t){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new yt(t)},t.prototype.setPrivateKey=function(t){this.setKey(t)},t.prototype.setPublicKey=function(t){this.setKey(t)},t.prototype.decrypt=function(t){try{return this.getKey().decrypt(u(t))}catch(e){return!1}},t.prototype.encrypt=function(t){try{return a(this.getKey().encrypt(t))}catch(e){return!1}},t.prototype.sign=function(t,e,i){try{return a(this.getKey().sign(t,e,i))}catch(r){return!1}},t.prototype.verify=function(t,e,i){try{return this.getKey().verify(t,u(e),i)}catch(r){return!1}},t.prototype.getKey=function(t){if(!this.key){if(this.key=new yt,t&&"[object Function]"==={}.toString.call(t))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,t);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},t.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},t.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},t.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},t.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},t.version="3.0.0-rc.1",t}();window.JSEncrypt=mt,t.JSEncrypt=mt,t["default"]=mt,Object.defineProperty(t,"__esModule",{value:!0})});
(function(){var t,r;r={each:function(t,r){var n,i,o,e;for(null==t&&(t=[]),e=[],i=0,o=t.length;i<o;i++)n=t[i],e.push(r(n));return e},filter:function(t,r){var n,i,o,e,a;for(null==t&&(t=[]),a=[],e=[],i=0,o=t.length;i<o;i++)n=t[i],r(n)?e.push(a.push(n)):e.push(void 0);return e},unique:function(t,r){var n,i,o,e,a,u;for(null==t&&(t=[]),e={},u=[],i=0,o=t.length;i<o;i++)n=t[i],a=r?r(n):n,e[a]||(u.push(a),e[a]=!0);return u},keys:function(t){var r,n,i;n=[];for(r in t)i=t[r],n.push(r);return n}},t=function(){function t(t){null==t&&(t={}),this.data={wordMaxLen:t.wordMaxLen||20,wordMinLen:t.wordMinLen||2,likeSymbol:t.likeSymbol||"%"},this._init()}return t.prototype._init=function(){return this.wordMap={},this.wordLikeMap={},this.wordLikeTree={}},t.prototype._loadWordLib=function(t){return"string"==typeof t?this._loadLibFromFile(t):t instanceof Array?this._loadLibFromArray(t):void 0},t.prototype._loadLibFromFile=function(t){var r;try{return r=require("fs").readFileSync(t).toString("utf-8").split("\n"),this._loadLibFromArray(r)}catch(n){}},t.prototype._loadLibFromArray=function(t){var n,i,o,e,a,u;for(null==t&&(t=[]),e=this.data.likeSymbol,a=[],n=0,o=t.length;n<o;n++)u=t[n],u=u.replace(/\s/,""),i=u.length,i<this.data.wordMinLen||i>this.data.wordMaxLen||(u.indexOf(e)!==-1?a.push(function(t){return function(){var n,i,o;for(i=t.wordLikeTree,o=u.split(e),o=r.unique(o).sort(),n=[];o.length>0;)u=o.shift(),t.wordLikeMap[u]=!0,i[u]||(i[u]={branch:{}}),0===o.length&&(i[u].isLeaf=!0),n.push(i=i[u].branch);return n}}(this)()):this.wordMap[u]=!0);return a},t.prototype._doPicker=function(t){var n,i,o,e,a,u,s,h,d,l,f,c,p,L,y,b,w,k;for(null==t&&(t=""),y=t.length,L={},p={},k=this.data.wordMaxLen-y>0?y:this.data.wordMaxLen,n=o=h=this.data.wordMinLen,d=k;h<=d?o<=d:o>=d;n=h<=d?++o:--o)for(i=a=0,l=y-n;0<=l?a<=l:a>=l;i=0<=l?++a:--a)b=t.substr(i,n),b&&this.wordMap[b]&&(L[b]=!0);for(n=u=1,f=k;1<=f?u<=f:u>=f;n=1<=f?++u:--u)for(i=s=0,c=y-n;0<=c?s<=c:s>=c;i=0<=c?++s:--s)b=t.substr(i,n),b&&this.wordLikeMap[b]&&(p[b]=!0);return e=r.keys(p).sort(),w=this._findExistsPath(e),r.unique(r.keys(L).concat(w))},t.prototype._findExistsPath=function(t,n,i){var o,e,a,u,s,h,d;for(null==n&&(n=this.wordLikeTree),null==i&&(i=""),d=[],e=!i,h=this.data.likeSymbol,o=function(o){return function(){var a,s;if(a=e?u:i+h+u,n[u]&&(n[u].isLeaf&&d.push(a),s=n[u].branch,r.keys(s).length>0))return d=d.concat(o._findExistsPath(t,s,a))}}(this),a=0,s=t.length;a<s;a++)u=t[a],o();return d},t.prototype.doPicker=function(t){return this._doPicker(t)},t.prototype.addLib=function(t){return this._loadWordLib(t)},t.prototype.addlib=function(t){return this.addLib(t)},t.prototype.reloadLib=function(t){return this._init(),this.addLib(t)},t}(),window.Picker=t}).call(this);
(function(){var SDK,csArr,i,len,m,noop,orgError,slice=[].slice;if(window){if(noop=function(){},window._alert=window.alert,window.alert=window.confirm=noop,orgError=window.onerror,window.onerror=function(r,e,t,n,o){"function"==typeof orgError&&orgError(r,e,t,n,o);try{sdk.util.log("window error catch: ",r,e,t,n,o),sdk.util.justSend("http://pcfg.wps.cn:9002/report/window_error/"+sdk.util.getUrlParam("bubble_id")+"/"+r)}catch(a){}try{krwebview.close()}catch(s){try{external.webview_close()}catch(i){}}return!0},"undefined"==typeof console)for(window.console={},csArr=["log","info","debug","warn","error"],i=0,len=csArr.length;i<len;i++)m=csArr[i],window.console[m]=function(){};if(!document||9!==document.nodeType)throw new Error("document error")}SDK=function(){function SDK(){var r;this.initTime=new Date,this.version="2019-08-26 20:24:07",this.platform=window.krwebview?"ruby":"c++",this.env="production",this.client={},this.system={},this.util={},this.tools={},this["class"]={},this.service={},this.bubble={},this.feature={};try{r={release:this.version,environment:this.env,tags:{app_name:"ruby"===this.platform?krwps.app():external.wps_app()},users:{hdid:"ruby"===this.platform?krwps.hdid():external.wps_hdid()},dataCallback:function(r){return sdk.util.log("sentry:",sdk.util.encodeBase64(sdk.util.serialize(r))),r}}}catch(e){r={release:this.version}}Raven.config("http://b530e62860994f2a983f5b244aabfd85@sentry.psvr.wps.cn:9001/13",r).install(),Raven.setTransport(function(r){var e,t;try{if("production"===sdk.env&&1!==Math.ceil(Math.random()/.01))return;return sdk.util.httpPost(""+sdk.util.createGetUrl(r.url,r.auth),""+sdk.util.serialize(r.data).replace(/[^\x00-\xff]+/g,function(r){return encodeURI(r)}),r.onSuccess,r.onError)}catch(t){return e=t,sdk.util.log("错误上报err:",e.message)}})}return SDK.prototype.exec=function(){var args,argsEnum,command,err,error1,jsStr,ret;command=arguments[0],args=2<=arguments.length?slice.call(arguments,1):[],ret=null;try{"ruby"===this.platform?ret=eval(command).apply(this,args):(command=command.replace(/^kr/,"").replace(/\./g,"_"),argsEnum=sdk.util.serialize(args).replace(/^\[/,"").replace(/\]$/,""),jsStr="window.external."+command+"("+argsEnum+")",ret=eval(jsStr))}catch(error1){err=error1}return ret},SDK.prototype.exec2=function(){var args,argsEnum,command,err,error1,jsStr,ret;command=arguments[0],args=2<=arguments.length?slice.call(arguments,1):[],ret=null;try{"ruby"===this.platform?ret=eval(command).apply(this,args):(command=command.replace(/^kr/,"").replace(/\./g,"_"),argsEnum=sdk.util.serialize(args).replace(/^\[/,"").replace(/\]$/,""),jsStr="window.external."+command+"("+argsEnum+")",ret=eval(jsStr))}catch(error1){err=error1,ret=new Error("not support")}return ret},SDK.prototype.existsApi=function(command){var err,error1;if(null==command&&(command=""),"ruby"!==this.platform){command=command.replace(/^kr/,"").replace(/\./g,"_");try{if(window.external[command])return!0}catch(error1){err=error1,sdk.util.log("existsApi error:"+err.message)}return!1}try{if(eval(command)instanceof Function)return!0}catch(undefined){}return!1},SDK.prototype.noop=noop,SDK}(),this.sdk=new SDK}).call(this);
(function(){var t,i,r,s,n=[].slice;r="once",i="memory",s="unique",t=function(){function t(t){this._registry=[],this._firedList=[],"string"==typeof t?this.flags=t.split(/\s+/):t instanceof Array?this.flags=t:this.flags=[s]}return t.prototype.hasFlag=function(t){return this.flags.indexOf(t)>-1},t.prototype.containsFunc=function(t){var i,r,s,n;for(n=this._registry,r=0,s=n.length;r<s;r++)if(i=n[r],i===t)return!0;return!1},t.prototype.add=function(t){var r,n,e,h,a,f,o,l;if(this.hasFlag(s)&&this.containsFunc(t))return this;if(this._registry.push(t),this.hasFlag(i))for(l=this._firedList,f=0,o=l.length;f<o;f++){e=l[f],h=e.args,a=e.context;try{t.apply(a,h)}catch(n){r=n}}return this},t.prototype.remove=function(t){var i,r,s,n,e;if(t)for(e=this._registry,r=s=0,n=e.length;s<n;r=++s)i=e[r],i===t&&(this._registry[r]=null);else this._registry=[];return this},t.prototype.fire=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],t.unshift(this),this.fireWith.apply(this,t)},t.prototype.fireWith=function(){var t,s,e,h,a,f,o,l;if(e=arguments[0],t=2<=arguments.length?n.call(arguments,1):[],this.hasFlag(r)&&this._firedList.length>0)return this;for(l=this._registry,f=0,o=l.length;f<o;f++)if(s=l[f],null!==s)try{s.apply(e,t)}catch(a){h=a}return this.hasFlag(i)&&this._firedList.push({args:t,context:e}),this},t}(),sdk.callbacks=function(i){return new t(i)}}).call(this);
(function(){var t,e,r=[].slice;e=function(){function e(t){this.deferred=t}return e.prototype.done=function(t){return this.deferred.resolveCallbacks.add(t),this},e.prototype.fail=function(t){return this.deferred.rejectCallbacks.add(t),this},e.prototype.always=function(t){return this.done(t).fail(t)},e.prototype.then=function(e){var n,i;return i=new t,n=function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],t.unshift(i),e.apply(this,t)},this.always(n),i.promise()},e}(),t=function(){function t(){this._promise=new e(this),this.resolveCallbacks=sdk.callbacks("once memory"),this.rejectCallbacks=sdk.callbacks("once memory")}return t.prototype.promise=function(){return this._promise},t.prototype.resolve=function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],t.unshift(this),this.resolveWith.apply(this,t)},t.prototype.reject=function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],t.unshift(this),this.rejectWith.apply(this,t)},t.prototype.resolveWith=function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],this.resolveCallbacks.fireWith.apply(this.resolveCallbacks,t)},t.prototype.rejectWith=function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],this.rejectCallbacks.fireWith.apply(this.rejectCallbacks,t)},t}(),sdk.promise=function(e){var r;return r=new t,e.apply(this,[r]),r.promise()},sdk.deferred=function(e){return e?sdk.promise(e):new t}}).call(this);
(function(){var t;t=function(){function t(t){var n;this.id="service_promise_"+Math.random(),n='window["'+this.id+'"] = sdk.deferred('+t.toString()+")",sdk.client.webview.execute(0,n)}return t.prototype.done=function(t){return sdk.util.log(this.function2string(t,"done")),sdk.client.webview.execute(0,this.function2string(t,"done")),this},t.prototype.fail=function(t){return sdk.client.webview.execute(0,this.function2string(t,"fail")),this},t.prototype.always=function(t){return sdk.client.webview.execute(0,this.function2string(t,"always")),this},t.prototype.then=function(t){return sdk.client.webview.execute(0,this.function2string(t,"then")),this},t.prototype.function2string=function(t,n){return"(function(){\n  var fn = function(){\n    return ("+t.toString()+').apply(this, Array.prototype.slice.apply(arguments))\n  };\n  window["'+this.id.toString()+'"] = window["'+this.id.toString()+'"].'+n+"(fn)\n})()"},t}(),sdk.servicePromise=function(n){var i,e;try{return new t(n)}catch(e){return i=e,sdk.util.log(i.message)}}}).call(this);
(function(){var e=[].slice;sdk.when=function(r){var n,l,t,a,c,i,o;for(r instanceof Array||(r=Array.prototype.slice.call(arguments)),l=sdk.deferred(),c=0,t=r.length,n=[],i=0,o=r.length;i<o;i++)a=r[i],a.promise().done(function(){var r;if(r=1<=arguments.length?e.call(arguments,0):[],c++,n.push(r),c===t)return l.resolve.apply(l,n)}).fail(function(){var r;return r=1<=arguments.length?e.call(arguments,0):[],l.reject.apply(l,r)});return l.promise()}}).call(this);
(function(){var n,t=[].slice;n=function(){function n(){this.cbMap={}}return n.prototype.on=function(n,t){var o,r,a,c;if(null==n&&(n=""),null==t&&(t=sdk.noop),!(n instanceof Array))return this._on(n,t);for(c=[],o=0,r=n.length;o<r;o++)a=n[o],c.push(this._on(a,t));return c},n.prototype._on=function(n,t){var o,r;return null==t&&(t=sdk.noop),r="obs_"+sdk.util.getRandomNum(),o={token:r,callback:t},this.cbMap[n]instanceof Array?this.cbMap[n].push(o):this.cbMap[n]=[o],r},n.prototype.fire=function(){var n,o,r,a,c,i,s,e,l;if(s=arguments[0],n=2<=arguments.length?t.call(arguments,1):[],this.cbMap[s]instanceof Array)try{for(e=this.cbMap[s],l=[],c=0,i=e.length;c<i;c++)o=e[c],o&&o.callback instanceof Function?l.push(o.callback.apply(this,n)):l.push(void 0);return l}catch(a){r=a}},n.prototype.clean=function(n){var t,o,r,a,c,i,s;if(!n)return this.cbMap={};s=this.cbMap;for(o in s)for(t=s[o],a=c=0,i=t.length;c<i;a=++c)if(r=t[a],r.token===n)return void(this.cbMap[o][a].callback=sdk.noop)},n}(),sdk["class"].Observer=n}).call(this);
(function(){var SelfWebview,ns,serverTopview,slice=[].slice;ns="krwebview",serverTopview="bubble_service",SelfWebview=function(){function SelfWebview(e){var i;if(this.onLinkClicked=e,this.url=location.href.split("?")[0],this.id=sdk.client.webview.getCurrentViewId(),this.channelView="view_"+this.id,i="linkClickedCb_"+sdk.util.getRandomNum(),window[i]=function(e){return function(){var i;if(i=1<=arguments.length?slice.call(arguments,0):[],e.onLinkClicked)return e.onLinkClicked.apply(e,i)}}(this),!this.url)throw New(Error("throw error in create SelfView, url is empty"))}return SelfWebview.prototype.setZOrder=function(e){return this.emitTopviewEvent(serverTopview,"setZOrder",e)},SelfWebview.prototype.show=function(e){return this.emitTopviewEvent(serverTopview,"show",e)},SelfWebview.prototype.hide=function(){return this.emitTopviewEvent(serverTopview,"hide")},SelfWebview.prototype.resize=function(e,i){return this.width=e,this.height=i,this.emitTopviewEvent(serverTopview,"resize",this.width,this.height)},SelfWebview.prototype.move=function(e,i){return this.left=e,this.top=i,this.emitTopviewEvent(serverTopview,"move",this.left,this.top)},SelfWebview.prototype.destroy=function(){return this.emitTopviewEvent(serverTopview,"destroy")},SelfWebview.prototype.valid=function(){return sdk.client.webview.valid(this.id)},SelfWebview.prototype.isVisible=function(){return sdk.client.webview.isVisible(this.id)},SelfWebview.prototype.onTopviewEvent=function(server,handler){var ob;return ob=sdk.tools.observer,ob.on(server,function(_this){return function(argsb64){var args,err,error;try{args=eval("("+sdk.util.decodeBase64(argsb64)+")")}catch(error){err=error,sdk.util.log("error: "+err.message+", args : "+argsb64)}return handler.apply(_this,args)}}(this)),this.emitTopviewEvent(serverTopview,"connected",server)},SelfWebview.prototype.emitTopviewEvent=function(){var e,i,t;return e=1<=arguments.length?slice.call(arguments,0):[],i=sdk.util.encodeBase64(sdk.util.serialize(e)),t='sdk.tools.observer.fire("'+this.channelView+'", "'+i+'")',sdk.client.webview.execute(0,t)},SelfWebview}(),sdk["class"].SelfWebview=SelfWebview}).call(this);
(function(){var Webview,ns,slice=[].slice;ns="krwebview",Webview=function(){function Webview(e,t,i,n,s,o,r,d,l,u){var c,a,b;this.url=e,this.width=null!=t?t:300,this.height=null!=i?i:200,this.left=null!=n?n:0,this.top=null!=s?s:0,this.onDestroyed=o,this.onLoaded=r,this.onLinkClicked=d,null==l&&(l=[]),null==u&&(u=""),b="loadedCb_"+sdk.util.getRandomNum(),a="linkClickedCb_"+sdk.util.getRandomNum(),c="destroyedCb_"+sdk.util.getRandomNum(),window[c]=function(e){return function(){var t;if(t=1<=arguments.length?slice.call(arguments,0):[],window[c]=null,e.onDestroyed)return e.onDestroyed.apply(e,t)}}(this),window[a]=function(e){return function(){var t;if(t=1<=arguments.length?slice.call(arguments,0):[],e.onLinkClicked)return e.onLinkClicked.apply(e,t)}}(this),window[b]=function(e){return function(){var t;if(t=1<=arguments.length?slice.call(arguments,0):[],sdk.util.log("webview loaded"),"http://img1.pcfg.cache.wpscdn.cn/ks3_0f843acf96fcfb272aa910964333803d/ad.html"===e.url.slice(0,77)&&1===Math.ceil(Math.random()/.01)&&sdk.util.justSend("http://pcfg.wps.cn:9002/report/load/5bff41ca9a0c9409a98f3f47/0.01/3"),e.timeStart=new Date,window[b]=null,e.onLoaded)return e.onLoaded.apply(e,t)}}(this),"ruby"===sdk.platform&&krwebview&&krwebview.createWithClassName&&u?this.id=sdk.exec(ns+".createWithClassName",c,a,u)-0:this.id=sdk.exec(ns+".create",c,a)-0,this.resize(this.width-0,this.height-0),this.move(this.left,this.top),sdk.exec(ns+".setOpacity",this.id,0),/^\/\//.test(this.url)&&(this.url=window.location.protocol+this.url),sdk.exec(ns+".load",this.id,this.url,b),"http://img1.pcfg.cache.wpscdn.cn/ks3_0f843acf96fcfb272aa910964333803d/ad.html"===this.url.slice(0,77)&&1===Math.ceil(Math.random()/.01)&&sdk.util.justSend("http://pcfg.wps.cn:9002/report/load/5bff41ca9a0c9409a98f3f47/0.01/2"),sdk.util.log("webview load")}return Webview.prototype.setZOrder=function(e){return sdk.exec(ns+".setZOrder",this.id,e)},Webview.prototype.show=function(e){var t,i;sdk.existsApi("krwebview.setZOrder")&&(void 0!==e?this.setZOrder(parseInt(e)):sdk.system.isAnyProcessFullScreen()?this.setZOrder(0):this.setZOrder(100));try{return sdk.exec(ns+".show",this.id),sdk.exec(ns+".setOpacity",this.id,1)}catch(i){return t=i,sdk.util.log("error: show "+t.message)}},Webview.prototype.hide=function(){return sdk.exec(ns+".hide",this.id)},Webview.prototype.resize=function(e,t){return this.width=e,this.height=t,sdk.exec(ns+".resize",this.id,this.width-0,this.height-0)},Webview.prototype.move=function(e,t){return this.left=e,this.top=t,sdk.exec(ns+".move",this.id,this.left-0,this.top-0)},Webview.prototype.moveToRightBottom=function(){var e,t,i,n,s,o,r,d;return d=this.width,e=this.height,i=sdk.system.getScreenPadding(),n=sdk.system.getScreenSize(),r=n.width-i.right-i.left,o=n.height-i.top-i.bottom,r<d&&(d=r),o<e&&(e=o),t=n.width-d-i.right-1,s=n.height-e-i.bottom,this.move(t,s)},Webview.prototype.destroy=function(){sdk.util.log("气泡被销毁...");try{return sdk.exec(ns+".destroy",this.id)}catch(e){}},Webview.prototype.valid=function(){return sdk.client.webview.valid(this.id)},Webview.prototype.isVisible=function(){return sdk.client.webview.isVisible(this.id)},Webview.prototype.isHealthy=function(){return!this.isHidden()},Webview.prototype.isHidden=function(){return this.isBubbleSizeVisible()?sdk.client.info.getPlgVersion()>="1.0.5.35"&&!this.isBubbleRectVisible()?constant.HIDDEN_CODE.LOCATION:sdk.client.webview.isWindowVisible(this.id)===!1?constant.HIDDEN_CODE.WINDOWS:this.isVisible()===!1&&constant.HIDDEN_CODE.QT:constant.HIDDEN_CODE.SIZE},Webview.prototype.isBubbleSizeVisible=function(){var e;return e=sdk.client.webview.getBubbleRect(this.id),sdk.util.log("bubbleSizeWH:",e.right,e.left,e.right-e.left,e.bottom,e.top,e.bottom-e.top),sdk.util.log("isTrue:",e.right-e.left>10&&e.bottom-e.top>10),!!sdk.util.isEmptyObj(e)||e.right-e.left>10&&e.bottom-e.top>10},Webview.prototype.isBubbleRectVisible=function(){var e,t,i;return!(e=sdk.system.getDpi())||(i=sdk.system.getScreenSize(),t=sdk.client.webview.getBubbleRect(this.id),!!sdk.util.isEmptyObj(t)||t.left+(this.leftMargin*e||0)>=-1&&t.right<i.width*e&&t.top+(this.topMargin*e||0)>=0&&t.bottom<i.height*e)},Webview.prototype.getAliveTime=function(){var e;return e=this.timeStart||new Date,new Date-e},Webview.prototype.setDragArea=function(e,t,i,n){return sdk.util.log("设置拖动区域:"+e+", "+t+", "+i+", "+n),sdk.exec(ns+".setDragArea",this.id,e-0,t-0,i-0,n-0)},Webview.prototype.setDragAreaEx=function(e,t,i,n,s){var o;return sdk.util.log("设置拖动区域Ex:"+e+", "+t+", "+i+", "+n),o="setDragAreaExCallback_"+sdk.util.getRandomNum(),window[o]=function(){return window[o]=sdk.noop,s&&s()},sdk.exec(ns+".setDragAreaEx",this.id,e-0,t-0,i-0,n-0,o)},Webview.prototype.setBubbleMsgId=function(e,t){var i;return sdk.util.log("设置窗体名称:"+e+","+t),t?(i=sdk.exec2(ns+".setBubbleTitle",this.id,t+"_"+e),i instanceof Error&&"not support"===i.message&&(sdk.util.log("插件版本低，不支持setBubbleTitle接口，使用setBubbleMsgIdEx代替"),i=sdk.exec2(ns+".setBubbleMsgIdEx",this.id,e,t),i instanceof Error&&"not support"===i.message)?(sdk.util.log("插件版本低，不支持setBubbleMsgIdEx接口，使用setBubbleMsgId代替"),sdk.exec(ns+".setBubbleMsgId",this.id,e)):void 0):sdk.exec(ns+".setBubbleMsgId",this.id,e)},Webview.prototype.setBubbleTitle=function(e){var t;return t=sdk.exec2(ns+".setBubbleTitle",this.id,e),t instanceof Error&&"not support"===t.message?(sdk.util.log("插件版本低，不支持setBubbleTitle接口，调用失败"),!1):t},Webview.prototype.enableWindowProtection=function(e,t){return sdk.util.log("设置多余空间:"+e+"/"+t),this.leftMargin=e,this.topMargin=t,sdk.exec(ns+".enableWindowProtection",this.id,e,t)},Webview.prototype.enableWindowProtection2=function(e){var t,i;return sdk.util.log("enableWindowProtection2已启动"),i="enableWindowProtection2_showCallback_"+sdk.util.getRandomNum(),t="enableWindowProtection2_showCallback_"+sdk.util.getRandomNum(),window[i]=function(){return window[i]=sdk.noop,e&&e("show")},window[t]=function(){return window[t]=sdk.noop,e&&e("deal")},sdk.exec(ns+".enableWindowProtection2",this.id,i,t)},Webview.prototype.enableWindowProtection3=function(){return sdk.util.log("enableWindowProtection3已启动"+this.id),sdk.exec(ns+".enableWindowProtection3",this.id)},Webview.prototype.setWindowShieldCallback=function(e){var t;return sdk.util.log("setWindowShieldCallback已启用"),t="setWindowShieldCallback_"+sdk.util.getRandomNum(),window[t]=function(t){return e&&e(t)},sdk.exec(ns+".setWindowShieldCallback",this.id,t)},Webview.prototype.enableWindowProtectionNotify=function(e){var t;return sdk.util.log("enableWindowProtectionNotify已启用"),t="enableWindowProtectionNotify_"+sdk.util.getRandomNum(),window[t]=function(i){return window[t]=sdk.noop,e&&e(i)},sdk.exec(ns+".enableWindowProtectionNotify",this.id,t)},Webview.prototype.enableWindowHoverProtection=function(e,t,i){var n;return null==t&&(t=5),null==i&&(i=!0),sdk.util.log("enableWindowHoverProtection已启用"),n="enableWindowHoverProtection_"+sdk.util.getRandomNum(),window[n]=function(){return window[n]=sdk.noop,e&&e()},sdk.exec(ns+".enableWindowHoverProtection",this.id,n,t,i)},Webview.prototype.enableWindowHoverProtection2=function(e,t,i,n,s){var o;return null==t&&(t=5),null==i&&(i=1),null==n&&(n=60),null==s&&(s=!0),sdk.util.log("enableWindowHoverProtection2已启用"),o="enableWindowHoverProtection2_"+sdk.util.getRandomNum(),window[o]=function(){return window[o]=sdk.noop,e&&e()},sdk.exec(ns+".enableWindowHoverProtection2",this.id,o,t,i,n,s)},Webview.prototype.isBubbleActive=function(){var err,error,i,json,len,p,process,res;if(json=sdk.exec2(ns+".isBubbleActive",this.id),json instanceof Error&&"not support"===json.message)return sdk.util.log("插件版本低，不支持isBubbleActive接口，默认已置顶"),!0;try{if(sdk.util.log("isBubbleActive："+json),res=eval("("+json+")"),!res.center.pid)return!0;if("桌面整理"===res.center.text)return!0;for(process=sdk.system.listProcessesEx(),i=0,len=process.length;i<len;i++)if(p=process[i],p.pid-0===res.center.pid)return!!/^(wps\.exe|wpscenter\.exe|wpscloudsvr\.exe)$/.test(p.name);return!1}catch(error){return err=error,sdk.util.log("isBubbleActive接口，解析返回值失败:"+err.message),!0}},Webview.prototype.activeBubble=function(){return sdk.util.log("置顶气泡"+this.id),sdk.exec(ns+".activeBubble",this.id)},Webview.prototype.setUnableHide=function(e){return null==e&&(e=!0),sdk.exec(ns+".setUnableHide",this.id,e)},Webview}(),Webview.constant={TYPE_CLOSE_BY_CLOSE_BTN:1,TYPE_CLOSE_BY_NORMAL_CLICK_EVENT:2,TYPE_CLOSE_BY_TIMEOUT:3,TYPE_CLOSE_BY_FORCE:4,TYPE_CLOSE_BY_NOT_INTERESTED:5,TYPE_CLOSE_BY_RETRY:6,TYPE_CLOSE_BY_TRY_CLICK_HAT:7,TYPE_CLOSE_BY_AS_HIDDEN:8,TYPE_CLOSE_BY_WEBVIEW_STOP:9,TYPE_CLOSE_BY_CMD:10,TYPE_CLOSE_BY_VIP_GUIDE:11,TYPE_CLOSE_BY_RELOAD:12,TYPE_CLOSE_BY_NON_HEARTBEAT:13,TYPE_CLOSE_BY_OVERLAY_GROUP:14},sdk["class"].Webview=Webview}).call(this);
(function(){var c;c={},sdk.client.dom=c}).call(this);
(function(){var e,t,s;t="krwps",s={pptassist:{dist_num:{path:"HKEY_CURRENT_USER\\Software\\PPTAssist\\Common",name:"DistSrc"},guid:{path:"HKEY_CURRENT_USER\\Software\\PPTAssist\\Common",name:"infoGUID"}},te:{dist_num:{path:"HKEY_CURRENT_USER\\Software\\Kingsoft\\TypeEasy\\TypeEasyEx",name:"DistSrc"},guid:{path:"HKEY_CURRENT_USER\\Software\\Kingsoft\\TypeEasy\\TypeEasyEx",name:"infoGUID"}},qing:{new_installed:{path:"HKEY_CURRENT_USER\\SOFTWARE\\Kingsoft\\Office\\6.0\\Common",name:"NewInstallTime",day:7}},powerword:{dist_num:{path:"HKEY_CURRENT_USER\\Software\\Kingsoft\\power word",name:"PipeNumber"},guid:{path:"HKEY_CURRENT_USER\\Software\\Kingsoft\\power word",name:"AppUUID"}},wpsemail:null,docersoso:{dist_num:{path:"HKEY_CURRENT_USER\\Software\\Kingsoft\\docersoso\\Common\\",name:"DistSrc"},guid:{path:"HKEY_CURRENT_USER\\Software\\Kingsoft\\docersoso\\Common\\",name:"infoGUID"}},pwa:{dist_num:{path:"HKEY_CURRENT_USER\\SOFTWARE\\Kingsoft\\PowerWordAssist\\",name:"PipeNumber"},guid:{path:"HKEY_CURRENT_USER\\SOFTWARE\\Kingsoft\\PowerWordAssist\\",name:"AppUUID"}},ky:{dist_num:{path:"HKEY_CURRENT_USER\\SOFTWARE\\Kingsoft\\PowerWordKuaiYi\\",name:"PipeNumber"},guid:{path:"HKEY_CURRENT_USER\\SOFTWARE\\Kingsoft\\PowerWordKuaiYi\\",name:"AppUUID"}},ms:{dist_num:{path:"HKEY_CURRENT_USER\\SOFTWARE\\Kingsoft\\PowerWordMiaoSou\\",name:"PipeNumber"},guid:{path:"HKEY_CURRENT_USER\\SOFTWARE\\Kingsoft\\PowerWordMiaoSou\\",name:"AppUUID"}},ks:{dist_num:{path:"HKEY_CURRENT_USER\\SOFTWARE\\Kingsoft\\PowerWordKuaiSou\\",name:"PipeNumber"},guid:{path:"HKEY_CURRENT_USER\\SOFTWARE\\Kingsoft\\PowerWordKuaiSou\\",name:"AppUUID"}}},e={getAppName:function(){var e;return e=sdk.exec(t+".app")||"",e.toLocaleLowerCase()},getAppVersion:function(){return sdk.exec(t+".version")||""},getDistNum:function(){var e,n,o,i;e=this.getAppName();try{i=s[e].dist_num}catch(o){n=o,i=null}return i?sdk.system.getReg(i.name,i.path):sdk.exec(t+".distnum")||""},isSpecDistNewUser:function(){var e,t,n,o,i,a;e=this.getAppName();try{i=s[e].new_installed}catch(o){n=o,i=null}return a=/00360\.[\d]{8}/,t=sdk.client.info.getDistNum(),!!(a.test(t)&&i&&new Date-0-(sdk.util.parseDate(sdk.system.getReg(i.name,i.path))-0)<=2592e6)},isInstallNewUser:function(){var e,t,n,o,i,a;e=this.getAppName();try{a=s[e].new_installed}catch(n){t=n,a=null}return i=7,"12012.00002019"===sdk.client.info.getDistNum()?(o=sdk.client.info.getHdid(),parseInt(o.substr(o.length-1,1),16)%2===0&&(i=30)):(o=sdk.client.info.getHdid(),"0"===o[0]&&(i=30)),!!(a&&new Date-0-(sdk.util.parseDate(sdk.system.getReg(a.name,a.path))-0)<=24*i*3600*1e3)},canPopupAdBubble:function(){var e,t;return t=sdk.util.getNow(),e=sdk.client.info.getAppName(),!(t-sdk.tools.storage.get("last_exec_ad_time",e)<36e5)&&!(sdk.system.existsRegKeyOrPath("HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\Kingsoft Office\\DisplayVersion")&&t-sdk.tools.storage.get("last_exec_ad_time")<6048e5)},getGuid:function(){return sdk.exec(t+".guid")||""},getProjectGuid:function(){var e,n,o,i,a;e=this.getAppName();try{i=s[e].guid}catch(o){n=o,i=null}return i?(a=sdk.system.getReg(i.name,i.path)||"",a.replace(/\{|\}|-/g,"").toLocaleLowerCase()):sdk.exec(t+".guid")||""},getUuid:function(){return sdk.exec(t+".uuid")||""},getHdid:function(){var e;return"production"===sdk.env?(sdk.exec(t+".hdid")||"").toLowerCase():(e=sdk.system.getReg("hdid","HKEY_CURRENT_USER\\Software\\HDID\\"),e&&sdk.util.log("模拟hdid为"+e),(e||"").toLowerCase()||(sdk.exec(t+".hdid")||"").toLowerCase())},getPlgVersion:function(){return sdk.exec(t+".plgVersion")||""},getHostProcessName:function(){var e;return e=sdk.exec(t+".getHostProcessName")||"",sdk.util.log("getHostProcessName:",e),e},getAdType:function(){return"2"},isEduVersion:function(){return!!/^11\.1\.0\.(7837|7842|7848)$/.test(sdk.client.info.getAppVersion())||"edu"===sdk.system.getReg("category","HKEY_CURRENT_USER\\Software\\Kingsoft\\Office\\6.0\\common")}},sdk.client.info=e}).call(this);
(function(){var closing,exitTimeout,ns,plugin;ns="krwps",closing=!1,exitTimeout=null,plugin={stopExit:function(){if(exitTimeout)return sdk.util.log("取消程序退出,"+exitTimeout),clearTimeout(exitTimeout),exitTimeout=null},exit:function(e,n){return null==e&&(e=0),null==n&&(n=""),this.stopExit(),exitTimeout=setTimeout(function(){var e,n,t,s,r;try{return r="production"===sdk.env?.001:1,Math.random()<r&&(window.service?(e=window.service.appName,s=service.getPluginLoadNumToday()||1,sdk.util.justSend("http://pcfg.wps.cn:9002/report/"+e+"/plugin_exit/"+s)):(e="unknown_app",s="-1",sdk.util.justSend("http://pcfg.wps.cn:9002/report/"+e+"/plugin_exit/"+s))),setTimeout(function(){return sdk.exec(ns+".exit")||""},3e3)}catch(t){return n=t,sdk.util.log(n.message)}},e),sdk.util.log("程序即将"+e/1e3+"s后退出！"+n)},reload:function(){return sdk.exec(ns+".reload")},upgrade:function(){return sdk.exec(ns+".upgrade")||""},bubbleDisabled:function(){return!!sdk.exec(ns+".bubbleDisabled")},serviceLoaded:function(){return sdk.exec(ns+".serviceLoaded")||""},emit:function(e,n){return sdk.util.log("emit "+e+", "+n),sdk.exec(ns+".fireRequest",e,n)},setMsgPushIni:function(e,n,t){return sdk.exec(ns+".setMsgPushIni",e,n,t)},getMsgPushIni:function(e,n){return sdk.exec(ns+".getMsgPushIni",e,n)},isRunInWps:function(){var e;return e=sdk.exec(ns+".isRunInWps"),sdk.util.log("isRunInWps:",e),e},runBubble2:function(e,n){var t,s;t="runBubble2_callback_"+sdk.util.getRandomNum(),window[t]=function(s){return window[t]=sdk.noop,s?e&&e():n&&n()};try{if(s=sdk.exec(ns+".runBubble2",t,"2"),null===s)return sdk.util.log("runBubble2接口不存在"),n&&n()}catch(r){return sdk.util.log("runBubble2接口跑崩了"),n&&n()}},runBubbleWithOtherExe:function(e,n,t,s){var r,i,u;r="runBubbleWithOtherExe_callback_"+sdk.util.getRandomNum(),window[r]=function(e){var n;return window[r]=sdk.noop,e?t&&t():s&&s(n=!0)};try{if(i=n&&sdk.client.info.getPlgVersion()>="1.0.5.27"?sdk.exec(ns+".runBubbleWithOtherExeEx",r,e,!0):sdk.exec(ns+".runBubbleWithOtherExe",r,e),null===i)return sdk.util.log("runBubbleWithOtherExe接口不存在"),s&&s(u=!1)}catch(o){return sdk.util.log("runBubbleWithOtherExe接口跑崩了"),s&&s(u=!0)}},getUserInfoData:function(){var err,error,json,obj;json=sdk.exec(ns+".getUserInfoData");try{obj=eval("("+json+")"),obj=obj||{}}catch(error){err=error,sdk.util.log("getUserInfoData:"+err.message),obj={}}return obj},openVipAutoLoginUrl:function(e){var n;if(n=sdk.exec(ns+".openVipAutoLoginUrl",e),null===n)return sdk.util.log("当前版本没有找到带有登录状态的跳转，使用不带登录状态的跳转"),sdk.system.openUrl(e)},showUpgradeVip:function(e){var n,t,s;if(s="pc_ad",s+="&position="+sdk.bubble.id,e&&(s+="_"+e),t={param:s},n=sdk.exec(ns+".showUpgradeVip",sdk.util.encodeBase64(sdk.util.serialize(t))),null===n)return sdk.util.log("当前版本没有统一支付功能"),!1},isUserLogin:function(){return sdk.exec(ns+".isUserLogin")},getAdvertiseStatus:function(){return sdk.exec(ns+".getAdvertiseStatus")},getDisplayMode:function(){return sdk.exec(ns+".getDisplayMode")},getWpsRecentFiles:function(app,callback){var callbackFnName,err,inputObj,timeout;return sdk.util.log("getWpsRecentFiles:",app),callbackFnName="getWpsRecentFiles_callback_"+sdk.util.getRandomNum(),timeout=setTimeout(function(){return sdk.util.log("getWpsRecentFiles超时！！！！可能接口不存在或出错"),window[callbackFnName]=sdk.noop,callback([])},1e4),window[callbackFnName]=function(base64json){var err,error,json,obj;window[callbackFnName]=sdk.noop,clearTimeout(timeout),json=sdk.util.decodeBase64(base64json);try{obj=eval("("+json+")")}catch(error){err=error,sdk.util.log("组件最近文件返回解析失败"+err.message)}return sdk.util.log("getWpsRecentFiles成功",obj),callback&&callback(obj.files)},inputObj={app:app,callback:callbackFnName},err=sdk.exec(ns+".getWpsRecentFiles",sdk.util.encodeBase64(sdk.util.serialize(inputObj))),err instanceof Error&&"not support"===err.message&&sdk.util.log("不支持getWpsRecentFiles!!!!!!!!!"),err},registerProcessMonitorList:function(e){return sdk.util.log("开启场景监控",e),sdk.exec(ns+".registerProcessMonitorList",e)},unRegisterProcessMonitorList:function(e){return sdk.util.log("开启场景监控",e),sdk.exec(ns+".unRegisterProcessMonitorList",e)},enableSceneMsgPush:function(e){return sdk.util.log("开启浏览器场景通知"),sdk.exec(ns+".enableSceneMsgPush",e)}},sdk.client.plugin=plugin}).call(this);
(function(){var e,s;e={qing:{path:"HKEY_CURRENT_USER\\Software\\Kingsoft\\wpscloud",name:"usertype",compare:function(e){return(e-0||0)>10&&"104"!==e}},pptassist:{path:"HKEY_CURRENT_USER\\Software\\PPTAssist\\Common",name:"usertype",compare:function(e){return(e-0||0)>10}},powerword:null,wpsemail:null,docersoso:null,te:null,iqiyi:null},e.pwa=e.ky=e.ms=e.ks=e.pptassist,s={isPaidUser:function(){return s.isWpsPaidUser()||s.isCurrentClientPaidUser()},isCurrentClientPaidUser:function(){var s,t,n,r;try{if(s=sdk.client.info.getAppName(),r=e[s])return r.compare(sdk.system.getReg(r.name,r.path))}catch(n){t=n}return!1},isWpsPaidUser:function(){var s,t;return t=e.qing,s=sdk.system.getReg("vasprivilege","HKEY_CURRENT_USER\\Software\\Kingsoft\\wpscloud"),t.compare(sdk.system.getReg(t.name,t.path))||"true"===s},isComplainedUser:function(){return"1"===sdk.system.getReg("isn","HKEY_CURRENT_USER\\Software\\Kingsoft\\Office\\6.0\\plugins\\kbubble")}},sdk.client.user=s}).call(this);
(function(){var Webview,initDate,ns,slice=[].slice;ns="krwebview",Webview=sdk["class"].Webview,initDate=new Date,sdk.client.webview={heartbeat:function(){return sdk.exec(ns+".heartbeat")},enableHeartbeat:function(e){return sdk.exec(ns+".enableHeartbeat",e)},kill:function(e){return sdk.exec(ns+".kill",e)},getCurrentViewId:function(){return sdk.exec(ns+".currentId")},closeCurrentWindowByCloseBtn:function(){return this.closeCurrentWindow(Webview.constant.TYPE_CLOSE_BY_CLOSE_BTN)},closeCurrentWindowByNormalClick:function(){return this.closeCurrentWindow(Webview.constant.TYPE_CLOSE_BY_NORMAL_CLICK_EVENT)},closeCurrentWindowByNotInterested:function(){return this.closeCurrentWindow(Webview.constant.TYPE_CLOSE_BY_NOT_INTERESTED)},closeCurrentWindowByVipGuide:function(){return this.closeCurrentWindow(Webview.constant.TYPE_CLOSE_BY_VIP_GUIDE)},closeCurrentWindow:function(e){var t;return null==e&&(e=Webview.constant.TYPE_CLOSE_BY_NORMAL_CLICK_EVENT),t="sdk.tools.observer.fire('window_close', "+this.getCurrentViewId()+", "+e+")",sdk.util.log("from:bubble",t),setTimeout(function(){sdk.client.webview.execute(0,t);try{return krwebview.close()}catch(e){try{return external.webview_close()}catch(n){}}},0)},resize:function(e,t){var n;return n="sdk.tools.observer.fire('window_resize_"+this.getCurrentViewId()+"', "+e+","+t+")",sdk.util.log("from:bubble",n),sdk.client.webview.execute(0,n)},setDragArea:function(e,t,n,i){var r;return r="sdk.tools.observer.fire('window_setDragArea_"+this.getCurrentViewId()+"', "+e+", "+t+", "+n+", "+i+")",sdk.util.log("from:bubble",r),sdk.client.webview.execute(0,r)},setDragAreaEx:function(e,t,n,i){var r;return r="sdk.tools.observer.fire('window_setDragAreaEx_"+this.getCurrentViewId()+"', "+e+", "+t+", "+n+", "+i+")",sdk.util.log("from:bubble",r),sdk.client.webview.execute(0,r)},hideCurrentWindow:function(){var e;return e="sdk.tools.observer.fire('window_hide_"+this.getCurrentViewId()+"')",sdk.client.webview.execute(0,e)},inspector:function(e,t){return null==e&&(e={}),null==t&&(t=!0),sdk.exec(ns+".inspector",e.id,t)},inspectorCurrWin:function(e){var t;return null==e&&(e=!0),t=this.getCurrentViewId(),this.inspector({id:t},e)},generateWebview:function(e,t,n,i,r,s,o,u,l){return new sdk["class"].Webview(e,t-0,n-0,i,r,s,o,u,l)},generateRightBottomWebview:function(e,t,n,i,r,s,o,u){var l,c,d,b,a,w;return c=sdk.system.getScreenPadding(),d=sdk.system.getScreenSize(),w=d.width-c.right-c.left,a=d.height-c.top-c.bottom,w<t&&(t=w),a<n&&(n=a),l=d.width-t-c.right-1,b=d.height-n-c.bottom,new sdk["class"].Webview(e,t,n,l,b,i,r,s,o,u)},generateRightBottomBubble:function(e,t,n,i,r,s,o,u,l,c,d,b){var a,w,k,f;return null==s&&(s=0),null==o&&(o=18e4),null==u&&(u=sdk.noop),null==l&&(l=sdk.noop),null==c&&(c=sdk.noop),k=sdk.util.createGetUrl(n,{bubble_id:i,bubble_name:r}),a=function(){var e,t,o,u,l,d,b,a;if(o=1<=arguments.length?slice.call(arguments,0):[],n=o[1],sdk.util.isHttpUrl(n)){for(t=["info_title","info_name"],d=0,b=t.length;d<b&&(e=t[d],!(a=sdk.util.getUrlParam(e,n)));d++);a=a||"link_click",sdk.service.info.click(i,r,a,-1,sdk.util.getUrlParam("bubble_testId",n));try{if(sdk.system.openUrl(n),c&&c.apply(this,o),s-0===1)return f.destroy(Webview.constant.TYPE_CLOSE_BY_NORMAL_CLICK_EVENT)}catch(l){return u=l,sdk.util.log("error: openUrl,"+u.message)}}},w=function(){var e;if(e=1<=arguments.length?slice.call(arguments,0):[],l instanceof Function)return l.apply(this,e)},f=this.generateRightBottomWebview(k,e,t,u,w,a,d,b),sdk.client.webview.setBubbleId(f.id,i),sdk.util.log("set bubble id",f.id,i),f},execute:function(e,t){return null==e&&(e=0),sdk.exec(ns+".execute",e,t)},setBubbleId:function(e,t){return sdk.exec(ns+".setBubbleId",e,t)},isVisible:function(e){return sdk.exec(ns+".isVisible",e)},isWindowVisible:function(e){return sdk.exec(ns+".isWindowVisible",e)},setWindowVisible:function(e,t){return sdk.exec(ns+".setWindowVisible",e,t)},getBubbleRect:function(id){var error,json,res;json=sdk.exec(ns+".getBubbleRect",id);try{return res=eval("("+json+")"),res||{}}catch(error){return{}}},isBubbleRectVisible:function(e){var t,n,i;return!(t=sdk.system.getDpi())||(i=sdk.system.getScreenSize(),n=sdk.client.webview.getBubbleRect(e),sdk.util.log(n),n.left>=-1&&n.right<i.width*t&&n.top>=0&&n.bottom<i.height*t)},valid:function(e){return null==e&&(e=0),e=e-0||0,sdk.exec(ns+".valid",e)},syncCookie:function(e,t){var n,i,r,s;for(t instanceof Array||(t=[t]),s=[],i=0,r=t.length;i<r;i++)n=t[i],s.push(sdk.exec(ns+".setCookie",e,n.url,n.domain));return s},notifyPopupResult:function(e,t,n){return null==t&&(t=0),null==n&&(n=0),sdk.util.log(ns+".notifyPopupResult",e,t,n),sdk.exec(ns+".notifyPopupResult",e,t,n)}}}).call(this);
(function(){var KEY_WOW64_32KEY,KEY_WOW64_64KEY,REG_BINARY,REG_DWORD,REG_SZ,addCacheToFn,ns,regPath,str2list;ns="krwinsys",regPath="HKEY_CURRENT_USER\\Software\\kingsoft\\Office\\6.0\\common",KEY_WOW64_64KEY=256,KEY_WOW64_32KEY=512,REG_SZ=1,REG_BINARY=3,REG_DWORD=4,str2list=function(e,t){var r,n,s,o,i,l,u;for(null==e&&(e=""),null==t&&(t=";"),r=e.split(t),l={},u=[],s=0,i=r.length;s<i;s++)n=r[s],n&&(l[n]=1);for(o in l)u.push(o.toLocaleLowerCase());return u},addCacheToFn=function(){var e;return e={},function(t,r,n){return null==r&&(r=Math.floor(1e3*Math.random())),null==n&&(n=1),e[r]=null,function(){return null===e[r]&&(e[r]=t(),setTimeout(function(){return e[r]=null},n)),e[r]}}}(),sdk.system={getRealPath:function(e){return sdk.exec(ns+".varPathToRealPath",e)},isAnyProcessFullScreen:function(){return sdk.exec(ns+".isFullScreen")},getDpi:function(){return sdk.exec(ns+".getDpi")},getScreenSize:function(){return{width:sdk.exec(ns+".screenWidth")||1920,height:sdk.exec(ns+".screenHeight")||1040}},getScreenPadding:function(){var e,t,r,n,s,o,i,l;return i=sdk.exec(ns+".taskbarPosY"),e=sdk.exec(ns+".taskbarPosX"),o=sdk.exec(ns+".taskbarHeight"),l=sdk.exec(ns+".taskbarWidth"),i>0?(t=o,s=0):(t=0,s=0),e>0?(r=0,n=l):(r=0,n=0),{left:r,right:n,top:s,bottom:t}},setReg:function(e,t,r,n,s){return null==t&&(t=""),null==r&&(r=regPath),null==n&&(n=""),null==s&&(s=!1),t+="",n=n.toLowerCase(),n="dword"===n?REG_DWORD:"binary"===n?REG_BINARY:REG_SZ,s||n!==REG_SZ?this._setRegWin(e,t,r,n,KEY_WOW64_64KEY):this._setReg(e,t,r)},getReg:function(e,t,r,n){var s;return null==t&&(t=regPath),null==r&&(r=""),null==n&&(n=!1),r=r.toLowerCase(),r="dword"===r?REG_DWORD:"binary"===r?REG_BINARY:REG_SZ,n||r!==REG_SZ?(s=this._getRegWin(e,t,r,KEY_WOW64_64KEY),s instanceof Error&&"not support"===s.message&&(s=""),s):this._getReg(e,t)},_setReg:function(e,t,r){return t+="",sdk.exec(ns+".setReg",r,e,t)},_getReg:function(e,t){return sdk.exec(ns+".getReg",t,e)},_setRegWin:function(e,t,r,n,s){return null==n&&(n=REG_SZ),null==s&&(s=0),t+="",sdk.exec2(ns+".setRegWin",r,e,t,n,s)},_getRegWin:function(e,t,r,n){return null==r&&(r=REG_SZ),null==n&&(n=0),sdk.exec2(ns+".getRegWin",t,e,r,n)},openUrl:function(e){return!!sdk.util.isHttpUrl(e)&&(sdk.util.log("openUrl "+e),sdk.bubble.openUrl=e,sdk.bubble.openUrlByBrowser="default_"+sdk.system.getDefaultBrowserName(),sdk.exec(ns+".openUrl",e))},openUrlWithTargetBrowser:function(e,t){var r;return sdk.util.indexOf("360tray.exe",sdk.system.listProcesses())>=0&&(/^https?:\/\/e\.cn\.miaozhen\.com\//.test(e)||/^https?:\/\/clickc\.admaster\.com\.cn\//.test(e))?sdk.system.openUrl(e):!!sdk.util.isHttpUrl(e)&&(t||(t=sdk.bubble.getBubbleInfo("msgPid")),t?(sdk.util.log("openUrlWithTargetBrowser "+e+" by "+t),sdk.bubble.openUrl=e,sdk.bubble.openUrlByBrowser="top_"+sdk.browser.processName2BrowserName(sdk.bubble.getBubbleInfo("msgBrowser")),r=sdk.exec2(ns+".openUrlWithTargetBrowser",e,t),r instanceof Error&&"not support"===r.message?(sdk.util.log("openUrlWithTargetBrowser not support"),sdk.bubble.openUrlByBrowser="not support",sdk.system.openUrl(e)):r===!1?(sdk.util.log("openUrlWithTargetBrowser failed"),sdk.bubble.openUrlByBrowser="failed",sdk.system.openUrl(e)):void 0):sdk.system.openUrl(e))},openUrlWithIE:function(e,t){var r;if(null==t&&(t=!1),!sdk.util.isHttpUrl(e))return!1;if(sdk.util.log("openUrlWithIE "+e),sdk.bubble.openUrl=e,r=sdk.exec2(ns+".openUrlWithIE",e),!t){if(r===!1)return sdk.util.log("IE打开失败"),sdk.system.openUrl(e);if(r instanceof Error&&"not support"===r.message)return sdk.util.log("不存在接口"),sdk.system.openUrl(e)}return r},listProcesses:function(){var e;return e=addCacheToFn(function(){return sdk.system._listProcesses()},null,1)}(),_listProcesses:function(){var e;return e=sdk.exec(ns+".listProcesses"),str2list(e)},listProcessesEx:function(){var e;return e=addCacheToFn(function(){return sdk.system._listProcessesEx()},null,1)}(),_listProcessesEx:function(){var err,error,str;str=sdk.exec(ns+".listProcessesWithExtraInfo");try{return eval("("+str+")").processList}catch(error){return err=error,sdk.util.log("listProcessesEx解析失败"+err.message),[]}},getProcessesByPid:function(e){var t;return t=this.listProcessesByPid(),t[e]&&t[e].name||""},listProcessesByPid:function(){var e;return e=addCacheToFn(function(){return sdk.system._listProcessesJson()},null,1)}(),_listProcessesJson:function(){var err,error,str;str=sdk.exec(ns+".listProcessesJson");try{return eval("("+str+")").processList}catch(error){return err=error,sdk.util.log("listProcessesJson解析失败"+err.message),{}}},getTopProcess:function(){var e,t,r,n;for(n=this.listProcessesEx(),e=0,t=n.length;e<t;e++)if(r=n[e],"1"===r.isActive)return r;return{}},killProcess:function(e){return sdk.exec(ns+".killProcess",e)||!1},runProcess:function(e,t,r,n){return null==e&&(e=""),null==t&&(t=""),null==r&&(r=""),null==n&&(n=1),n+="",sdk.util.log("runProcess("+e+", "+t+", "+r+", "+n+")"),sdk.exec(ns+".runProcess",e,t,r,n)},runProcessEx:function(e,t,r,n,s){return null==e&&(e=""),null==t&&(t=""),null==r&&(r=""),null==n&&(n=""),null==s&&(s=0),t={path:e,params:t,uac:s},r&&(t.md5=r),n&&(t.sign=n),sdk.util.log("runProcessEx("+sdk.util.serialize(t)+")"),sdk.exec(ns+".runProcessEx",sdk.util.serialize(t))},_runNetExe:function(e,t,r,n,s){var o,i,l;null==e&&(e=""),null==t&&(t=""),null==r&&(r=""),null==n&&(n="1");try{r=r||e.match(/[0-9a-z]{32}/)[0]}catch(l){i=l}return o=function(e){return sdk.system.runProcess(e,t,r,n)},setTimeout(function(){return s?sdk.system.downloadAndThen(e,s,o):sdk.system.downloadAndThen(e,o)},1)},runNetExe:function(e,t,r,n,s){return null==e&&(e=""),sdk.client.webview.execute(0,"sdk.system._runNetExe('"+e+"', '"+t+"', '"+r+"', '"+n+"', '"+(s||"")+"')")},runNetExeInstallIcon:function(e,t,r){null==r&&(r=sdk.bubble.id);try{sdk.bubble.iconVersion=e.match(/[^\/\.]+\.\d+\.\d+\.\d+\.\d+/)[0]}catch(n){}return sdk.client.webview.execute(0,"sdk.system._runNetExeInstallIcon('"+e+"', '"+t+"', '"+r+"')")},_runNetExeInstallIcon:function(e,t,r){var n,s,o,i,l,u,a,c,d,k,g;return l=e.match(/\/ks3_([a-zA-Z0-9]{32})\/(\w+)\.(\d+\.\d+\.\d+\.\d+)(\.\w+)?\.exe$/),!(!l||5!==l.length)&&(u=l[1],i=l[2],g=l[3],o=new RegExp("(^|\\/)"+t+"\\.lnk(\\/|$)"),a=function(){switch(sdk.client.info.getAppName()){case"qing":return"-w";case"pptassist":return"-a";case"powerword":return"-p";case"docersoso":return"-d";case"te":return"-t";default:return"-w"}}(),s=function(){return sdk.system.getReg("version","HKEY_CURRENT_USER\\Software\\Shortcuts\\"+i+"\\")===g},n=function(){return o.test(sdk.system.listDesktopLinks().join("/"))||o.test(sdk.system.listTaskbarLinks().join("/"))},c=1,d=function(){var e;if(0===Math.floor(Math.random()/c))return e="noIcon",n()&&(e="noReg"),sdk.util.justSend("http://pcfg.wps.cn:9002/config/info/install-failed/"+r+"/"+c+"/"+e),sdk.service.info.sendStatistics({action:"install",probability:c,bubbleId:r,as:sdk.service.info.getUserAsInfo(),value:e})},k=function(){if(0===Math.floor(Math.random()/c))return sdk.util.justSend("http://pcfg.wps.cn:9002/config/info/install-succeed/"+r+"/"+c+"/"+sdk.service.info.getUserAsInfo()),sdk.service.info.sendStatistics({action:"install",probability:c,bubbleId:r,as:sdk.service.info.getUserAsInfo(),value:0})},sdk.system.runNetExe(e,a,u,"0","%appdata%/bubble"),sdk.util.loopDetection({condFunc:function(){return s()&&n()},successFunc:k,failedFunc:d,seconds:10,maxNum:6}))},downloadAndThen:function(e,t,r){var n,s,o;return t instanceof Function&&(r=t,t=null),/^\/\//.test(e)&&(e=window.location.protocol+e),sdk.util.log("start download file: "+e),n=180,o=function(t){var n;return n=.1,1===Math.ceil(Math.random()/n)&&sdk.util.justSend("http://pcfg.wps.cn:9002/report/download_succeed/"+e+"/"+n),sdk.util.log(e+" download succeed"),r&&r(t)},s=function(t){return function(t){return sdk.util.justSend("http://pcfg.wps.cn:9002/report/download_failed_"+t+"/"+e),sdk.util.log(e+" download failed, error code: "+t)}}(this),t?(sdk.util.log("使用指定目录的下载方式："+t),sdk.util.download2(e,t,n,o,s)):(sdk.util.log("使用默认目录下载"),sdk.util.download(e,n,o,s))},unzipAndThen:function(e,t,r){var n,s;return s=function(t){var n;if(n=1,1===Math.ceil(Math.random()/n))try{sdk.util.justSend("http://pcfg.wps.cn:9002/report/unzip_succeed/"+e.match(/[^\/|\\]+$/)[0]+"/"+n)}catch(s){}return sdk.util.log(e+" unzip succeed"),r&&r(t)},n=function(t){return function(t){try{sdk.util.justSend("http://pcfg.wps.cn:9002/report/unzip_failed_"+t+"/"+e.match(/[^\/|\\]+$/)[0])}catch(r){}return sdk.util.log(fileUrl+" unzip failed, error code: "+t)}}(this),sdk.util.unzip(e,t,s,n)},listDesktopLinks:function(){var e;return e=addCacheToFn(function(){var e;return e=sdk.exec(ns+".desktopLinks"),str2list(e)})}(),listTaskbarLinks:function(){var e;return e=addCacheToFn(function(){var e;return e=sdk.exec(ns+".taskbarLinks"),str2list(e)})}(),is64OS:function(){return sdk.exec2(ns+".is64OS")===!0},getOsName:function(){var e;return e=sdk.exec(ns+".osName")||"",e.toLowerCase()},hasUACPrivilege:function(){return sdk.exec(ns+".hasUACPrivilege")},listSoftWare:function(){var e;return e=addCacheToFn(function(){var e;return e=sdk.exec(ns+".installedSoftwareList"),str2list(e)})}(),existsRegPath:function(e,t){return null==t&&(t=!1),t?this._existsRegPathWin(e,KEY_WOW64_64KEY)===!0:this._existsRegPath(e)},existsRegKey:function(e,t,r){return null==r&&(r=!1),r?this._existsRegKeyWin(e,t,KEY_WOW64_64KEY)===!0:this._existsRegKey(e,t)},_existsRegPath:function(e){var t;return t=sdk.exec(ns+".existsRegPath",e)},_existsRegKey:function(e,t){var r;return r=sdk.exec(ns+".existsRegKey",e,t)},_existsRegPathWin:function(e,t){var r;return null==t&&(t=0),r=sdk.exec2(ns+".existsRegPathWin",e,t)},_existsRegKeyWin:function(e,t,r){var n;return null==r&&(r=0),n=sdk.exec2(ns+".existsRegKeyWin",e,t,r)},existsRegKeyOrPath:function(e,t){var r,n,s,o;if(null==e&&(e=""),null==t&&(t=!1),"ruby"===sdk.platform,1,/\\$/.test(e))return this.existsRegPath(e,t);try{return s=e.match(/\\(\w+)$/)[1],o=e.replace(/\w+$/,""),this.existsRegKey(o,s,t)}catch(n){return r=n,sdk.util.log(r.message,s,o),!1}},openOfficeDoc:function(e,t,r){return sdk.exec(ns+".openOfficeDoc",e,t,r)},openNetOfficeDoc:function(e,t,r){return sdk.util.justSend("http://pcfg.wps.cn:9002/report/openOfficeDoc/"+e+"/"+r),sdk.client.webview.execute(0,"sdk.system._openNetOfficeDoc('"+e+"', '"+t+"', '"+r+"')")},_openNetOfficeDoc:function(e,t,r){var n;return n=function(r){return sdk.util.log("openOfficeDoc("+e+", "+t+", "+r+")"),sdk.system.openOfficeDoc(e,t,r)},setTimeout(function(){return sdk.system.downloadAndThen(r,n)},1)},runRuby:function(e,t){var r,n;try{return sdk.util.log(ns+".runRuby",e,t),sdk.exec(ns+".runRuby",e,""+t)}catch(n){return r=n,sdk.util.log(r.message)}},runNetRuby:function(e,t){var r,n;return sdk.util.justSend("http://pcfg.wps.cn:9002/report/runRuby/"+e),n=sdk.util.encodeBase64(e),r=sdk.util.encodeBase64(t),sdk.client.webview.execute(0,"sdk.system._runNetRuby('"+n+"', '"+r+"')")},_runNetRuby:function(e,t){var r;return e=sdk.util.decodeBase64(e),t=sdk.util.decodeBase64(t),r=function(r){return sdk.util.log("runNetRuby("+e+", "+t+")"),sdk.system.runRuby(r,'"'+t+'"')},setTimeout(function(){return sdk.system.downloadAndThen(e,r)},1)},downloadAndRunRuby:function(e,t,r,n){var s,o,i,l,u,a;/^\/\//.test(e)&&(e=window.location.protocol+e),l=!0,i=180,a=function(){var t;return t=.1,1===Math.ceil(Math.random()/t)&&sdk.util.justSend("http://pcfg.wps.cn:9002/report/download_and_run_succeed/"+e+"/"+t),sdk.util.log(e+" download and run succeed"),n&&n()},u=function(t){return sdk.util.justSend("http://pcfg.wps.cn:9002/report/download_and_run_failed/"+e+"/"+t),sdk.util.log(e+" download and run failed, error code: "+t)};try{return sdk.util.log("start downloadAndRunRuby: "+e),sdk.util.downloadAndRunRuby(e,t,r,l,i,a,u)}catch(o){return s=o,sdk.util.log(s.message)}},runPlugin:function(e,t){return sdk.exec(ns+".runPlugin",e,t)},isProjectorConnected:function(){return sdk.exec(ns+".isProjectorConnected")},getScreenCount:function(){return sdk.exec(ns+".getScreenCount")},getDefaultBrowserName:function(){return sdk.exec(ns+".getDefaultBrowserName")},getAllBrowserHistory:function(beginTime,endTime,maxCount,callback){var callbackFnName,err,inputObj,timeout;return/^11\.1\.0\.(8214|8597)$/.test(sdk.client.info.getAppVersion())?(beginTime=Math.max(beginTime,endTime-6048e5)/1e3,endTime/=1e3,callbackFnName="getAllBrowserHistory_callback_"+sdk.util.getRandomNum(),sdk.util.log("getAllBrowserHistory:",beginTime,endTime,maxCount,callbackFnName),timeout=setTimeout(function(){return sdk.util.log("getAllBrowserHistory超时！！！！可能接口不存在或出错",callbackFnName),window[callbackFnName]=sdk.noop,callback(0,[])},2e4),window[callbackFnName]=function(base64json){var _info,browser,err,error,error1,json,obj,results;sdk.util.log("getAllBrowserHistory回调！！！",callbackFnName),window[callbackFnName]=sdk.noop,clearTimeout(timeout),json=sdk.util.decodeBase64(base64json);try{obj=eval("("+json+")")}catch(error){err=error,sdk.util.log("浏览器数据返回解析失败"+err.message)}try{results=[];for(browser in obj)_info=obj[browser],_info=eval("("+_info+")"),0===_info.code?(sdk.util.log("getAllBrowserHistory成功，从浏览器"+browser+"中拿到"+_info.history.length+"条"),results.push(callback&&callback(1,_info.history,browser))):results.push(sdk.util.log(browser+"浏览器查询返回失败:",_info.errmsg));return results}catch(error1){return err=error1,sdk.util.log("浏览器数据返回解析失败"+err.message)}},inputObj={from_time:beginTime,end_time:endTime,max_count:maxCount,callback:callbackFnName},err=sdk.exec2(ns+".getAllBrowserHistory",sdk.util.encodeBase64(sdk.util.serialize(inputObj))),err instanceof Error&&"not support"===err.message&&(sdk.util.log("不支持getAllBrowserHistory!!!!!!!!!"),clearTimeout(timeout),setTimeout(function(){return callback(0,[])},0)),err):callback&&callback(0,[])},getBrowserHistory:function(beginTime,endTime,maxCount,callback){var callbackFnName,err,inputObj,timeout;return/^11\.1\.0\.(8214|8597)$/.test(sdk.client.info.getAppVersion())?(beginTime=Math.max(beginTime,endTime-2592e5)/1e3,endTime/=1e3,callbackFnName="getBrowserHistory_callback_"+sdk.util.getRandomNum(),sdk.util.log("getBrowserHistory:",beginTime,endTime,maxCount,callbackFnName),timeout=setTimeout(function(){return sdk.util.log("getBrowserHistory超时！！！！可能接口不存在或出错",callbackFnName),window[callbackFnName]=sdk.noop,callback([])},2e4),window[callbackFnName]=function(base64json){var err,error,json,obj;sdk.util.log("getBrowserHistory回调！！！",callbackFnName),window[callbackFnName]=sdk.noop,clearTimeout(timeout),json=sdk.util.decodeBase64(base64json);try{obj=eval("("+json+")")}catch(error){err=error,sdk.util.log("浏览器数据返回解析失败"+err.message)}return 0===obj.code?(sdk.util.log("getBrowserHistory成功，从浏览器"+obj.browser+"中拿到"+obj.history.length+"条"),callback&&callback(obj.history,obj.browser)):(sdk.util.log(obj.browser,"浏览器查询返回失败:",obj.errmsg),callback&&callback([]))},inputObj={from_time:beginTime,end_time:endTime,max_count:maxCount,callback:callbackFnName},err=sdk.exec2(ns+".getBrowserHistory",sdk.util.encodeBase64(sdk.util.serialize(inputObj))),err instanceof Error&&"not support"===err.message&&(sdk.util.log("不支持getBrowserHistory!!!!!!!!!"),clearTimeout(timeout),setTimeout(function(){return callback([])},0)),err):callback&&callback([])},getBrowserHistoryById:function(type,beginTime,endTime,maxCount,callback){var callbackFnName,err,infoProbability,inputObj,timeout;return/^11\.1\.0\.(8214|8597)$/.test(sdk.client.info.getAppVersion())?(beginTime=Math.max(beginTime,endTime-2592e5)/1e3,endTime/=1e3,infoProbability=1===Math.ceil(Math.random()/.01),callbackFnName="getBrowserHistoryByName_callback_"+sdk.util.getRandomNum(),sdk.util.log("getBrowserHistoryByName:",beginTime,endTime,maxCount,callbackFnName),timeout=setTimeout(function(){return sdk.util.log("getBrowserHistoryByName超时！！！！可能接口不存在或出错",callbackFnName),window[callbackFnName]=sdk.noop,callback([])},2e4),window[callbackFnName]=function(base64json){var err,error,json,obj;sdk.util.log("getBrowserHistoryByName回调！！！",callbackFnName),window[callbackFnName]=sdk.noop,clearTimeout(timeout),json=sdk.util.decodeBase64(base64json);try{obj=eval("("+json+")")}catch(error){err=error,sdk.util.log("浏览器数据返回解析失败"+err.message)}return 0===obj.code?(sdk.util.log("getBrowserHistoryByName成功，从浏览器"+obj.browser+"中拿到"+obj.history.length+"条"),callback&&callback(obj.history,obj.browser)):(sdk.util.log(obj.browser,"浏览器查询返回失败:",obj.errmsg),callback&&callback([]))},inputObj={browserType:type,from_time:beginTime,end_time:endTime,max_count:maxCount,callback:callbackFnName},err=sdk.exec2(ns+".getBrowserHistoryByName",sdk.util.encodeBase64(sdk.util.serialize(inputObj))),err instanceof Error&&"not support"===err.message&&(sdk.util.log("不支持getBrowserHistoryByName!!!!!!!!!"),clearTimeout(timeout),setTimeout(function(){return callback([])},0)),err):callback&&callback([])},getRecentBrowserHistory:function(hour,callback){return sdk.util.db.available()?sdk.util.db.select("feature.db","feature_source",{type:"browser_history",time:">"+(sdk.util.getNow()-3600*hour*1e3)},function(list){var detail,err,error,item,j,len,res;for(res=[],j=0,len=list.length;j<len;j++){item=list[j];try{detail=eval("("+item.detail+")"),res.push(detail)}catch(error){err=error,sdk.util.log("detail数据解析失败：",err.message),res.push({})}}return callback(res)}):callback([])},getRecentBrowserHistoryTitle:function(){var e;return e={},function(t,r){return e[t]?r&&r(e[t]):sdk.system.getRecentBrowserHistory(t,function(n){return function(n){var s,o,i,l;for(l=[],o=0,i=n.length;o<i;o++)s=n[o],l.push(s.title);return e[t]=l,r&&r(e[t])}}(this))}}(),getRecentHistoryByBrowser:function(name,hour,callback){return sdk.util.db.available()?sdk.util.db.select("feature.db","feature_source",{type:"browser_history",time:">"+(sdk.util.getNow()-3600*hour*1e3)},function(list){var detail,err,error,item,j,len,res;for(res=[],j=0,len=list.length;j<len;j++){item=list[j];try{detail=eval("("+item.detail+")"),detail.browser===name&&res.push(detail)}catch(error){err=error,sdk.util.log("detail数据解析失败：",err.message),res.push({})}}return callback(res)}):callback([])},getIdleTime:function(){var e;return e=null,function(){var t;return null!==e?t=e:(e=t=sdk.exec2(ns+".getIdleTime"),setTimeout(function(){return e=null},0)),sdk.util.log("距离上次输入时间",t),t}}(),isPathExists:function(e){return sdk.exec2(ns+".isPathExists",e)},getFileInfo:function(path){var err,error,obj;if(obj=sdk.exec2(ns+".getFileInfo",path),obj instanceof Error&&"not support"===obj.message)sdk.util.log("不支持getFileInfo!"),obj={};else try{obj=eval("("+obj+")")}catch(error){err=error,sdk.util.log("getFileInfo return error",err.message),obj={}}return obj},getFolderPath:function(e){return sdk.exec(ns+".shGetFolderPath",e)},getBrowserInstallList:function(){var fn;return/^11\.1\.0\.(8214|8597)$/.test(sdk.client.info.getAppVersion())?fn=addCacheToFn(function(){var err,error,obj;if(obj=sdk.exec2(ns+".getBrowserInstallList"),obj instanceof Error&&"not support"===obj.message)sdk.util.log("不支持getBrowserInstallList"),obj={};else try{obj=eval("("+obj+")")}catch(error){err=error,sdk.util.log("getBrowserInstallList return error",err.message),obj={}}return obj},"getBrowserInstallList",3e5):function(){return{}}}(),listDesktopFiles:function(){var e;return e=addCacheToFn(function(){var e;return e=sdk.exec(ns+".desktopFiles")||"",str2list(e)})}(),listSystemRecentList:function(){var e;return e=addCacheToFn(function(){var e;return e=sdk.exec(ns+".systemRecentList")||"",str2list(e)})}()}}).call(this);
(function(){var e,s,i,n,r={}.hasOwnProperty;e="0",i="1",s="2",n={"360tray":{installReg:"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\360安全卫士\\DisplayVersion",processName:"360tray.exe",brand:e,id:"00"},"360sd":{installReg:"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\360SD\\DisplayVersion",processName:"360sd.exe",brand:e,id:"01"},qg:{installReg:"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\QQPCMgr\\UninstallString",processName:"qqpctray.exe",brand:i,id:"10"},db:{installReg:"HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\Kingsoft Internet Security\\UninstallString",processName:"kxescore.exe",brand:s,id:"20"},dbs:{installReg:[],processName:["liebao.exe","knbcenter.exe","kxetray.exe","kxescore.exe","kcddtool.exe","kislive.exe","ksoftmgr.exe","kscan.exe","ksoftpurifier.exe","kdesk64.exe","adintermaster.exe","kdeskcore.exe","kwallpaper.exe","drivergenius.exe","dgservice.exe","kcalendar.exe","kcaldcore.exe","kcalprotect.exe","kcalprotect64.exe","knatsvc.exe","kwifi.exe","kwifiiguard.exe","kwtpanel.exe","kdesk.exe"],brand:s,id:"21"}},sdk.as={cache:{},init:function(){return this.initAsInstall(),this.initAsProcess()},initAsProcess:function(){var e,s,i,t,a,l,c,o,d,h,p,f,u,x;for(p={},u=sdk.system.listProcesses(),t=0,c=u.length;t<c;t++)f=u[t],p[f]=1;a=[],s=[],d=[];for(e in n)if(r.call(n,e))if(i=n[e],"string"==typeof i.processName)p[i.processName]&&(a.push(i.id),s.push(i.brand),d.push(e));else if(i.processName instanceof Array)for(x=i.processName,l=0,o=x.length;l<o;l++)if(h=x[l],p[h]){a.push(i.id),s.push(i.brand),d.push(e);break}return this.cache.process={id:a,brand:s,name:d}},initAsInstall:function(){var e,s,i,t,a,l,c,o,d;a=[],s=[],c=[];for(e in n)if(r.call(n,e))if(i=n[e],"string"==typeof i.installReg)sdk.system.existsRegKeyOrPath(i.installReg)&&(a.push(i.id),s.push(i.brand),c.push(e));else if(i.installReg instanceof Array)for(d=i.installReg,t=0,l=d.length;t<l;t++)if(o=d[t],sdk.system.existsRegKeyOrPath(o)){a.push(i.id),s.push(i.brand),c.push(e);break}return this.cache.install={id:a,brand:s,name:c}},getAsProcess:function(e,s){var i;return i=[],"brand"===e?i=this.cache.process.brand:"id"===e?i=this.cache.process.id:"name"===e&&(i=this.cache.process.name),s&&(i=i.join(s)),i},getAsInstall:function(e,s){var i;return i=[],"brand"===e?i=this.cache.install.brand:"id"===e?i=this.cache.install.id:"name"===e&&(i=this.cache.install.name),s&&(i=i.join(s)),i}},sdk.as.init(),setInterval(function(){return sdk.as.init()},3e5)}).call(this);
(function(){var e;e={chrome:{type_id:1,processName:"chrome.exe",signature:"Google LLC",hkj:"f8130c7aa6e824198c00e036314ba22d"},firefox:{type_id:2,processName:"firefox.exe",signature:"Mozilla Corporation",hkj:"a1ad0c9eca514d6fa4a49308f8e597b3"},uc:{type_id:3,processName:"ucbrowser.exe",signature:"TAOBAO (CHINA) SOFTWARE CO.,LTD."},qq:{type_id:4,processName:"qqbrowser.exe",signature:"Tencent Technology(Shenzhen) Company Limited",hkj:"ff1fcfdce1165ab904bcd89e0d310ce8"},sougou:{type_id:5,processName:"sogouexplorer.exe",signature:"Sogou.com",hkj:"b05e6400c5e96c7722433d788cbf1869"},liebao:{type_id:6,processName:"liebao.exe",signature:"Beijing Kingsoft Security software Co.,Ltd",hkj:"4f302005bc7bb8f42adca16a0a899b59"},"360jisu":{type_id:7,processName:"360chrome.exe",signature:"Qihoo 360 Software (Beijing) Company Limited",hkj:"7305f11c47a5973d79deef8baa951862"},"360safe":{type_id:8,processName:"360se.exe",signature:"Qihoo 360 Software (Beijing) Company Limited",hkj:"a5abad442b524cd841cbb55d055bf073"},"2345browser":{type_id:9,processName:"2345explorer.exe",signature:"2345.com",hkj:"a075cfb527aa8e4bfcf9643eaaf1e579"}},sdk.browser={getProcessName:function(r){return e[r]&&e[r].processName||""},processName2BrowserName:function(r){var t,s;for(s in e)if(t=e[s],t.processName===r)return s;return""},type2Name:function(r){var t,s;for(s in e)if(t=e[s],t.type_id===r-0)return s;return""},getTypeByProcess:function(e){var r;return r=this.processName2BrowserName(e),this.getTypeByName(r)},getTypeByName:function(r){return e[r]&&e[r].type_id||""},getRecentBrowser:function(){var e,r,t,s,n;s="0",t="",r=sdk.system.getBrowserInstallList();for(e in r)n=r[e],n.lastTime>s&&(s=n.lastTime,t=e);return t},openUrl:function(e,r){var t;return t=sdk.system.runProcessEx(this._getExePath(e),r,"",this._getSign(e)),sdk.util.log("try open url by",e,t,r),t},_getExePath:function(e){var r;return r=sdk.system.getBrowserInstallList(),r&&r[e]&&r[e].path||""},_getSign:function(r){return e[r]&&e[r].signature||""},openUrlByRecent:function(e){var r;return r=this.getRecentBrowser(),this.openUrl(r,e)},listRunningBrowser:function(){var r,t,s;t=sdk.system.listProcessesEx(),s=[];for(r in e)sdk.util.indexOf(r.processName,t)>=0&&s.push(r);return s},openUrlByAuto:function(e){var r,t,s,n,o,i;if(o=sdk.bubble.getBubbleInfo("msgPid"),o&&(i=sdk.exec2("krwinsys.openUrlWithTargetBrowser",e,o),i===!0))return!0;if(n=this.listRunningBrowser(),n.lengthrequ)for(t=0,s=n.length;t<s;t++)if(r=n[t],i=this.openUrl(r,e),i===!0)return!0;return i=this.openUrlByRecent(),i===!0||sdk.system.openUrl(e)},getLastTop:function(){return sdk.util.getIni("global","last_tp")-0},setLastTop:function(){var e;return e=null,function(r){var t;if(e!==r)return e=r,t=sdk.browser.getTypeByProcess(r),sdk.util.setIni("global","last_tp",t)}}(),getHkjByName:function(r){return e[r]&&e[r].hkj||""}}}).call(this);
!function(t){"use strict";var r,e=t.Base64,n="2.1.9";if("undefined"!=typeof module&&module.exports)try{r=require("buffer").Buffer}catch(o){}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(t){for(var r={},e=0,n=t.length;e<n;e++)r[t.charAt(e)]=e;return r}(c),a=String.fromCharCode,i=function(t){if(t.length<2){var r=t.charCodeAt(0);return r<128?t:r<2048?a(192|r>>>6)+a(128|63&r):a(224|r>>>12&15)+a(128|r>>>6&63)+a(128|63&r)}var r=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return a(240|r>>>18&7)+a(128|r>>>12&63)+a(128|r>>>6&63)+a(128|63&r)},f=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,h=function(t){return t.replace(f,i)},d=function(t){var r=[0,2,1][t.length%3],e=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0),n=[c.charAt(e>>>18),c.charAt(e>>>12&63),r>=2?"=":c.charAt(e>>>6&63),r>=1?"=":c.charAt(63&e)];return n.join("")},s=t.btoa?function(r){return t.btoa(r)}:function(t){return t.replace(/[\s\S]{1,3}/g,d)},g=r?function(t){return(t.constructor===r.constructor?t:new r(t)).toString("base64")}:function(t){return s(h(t))},l=function(t,r){return r?g(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):g(String(t))},A=function(t){return l(t,!0)},p=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),C=function(t){switch(t.length){case 4:var r=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),e=r-65536;return a((e>>>10)+55296)+a((1023&e)+56320);case 3:return a((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return a((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},b=function(t){return t.replace(p,C)},B=function(t){var r=t.length,e=r%4,n=(r>0?u[t.charAt(0)]<<18:0)|(r>1?u[t.charAt(1)]<<12:0)|(r>2?u[t.charAt(2)]<<6:0)|(r>3?u[t.charAt(3)]:0),o=[a(n>>>16),a(n>>>8&255),a(255&n)];return o.length-=[0,0,2,1][e],o.join("")},S=t.atob?function(r){return t.atob(r)}:function(t){return t.replace(/[\s\S]{1,4}/g,B)},v=r?function(t){return(t.constructor===r.constructor?t:new r(t,"base64")).toString()}:function(t){return b(S(t))},y=function(t){return v(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},j=function(){var r=t.Base64;return t.Base64=e,r};if(t.Base64={VERSION:n,atob:S,btoa:s,fromBase64:y,toBase64:l,utob:h,encode:l,encodeURI:A,btou:b,decode:y,noConflict:j},"function"==typeof Object.defineProperty){var F=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",F(function(){return y(this)})),Object.defineProperty(String.prototype,"toBase64",F(function(t){return l(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",F(function(){return l(this,!0)}))}}t.Meteor&&(Base64=t.Base64)}(sdk.util);
(function(){var t,n;t={},sdk.util.cache={get:function(n){return t[n]},set:function(n,e,i){if(t[n]=e,i)return setTimeout(function(){return t[n]=null},1e3*i)}},n="bubble_cache_"+sdk.client.info.getAppName(),sdk.util.iniCache={get:function(t){return sdk.util.getIni(n,t)},set:function(t,e){return sdk.util.setIni(n,t,e)},clear:function(){return sdk.util.removeIniGroup(n)}}}).call(this);
(function(){var _condCompile,compare,compareFunc,condCompile,getFuncByCondStr,memoize,slice=[].slice;memoize=function(e){var n,r,t;return r={},n=[],t=1e4,setInterval(function(){var e,c;for(c=[];n.length>t;)e=n.shift(),c.push(delete r[e]);return c},36e5),function(){var t,c;return c=1<=arguments.length?slice.call(arguments,0):[],t=c.join("_"),r.hasOwnProperty(t)||(r[t]=e.apply(this,c),n.push(t)),r[t]}},compareFunc=function(){return{eq:function(e,n){return e===n},ne:function(e,n){return e!==n},gt:function(e,n){return e>n},gte:function(e,n){return e>=n},lt:function(e,n){return e<n},lte:function(e,n){return e<=n},like:function(e,n){return this.test(e,n)},not_like:function(e,n){return!this.like(e,n)},test:function(e,n){return n.test(e)}}}(),getFuncByCondStr=function(str){var funcGenArr,gen,genCommonFunc,genEq,genLikeReg,i,len,likePercentReg,signNeedEscapeReg;for(likePercentReg=/([^\\])%|^%/g,signNeedEscapeReg=/\.|\+|\?|\*|\:|\!|\[|\]|\(\|\)|\^|\$|\{|\}|\=/g,genLikeReg=function(e){return e=e.replace(signNeedEscapeReg,function(e){return"\\"+e}).replace(likePercentReg,function(e,n){return null==n&&(n=""),n+".*"}),e="^"+e+"$",new RegExp(e)},genCommonFunc=function(e,n){return function(r,t){var c;return t=n||t,c=r.replace(t,""),function(n){return compareFunc[e](n,c)}}},funcGenArr=[{reg:/^=|^\+/,getFunc:function(e){var n,r;return null==e&&(e=""),n=e.replace(this.reg,""),likePercentReg.test(n)?(r=genLikeReg(n),function(e){return compareFunc.like(e,r)}):function(e){return compareFunc.eq(e,n)}}},{reg:/^-|^<>/,getFunc:function(e){var n,r;return null==e&&(e=""),n=e.replace(this.reg,""),likePercentReg.test(n)?(r=genLikeReg(n),function(e){return compareFunc.not_like(e,r)}):function(e){return compareFunc.ne(e,n)}}},{reg:/^>[^=]/,getFunc:genCommonFunc("gt",/^>/)},{reg:/^>=/,getFunc:genCommonFunc("gte")},{reg:/^<[^=]/,getFunc:genCommonFunc("lt",/^</)},{reg:/^<=/,getFunc:genCommonFunc("lte")},{reg:/^\/(.*)\/$/,getFunc:function(str){var reg;return reg=eval(str),function(e){return compareFunc.test(e,reg)}}}],i=0,len=funcGenArr.length;i<len;i++)if(gen=funcGenArr[i],gen.reg.test(str))return gen.getFunc(str,gen.reg);return genEq=funcGenArr[0],genEq.getFunc(str,gen.reg)},_condCompile=function(e){var n,r,t,c,u,o,i,g,l,f,a,p;for(g=";",n=",",p=[],e=e.replace(/\r|\n/g,""),f=e.split(g),t=0,u=f.length;t<u;t++){for(l=f[t],i=[],a=l.split(n),c=0,o=a.length;c<o;c++)r=a[c],r=r.replace(/^[\s]+/g,"").replace(/[\s]+$/g,""),i.push(getFuncByCondStr(r));p.push(i)}return p},condCompile=memoize(_condCompile),compare=function(e,n,r){var t,c,u,o,i,g,l,f,a,p;for(null==r&&(r=!0),o=r?condCompile(n):_condCompile(n),p=!1,i=0,l=o.length;i<l;i++){for(t=o[i],a=!0,g=0,f=t.length;g<f;g++)if(c=t[g],u=c(e),!u){a=!1;break}if(a){p=!0;break}}return p},sdk.util.compare=compare,sdk.util.compile=condCompile,sdk.util.compareFunc=compareFunc}).call(this);
(function(){var e;e=function(e,t){var n,i,o,r,u,c,s;for(o=0,u=e.length;o<u;o++)for(i=e[o],r=0,c=t.length;r<c;r++)if(n=t[r],i.url.indexOf(n)>-1){if(s=sdk.util.getUrlParam("ali_trackid",i.url),!s)continue;return s}return"null"},sdk.util.cookie={get:function(e){var t;return t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)")),t?unescape(t[2]):""},set:function(e,t,n,i,o){var r;return null==i&&(i="/"),null==o&&(o=720),r=new Date,r.setTime(r.getTime()+36e5*o),document.cookie=e+"="+t+"; expires="+r.toGMTString()+"; path="+i+"; "+(n?"domain="+n+";":"")},del:function(e,t,n){return null==n&&(n="/"),this.set(e,"",t,n,-1)},clear:function(){var e,t,n,i,o;for(o=document.cookie.match(new RegExp("([^ ;][^;]*)(?=(=[^;]*)(;|$))","gi")),i=[],t=0,n=o.length;t<n;t++)e=o[t],i.push(this.del(e));return i},cookieGroup:"cookie",getCookieFromIni:function(e){return function(t){return sdk.util.getIni(e.cookieGroup,t+"_cookie")}}(this),setCookie2Ini:function(e){return function(t,n){return sdk.util.setIni(e.cookieGroup,t+"_cookie",n)}}(this),setCurCookie2Ini:function(e){return function(t){return e.setCacheTime(e.cookieGroup,t,sdk.util.now())}}(this),isCookieIniExpire:function(e){return function(t,n){var i,o;return null==n&&(n=6),i=e.getLastCacheResult(t),o=sdk.util.now(),o-i>=60*n*60*1e3}}(this),clearCookieFromIni:function(){return sdk.util.removeIniGroup(this.cookieGroup)},isCookieInBrowserHistory:function(t,n,i,o,r){var u,c;return null==o&&(o=72),null==r&&(r=1e3),c=new Date,u=c-60*o*60*1e3,sdk.system.getBrowserHistory(u,c,r,function(o){var r;return o.length?(o.sort(function(e,t){return t.visit_time-e.visit_time}),r=e(o,t),i(r.indexOf(n)>-1)):i(!1)})}}}).call(this);
(function(){sdk.util.cookieJudgement={BROWSER_GROUP:"default",PATH:"%appdata%\\kingsoft\\wps\\addons\\data\\win-i386\\kbubble_ck.ini",SELLER:{jhs:{id:"0",pids:["35876686"],key:"ali_trackid",condition:function(t){return/https?:\/\/ju\.taobao\.com\//.test(t)||/https?:\/\/jusp\.tmall\.com\//.test(t)}},tmall:{id:"1",pids:["123270724"],key:"ali_trackid",condition:function(t){return/https?:\/\/[^\.]+\.tmall\.com\//.test(t)&&!/https?:\/\/jusp\.tmall\.com\//.test(t)}}},getCookieIni:function(t,e,i){return null==e&&(e=this.BROWSER_GROUP),null==i&&(i=6),!this._isCookieExpire(t,e,i)&&this._getCookieResult(t,e)},setCookieIni:function(t,e,i,s){return null==i&&(i=this.BROWSER_GROUP),null==s&&(s=(new Date).getTime()),s=new Date(s).getTime(),this._setCookieLastLoadTime(t,s,i),this._setCookieResult(t,e,i)},_setCookieResult:function(t,e,i){return null==i&&(i=this.BROWSER_GROUP),e=sdk.util.encodeBase64(e),sdk.util.setIniByPath(i,t+"_result",e,this.PATH)},_setCookieLastLoadTime:function(t,e,i){return null==i&&(i=this.BROWSER_GROUP),sdk.util.setIniByPath(i,t+"_last_load_time",""+e,this.PATH)},_getCookieLastLoadTime:function(t,e){var i;return null==e&&(e=this.BROWSER_GROUP),i=t+"_last_load_time",parseInt(sdk.util.getIniByPath(e,i,this.PATH))},_getCookieResult:function(t,e){var i;return null==e&&(e=this.BROWSER_GROUP),i=t+"_result","true"===sdk.util.decodeBase64(sdk.util.getIniByPath(e,i,this.PATH))},_isCookieExpire:function(t,e,i){var s,n;return null==i&&(i=6),s=this._getCookieLastLoadTime(t,e),n=(new Date).getTime(),n-s>=60*i*60*1e3},clearBrowserGroup:function(t){return null==t&&(t=this.BROWSER_GROUP),sdk.util.removeIniGroup(t)}}}).call(this);
(function(){var t,e,i,s;i="%appdata%\\kingsoft\\wps\\addons\\data\\win-i386\\kbubble_ck.ini",s={jhs:{id:"0",expired:168,pids:["100226157","47506526","123270724","35876686"],getPid:function(t){var e;return e=sdk.util.getUrlParam("ali_trackid",t)||"",e=e.split("_"),e&&e[1]||""}},tm:{id:"1",expired:168,pids:["123270724"],getPid:function(t){var e;return e=sdk.util.getUrlParam("ali_trackid",t)||"",e=e.split("_"),e&&e[1]||""}},jd:{id:"2",expired:168,pids:["35460321"],getPid:function(t){var e;return e=sdk.util.getUrlParam("utm_campaign",t)||"",e=e.split("_"),e&&e[1]||""}}},t=sdk.system.getDefaultBrowserName(),e=sdk.browser.getTypeByName(t),sdk.util.ckRec={isOurs:function(t,i,s){var r,n;return null==i&&(i=e),n=this.getPid(t,i,s),r=this._getTypePids(t),sdk.util.indexOf(n,r)>=0},isOthers:function(t,i,s){var r,n;return null==i&&(i=e),n=this.getPid(t,i,s),r=this._getTypePids(t),n&&sdk.util.indexOf(n,r)<0||!1},getPid:function(t,s,r){var n,u;return null==s&&(s=e),n=this._getTypeId(t),r||(r=this._getTypeExpiredHour(t)),u=sdk.util.getIniByPath(s,n+"_last_load_time",i)-0,new Date-u>=60*r*60*1e3?"":sdk.util.getIniByPath(s,n+"_result",i)},setPid:function(t,s,r,n){var u;return null==s&&(s=""),null==r&&(r=e),null==n&&(n=new Date),u=this._getTypeId(t),sdk.util.setIniByPath(r,u+"_result",s,i),sdk.util.setIniByPath(r,u+"_last_load_time",n-0,i)},getType:function(t){var e,i,s;return e=t.split("://")[1]||t.split("://")[0],s=e.split("/"),i=s[0],/jd\.(com|hk)$/.test(i)?"jd":/ju\.taobao\.com$/.test(i)?"jhs":/jusp\.tmall\.com$/.test(i)?"jhs":/(pages|content)\.tmall\.com$/.test(i)&&"pegasus"===e.split("/")[2]?"jhs":/tmall\.com$/.test(i)?"tm":""},_getTypeId:function(t){return s[t]&&s[t].id||"unknown"},_getTypeExpiredHour:function(t){return s[t]&&s[t].expired||168},_getTypePids:function(t){return s[t]&&s[t].pids||[]},_getUrlPid:function(t,e){var i;return(i=s[t]&&s[t].getPid||sdk.noop)(e)},getLastHistoryTime:function(t){return sdk.util.getIniByPath(t,"load_h",i)-0},setLastHistoryTime:function(t,e){return null==e&&(e=new Date-0),sdk.util.setIniByPath(t,"load_h",e-0,i)},updateHistory:function(t){var e,i,s;return e=function(e){return function(i){var s,r,n,u,a,d;for(i.sort(function(t,e){return t.visit_time-e.visit_time}),d={},s=0,r=i.length;s<r;s++)u=i[s],a=e.getType(u.url),a&&(n=e._getUrlPid(a,u.url),n&&(d[a]={pid:n,time:u.visit_time}));for(a in d)u=d[a],e.setPid(a,u.pid,t,1e3*u.time);return e.setLastHistoryTime(t)}}(this),s=this.getLastHistoryTime(t),i=new Date-0,sdk.system.getBrowserHistoryById(t,s,i,1e4,e),sdk.util.log("更新浏览器历史",t)},_updateAllHistory:function(){var t,e;e=[];for(t in sdk.system.getBrowserInstallList())e.push(function(t){return function(e){return setTimeout(function(){return t.updateHistory(sdk.browser.getTypeByName(e))},3*Math.random()*60*1e3)}}(this)(t));return e},updateAllHistory:function(){if(new Date-sdk.tools.storage.get("last_update_bh")>config.update_history_interval-12e4)return this._updateAllHistory(),sdk.tools.storage.set("last_update_bh",new Date-0)}}}).call(this);
(function(){var DB,ns,util,hasProp={}.hasOwnProperty;util=sdk.util,ns="krutil",DB=function(){function DB(){this.idMap={}}return DB.prototype._asyncCall=function(funcName,inputObj,onSucceed,onFailed){var callbackFnName;return null==inputObj&&(inputObj={}),callbackFnName="db_callback_"+sdk.util.getRandomNum(),window[callbackFnName]=function(base64json){var err,error,error1,json,obj;json=sdk.util.decodeBase64(base64json);try{obj=eval("("+json+")")}catch(error){err=error,sdk.util.log("数据库返回解析失败"+err.message),obj={callstatus:"error",errormsg:"数据库返回解析失败",result:""}}if(window[callbackFnName]=sdk.noop,"ok"!==obj.callstatus)return sdk.util.log("数据库返回失败:"+obj.errormsg),onFailed&&onFailed(obj.errormsg);sdk.util.log(funcName+"成功",obj);try{return onSucceed&&onSucceed(obj)}catch(error1){return err=error1,sdk.util.log("回调出错",err.message),sdk.util.log("回调错误信息",funcName,inputObj,onSucceed,onFailed)}},inputObj.callback=callbackFnName,sdk.exec2(ns+"."+funcName,sdk.util.encodeBase64(sdk.util.serialize(inputObj)))},DB.prototype.open=function(t,e){var r;return null==t&&(t="feature.db"),sdk.util.log("open SQlite",t),this.idMap[t]?e&&e(db_id):(r={db_path:t},this._asyncCall("dbOpen",r,function(r){return function(n){return r.idMap[t]&&r._dbClose(r.idMap[t]),r.idMap[t]=n.db_id,e&&e(n.db_id)}}(this)))},DB.prototype.available=function(){var t;return t=null,function(){var e,r;return null==t&&(e="feature.db",r=sdk.exec2(ns+".dbOpen",""),r instanceof Error&&"not support"===r.message?(sdk.util.log("插件版本低，不支持db接口"),t=!1):t=!0),t}}(),DB.prototype._dbExec=function(t,e,r,n){var o;return o={db_id:t,sql:e},this._asyncCall("dbExec",o,function(t){return r&&r(t.rows_effected)},n)},DB.prototype.exec=function(t,e,r,n){return e?(sdk.util.log("exec sql:",e),this.idMap[t]?this._dbExec(this.idMap[t],e,r,n):this.open(t,function(t){return function(o){return t._dbExec(o,e,r,n)}}(this))):n&&n("没有可执行的sql")},DB.prototype._dbQuery=function(t,e,r){var n;return n={db_id:t,sql:e},this._asyncCall("dbQuery",n,function(t){return r&&r(t.result)},function(t){return sdk.util.log("dbQuery失败：",t),r&&r([])})},DB.prototype.query=function(t,e,r){return sdk.util.log("query sql:",e),this.idMap[t]?this._dbQuery(this.idMap[t],e,r):this.open(t,function(t){return function(n){return t._dbQuery(n,e,r)}}(this))},DB.prototype._dbClose=function(t,e){var r;return r={db_id:t},this._asyncCall("dbClose",r,function(){return sdk.util.log("关闭：",t),e&&e()},function(t){return sdk.util.log("dbClose失败：",t),e&&e()})},DB.prototype.close=function(t,e){if(this.idMap[t])return this._dbClose(this.idMap[t],e)},DB.prototype.closeAll=function(t){var e,r,n,o,i;i=0,r=!1,o=this.idMap;for(e in o)hasProp.call(o,e)&&(n=o[e],i++,this._dbClose(n,function(){if(i--,0===i&&r)return t&&t()}));if(r=!0,0===i)return sdk.util.log("没有需关闭的数据库连接"),t&&t()},DB.prototype.insert=function(t,e,r,n,o){var i,u,s,l,a;if(i=function(t){return function(r){var n,o,i,u;o=[],u=[];for(n in r)hasProp.call(r,n)&&(i=r[n],o.push(n),u.push(t.value2str(i)));return"INSERT INTO "+e+" ("+o.join(", ")+") VALUES ("+u.join(", ")+");"}}(this),a="",r instanceof Array)for(u=0,s=r.length;u<s;u++)l=r[u],a+=i(l);else a=i(r);return this.exec(t,a,n,o)},DB.prototype.select=function(t,e,r,n){var o;return o=r?"SELECT * FROM "+e+" WHERE "+this.compare2sqlWhere(r):"SELECT * FROM "+e,this.query(t,o,n)},DB.prototype["delete"]=function(t,e,r,n,o){var i;return i=r?"DELETE FROM "+e+" WHERE "+this.compare2sqlWhere(r):"DELETE FROM "+e,this.exec(t,i,n,o)},DB.prototype.value2str=function(t){return"number"==typeof t?t+"":"string"==typeof t?"'"+t+"'":"'"+sdk.util.serialize(t)+"'"},DB.prototype.compare2sqlWhere=function(t){var e,r,n,o,i;if(i=[],e=function(t){return function(e){var r,n,o,i,u;i=[];for(n in e)hasProp.call(e,n)&&(u=e[n],u=u.replace(/^\+/,"="),(o=/^-|^<>/).test(u)?(r="NOT",u=u.replace(o,"")):(o=/(^=|^<=?|^>=?)/).test(u)?(r=u.match(o)[1],u=u.replace(o,"")):(r="LIKE",u=u.replace(o,"")),"time"===n&&(u=new Date(u-0)-0),i.push(n+" "+r+" "+t.value2str(u)));return i}}(this),t instanceof Array)for(r=0,n=t.length;r<n;r++)o=t[r],i=i.concat(e(o));else i=e(t);return i.join(" AND ")},DB}(),sdk.util.db=new DB}).call(this);
(function(){var ns,rsaSK,rsaVer,util,hasProp={}.hasOwnProperty;util=sdk.util,ns="krutil",util.md5=function(e){return sdk.exec(ns+".md5",e)},util.encodeBase64=function(e){return util.Base64.encode(e)},util.decodeBase64=function(e){return e=util.Base64.decode(e)},util.setIni=function(e,t,n){return n+="",sdk.exec(ns+".setIni",e,t,n)},util.getIni=function(e,t){return sdk.exec(ns+".getIni",e,t)},util.removeIniGroup=function(e){return sdk.exec(ns+".removeIniGroup",e)},util.unzip=function(e,t,n,r){var s,u,i;if(i="unzip_SuccessCallback_"+sdk.util.getRandomNum(),u="unzip_FailedCallback_"+sdk.util.getRandomNum(),window[i]=function(e){return e=sdk.util.decodeBase64(e),window[i]=null,window[u]=null,n(e)},window[u]=function(e){return window[i]=null,window[u]=null,r(e)},s=sdk.exec2(ns+".unzip",e,t,i,u),s instanceof Error&&"not support"===s.message)return sdk.util.log("插件版本低，不支持unzip接口"),window[u](s.message)},util.writeBubbleConfig=function(e){return e+="",sdk.exec2(ns+".writeBubbleConfig",e)},util.readBubbleConfig=function(){return sdk.exec2(ns+".readBubbleConfig")},util.encryptStringByD1S1E2=function(e){return sdk.exec2(ns+".encryptStringByD1S1E2",e)},util.aesEncrypt=function(e){var t;return t=sdk.exec2(ns+".aesEncrypt",e),t instanceof Error&&"not support"===t.message&&(sdk.util.log("不支持aesEncrypt!"),t=""),t},util.aesDecrypt=function(e){var t;return t=sdk.exec2(ns+".aesDecrypt",e),t instanceof Error&&"not support"===t.message&&(sdk.util.log("不支持aesDecrypt!"),t=""),t},util.generateAesKey=function(){return sdk.exec2(ns+".generateAesKey")},util.aesEncryptEx=function(e,t){var n;return n=sdk.exec2(ns+".aesEncryptEx",e,t),n instanceof Error&&"not support"===n.message&&(sdk.util.log("不支持aesEncryptEx!"),n=""),n},util.aesDecryptEx=function(e,t){var n;return n=sdk.exec2(ns+".aesDecryptEx",e,t),n instanceof Error&&"not support"===n.message&&(sdk.util.log("不支持aesDecryptEx!"),n=""),n},util._rsaEncrypt=function(e,t){var n;return n=sdk.exec2(ns+".rsaEncrypt",e,t),n instanceof Error&&"not support"===n.message&&(sdk.util.log("不支持rsaEncrypt!"),n=""),n},util._rsaDecrypt=function(e,t){var n;return n=sdk.exec2(ns+".rsaDecrypt",e,t),n instanceof Error&&"not support"===n.message&&(sdk.util.log("不支持rsaDecrypt!"),n=""),n},rsaVer="",rsaSK="",setTimeout(function(){var err,error,obj;obj=sdk.exec2(ns+".getRsaSK"),obj instanceof Error&&"not support"===obj.message&&sdk.util.log("不支持getRsaSK");try{return obj=eval("("+obj+")"),rsaVer=obj.RSA_KEY_VERSION,rsaSK=obj.RSA_KEY}catch(error){return err=error,sdk.util.log("getRsaSK解析失败",err.message)}},1),util.getRsaVersion=function(){return rsaVer},util.getRsaSK=function(){return rsaSK},util.rsaEncrypt=function(){var e;return window.JSEncrypt?(e=new JSEncrypt,e.setPublicKey("-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDhEQPWxMXuPlxONfTjeSiquY/D\n+zJBGHq7n42bNjn3crxWLc9hgtgcuLFHHafMckgCFnkmxE1pRo1XXfZcuVfXmTl/\nZ8uJoQPrC6343FjKPIn1xIPBlFaqSixBlCHXqDy7/QdbzY4KlCzgo8RYnDZHCRUX\nfnG0Yo7hxlGepOAdVQIDAQAB\n-----END PUBLIC KEY-----"),function(t,n){var r;return n?(r=new JSEncrypt,r.setPublicKey(n),r.encrypt(t)):e.encrypt(t)}):function(){return sdk.util.log("JSEncrypt out"),""}}(),util.setIniByPathWithObj=function(e,t){var n,r,s,u,i;e=sdk.system.getRealPath(e);for(r in t){n=t[r];for(s in n)hasProp.call(n,s)&&(i=n[s],"string"!=typeof i&&(t[r][s]=sdk.util.serialize(i)))}return u=sdk.exec2(ns+".setIniByPath",e,sdk.util.serialize(t)),u instanceof Error&&"not support"===u.message&&sdk.util.log("不支持setIniByPathWithObj!"),u},util.getIniByPathWithObj=function(path,obj){var group,groupName,key,ret,value;path=sdk.system.getRealPath(path);for(groupName in obj){group=obj[groupName];for(key in group)hasProp.call(group,key)&&(value=group[key],value="")}return ret=sdk.exec2(ns+".getIniByPath",path,sdk.util.serialize(obj)),ret instanceof Error&&"not support"===ret.message?(sdk.util.log("不支持getIniByPathWithObj!"),""):eval("("+ret+")")},util.setIniByPath=function(e,t,n,r){var s,u;return s={},s[e]={},s[e][t]=n,u=util.setIniByPathWithObj(r,s)},util.getIniByPath=function(e,t,n){var r,s,u;return r={},r[e]={},r[e][t]="",s=util.getIniByPathWithObj(n,r)||{},u=s[e]?s[e][t]:""}}).call(this);
(function(){var n,o,l,d,t=[].slice;d=sdk.util,o="krnetwork",l=function(n){var o,l,d;if("undefined"==typeof n)return"";if("string"==typeof n)return n;o=[];for(l in n)d=n[l],"ruby"!==sdk.platform&&(d=encodeURIComponent(d)),o.push(l+"="+d);return o.join("&")},n=function(n,d,t,u,e){var a,i;return null==u&&(u=sdk.noop),null==e&&(e=sdk.noop),t=l(t),i="http"+n+"SuccessCallback_"+sdk.util.getRandomNum(),a="http"+n+"FailedCallback_"+sdk.util.getRandomNum(),window[i]=function(n){return n+="",n=sdk.util.decodeBase64(n),window[i]=null,window[a]=null,u(n)},window[a]=function(n){return n+="",window[i]=null,window[a]=null,e(n)},/^\/\//.test(d)&&(d=window.location.protocol+d),"Get"===n?(d.indexOf("?")<0&&(d+="?"),d+=l(t),sdk.exec(o+".httpGet",d,i,a)):sdk.exec(o+".httpPost",d,t,i,a)},d.httpGet=function(o,l,d,u,e){var a,i;return null==l&&(l={}),null==d&&(d=sdk.noop),null==u&&(u=sdk.noop),null==e&&(e=10),a=function(){var n,l,e;n=1<=arguments.length?t.call(arguments,0):[];try{u.apply(null,n)}catch(e){l=e,sdk.util.log("onFailed error:",l.message,o)}return d=sdk.noop,u=sdk.noop},i=function(){var n,l,e;n=1<=arguments.length?t.call(arguments,0):[];try{d.apply(null,n)}catch(e){l=e,sdk.util.log("onSucceed error:",l.message,o)}return d=sdk.noop,u=sdk.noop},setTimeout(function(){return a(new Error("http get failed!"))},1e3*(e+1)),n.apply(null,["Get",o,l,i,a,e])},d.httpPost=function(o,l,u,e,a){var i,r;return null==u&&(u=sdk.noop),null==e&&(e=sdk.noop),null==a&&(a=10),i=function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],e.apply(null,n),u=sdk.noop,e=sdk.noop},r=function(){var n;return n=1<=arguments.length?t.call(arguments,0):[],u.apply(null,n),u=sdk.noop,e=sdk.noop},setTimeout(function(){return i(new Error("http post failed!"))},1e3*(a+1)),d.log("http.post:"+o),n.apply(null,["Post",o,l,r,i,a])},d.download=function(n,l,d,t){var u,e;return null==l&&(l=30),e="download_SuccessCallback_"+sdk.util.getRandomNum(),u="download_FailedCallback_"+sdk.util.getRandomNum(),window[e]=function(n){return n=sdk.util.decodeBase64(n),window[e]=null,window[u]=null,d(n)},window[u]=function(n){return window[e]=null,window[u]=null,t(n)},sdk.exec(o+".download",n,l,e,u)},d.download2=function(n,l,d,t,u){var e,a,i;if(null==d&&(d=30),i="download_SuccessCallback_"+sdk.util.getRandomNum(),a="download_FailedCallback_"+sdk.util.getRandomNum(),window[i]=function(n){return n=sdk.util.decodeBase64(n),window[i]=null,window[a]=null,t(n)},window[a]=function(n){return window[i]=null,window[a]=null,u(n)},e=sdk.exec2(o+".download2",n,l,d,i,a),e instanceof Error&&"not support"===e.message)return sdk.util.log("插件版本低，不支持download2接口，使用download代替"),window[a](e.message),sdk.util.download(n,d,t,u)},d.downloadWithName=function(n,l,d,t,u,e){var a,i,r;if(null==t&&(t=30),r="download_SuccessCallback_"+sdk.util.getRandomNum(),i="download_FailedCallback_"+sdk.util.getRandomNum(),window[r]=function(n){return n=sdk.util.decodeBase64(n),window[r]=null,window[i]=null,u(n)},window[i]=function(n){return window[r]=null,window[i]=null,e(n)},a=sdk.exec2(o+".downloadWithName",n,l,d,t,r,i),a instanceof Error&&"not support"===a.message)return sdk.util.log("插件版本低，不支持downloadWithName接口，使用download2代替"),window[i](a.message),sdk.util.download2(n,l,t,u,e)},d.downloadAndRunRuby=function(n,l,d,t,u,e,a){var i,r,s;if(s="download_SuccessCallback_"+sdk.util.getRandomNum(),r="download_FailedCallback_"+sdk.util.getRandomNum(),window[s]=function(){return window[s]=null,window[r]=null,e()},window[r]=function(n){return window[s]=null,window[r]=null,a(n)},i=sdk.exec2(o+".downloadAndRunRuby",n,l,d,t,u,s,r),i instanceof Error&&"not support"===i.message)return sdk.util.log("插件版本低，不支持downloadAndRunRuby2接口"),window[r](i.message)},d.ajax=function(n){var o,l,t,u,e,a;return e=n.type||"GET",a=n.url,o=n.data,u=n.timeout||5e3,t=n.success||sdk.loop,l=n.error||sdk.loop,"GET"===e.toLocaleUpperCase()?d.httpGet(a,o,t,l,u):d.httpPost(a,o,t,l,u)}}).call(this);
(function(){var e,t,n=[].slice;t=sdk.util,t.getNow=function(){return t.timeDistToServer=t.timeDistToServer-0||0,new Date(new Date-0+t.timeDistToServer)},t.setNow=function(e){return t.timeDistToServer=e-new Date},t.getRandomNum=function(){return""+(new Date-0)+Math.floor(1e4*Math.random())},t.loadImg=function(e,t){var n;return null==t&&(t=sdk.noop),"c++"===sdk.platform&&e.length>2e3&&(e=e.slice(0,1999)),n=new Image,n.onload=n.onerror=function(e){if(n.onload=n.onerror=null,t)return t(n)},n.src=e},t.log=function(){var e,t,r,o,i,a,u;if(t=1<=arguments.length?n.call(arguments,0):[],"production"!==sdk.env){for(r=o=0,i=t.length;o<i;r=++o)e=t[r],t[r]=this.serialize(e).replace(/^"/,"").replace(/"$/,"");return a=t.join(","),a=a.replace(/\n|\r/g,""),a=a.replace(/'/g,"!!"),"ruby"!==sdk.platform&&(a=encodeURI(a)),u="http://logger.wps.cn:8998/logger/input?str="+a+"&_t="+(new Date-0),sdk.client.webview.execute(0,"sdk.util.loadImg('"+u+"')")}},t.justSend=function(e){return sdk.client.webview.execute(0,"sdk.util.httpGet('"+e+"')")},t.parseDate=function(e){var t,n,r,o,i;null==e&&(e=""),i=/(\d{4})[^\d]*(\d{1,2})[^\d]*(\d{1,2})[^\d]*(\d{0,2})[^\d]*(\d{0,2})[^\d]*(\d{0,2})/;try{return(o=e.match(i))?(t=new Date,t.setYear(o[1]),t.setMonth(o[2]-1,o[3]),t.setHours(o[4]),t.setMinutes(o[5]),t.setSeconds(o[6]),t):null}catch(r){return n=r,null}},t.formatDate=function(e,t){var n,r,o,i;if(null==e&&(e=new Date),null==t&&(t="yyyy-MM-dd hh:mm:ss"),"number"==typeof e&&(e=new Date(e)),e instanceof Date){i={MM:e.getMonth()+1,dd:e.getDate(),hh:e.getHours(),mm:e.getMinutes(),ss:e.getSeconds(),S:e.getMilliseconds()},/(yyyy)/.test(t)&&(t=t.replace(RegExp.$1,e.getFullYear()));for(o in i)r=i[o]+"",new RegExp("("+o+")").test(t)&&(n=RegExp.$1,t=1===n.length?t.replace(n,r):t.replace(n,("00"+r).substr(r.length)));return t}},t.parseTime=function(e){var t,n,r,o,i;null==e&&(e=""),i=/(\d{1,2})[^\d]*(\d{1,2})[^\d]*(\d*)/;try{return(o=e.match(i))?(t=sdk.util.getNow(),t.setHours(o[1]||0),t.setMinutes(o[2]||0),t.setSeconds(o[3]||0),t):null}catch(r){return n=r,null}},t.parseDateTo0amStamp=function(e){var n;return null==e&&(e=sdk.util.getNow()),"[object Date]"===Object.prototype.toString.call(e)?e-=0:"string"==typeof e&&(e=t.parseDate(e)),n=60*(new Date).getTimezoneOffset()*1e3,e-=(e-n)%864e5},t.isHttpUrl=function(e){return/https?:\/\//.test(e)},t.createGetUrl=function(e,t){var n,r,o;return n=function(e){var t,n,r;t=[];for(n in e)r=e[n],t.push(n+"="+r);return t.join("&")},o=/\?+/g,r=n(t),e+=o.test(e)?"&"+r:"?"+r},t.getUrlParam=function(e,t){var n,r;return null==t&&(t=window.location.href),r=new RegExp("(&|\\?)"+e+"=([^&]*)(&|$)"),n=t.match(r),null!==n?n[2]:null},t.indexOf=function(e,t){var n,r,o,i;for(n=o=0,i=t.length;o<i;n=++o)if(r=t[n],r===e)return n;return-1},t.assign=function(e,t){var n,r;for(n in t)r=t[n],e[n]=r;return e},t.isEmptyObj=function(e){var t;for(t in e)return!1;return!0},t.serialize=function(e){var t,n,r,o,i,a;if("string"==typeof e)return e=e.replace(/\\/g,function(){return"\\\\"}).replace(/\r|\n/g,function(){return"\\n"}).replace(/"/g,'\\"').replace(/'/g,"\\'"),'"'+e+'"';if("number"==typeof e)return""+e;if("function"==typeof e)return e.toString();if(e instanceof Array){for(t=[],r=0,i=e.length;r<i;r++)n=e[r],t.push(this.serialize(n));return"["+t.join(",")+"]"}if(e instanceof Object){t=[];for(o in e)a=e[o],void 0!==a&&t.push('"'+o+'":'+this.serialize(a));return"{"+t.join(",")+"}"}return""+e},window.JSON||(window.JSON={},window.JSON.parse=window.eval,window.JSON.stringify=function(){var e,r;return e=1<=arguments.length?n.call(arguments,0):[],(r=t.serialize).apply.apply(r,[t].concat(n.call(e)))}),t.encodeBase64Escape=function(e){return t.encodeBase64(e).replace(/\+/g,"_").replace(/\//g,"-").replace(/\=/g,"")},t.decodeBase64Escape=function(e){for(e=e.replace(/_/g,"+").replace(/-/g,"/");e.length%4;)e+="=";return t.decodeBase64(e)},t.bubbleCrypto={hdidLen:32,encrypt:function(e){var t,n,r,o,i,a,u,l;for(l=[],u=sdk.util.encodeBase64(e),a=(this.hdidLen+u.length)%256,r=o=0,i=u.length;o<i;r=++o)t=u[r],n=(u.charCodeAt(r)+a)%256,l.push(String.fromCharCode(n));return sdk.util.encodeBase64(l.join(""))},decrypt:function(e){var t,n,r,o,i,a,u;for(e=sdk.util.decodeBase64(e),a=(this.hdidLen+e.length)%256,u=[],r=o=0,i=e.length;o<i;r=++o)t=e[r],n=(256+e.charCodeAt(r)-a)%256,u.push(String.fromCharCode(n));return sdk.util.decodeBase64(u.join(""))},compress:function(e){return LZString&&LZString.compressToBase64(e)},decompress:function(e){return LZString&&LZString.decompressFromBase64(e)}},e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t.obfuscate={generateMap:function(){var t,n,r,o,i,a,u,l,c;for(n={},t=e,i=a=0,u=e.length;a<u;i=++a)r=e[i],l=e.length-1-i,c=0,o=Math.floor(Math.random()*(l-c+1)+c),n[r]=t[o],t=t.slice(0,o)+t.slice(o+1,t.length);return n},map2Str:function(t){var n,r,o,i;for(i="",r=0,o=e.length;r<o;r++)n=e[r],i+=t[n];return i},str2Map:function(t){var n,r,o,i,a;for(n={},o=i=0,a=e.length;i<a;o=++i)r=e[o],n[r]=t[o];return n},encryptBase64:function(e,t){var n,r,o,i,a;for(r="",o=i=0,a=e.length;i<a;o=++i)n=e[o],r+=void 0!==t[n]?t[n]:e[o];return r},decryptBase64:function(e,t){var n,r,o,i,a,u;u={};for(o in t)u[t[o]]=o;for(r="",o=i=0,a=e.length;i<a;o=++i)n=e[o],r+=void 0!==u[n]?u[n]:e[o];return r}},t.loopDetection=function(e){var t,n,r,o,i;return o=Math.max(e.seconds-0,1),n=Math.min(e.maxNum-0,100),r=0,sdk.util.log("设置循环检测，每"+o+"秒1次，最多"+n+"次"),t=function(){var t,o;r++,sdk.util.log("检测第"+r+"次");try{if(e.condFunc&&e.condFunc())return clearInterval(i),sdk.util.log("检测成功！"),e.successFunc&&e.successFunc();if(r>=n)return clearInterval(i),sdk.util.log("检测失败！"),e.failedFunc&&e.failedFunc()}catch(o){return t=o,sdk.util.log("检测出错"+t),clearInterval(i)}},i=setInterval(t,1e3*o)}}).call(this);
(function(){sdk.tools.observer=new sdk["class"].Observer}).call(this);
(function(){var t;t=function(){var t;return t="global",{set:function(e,r,l){var n,s,i;null==l&&(l=t);try{i=sdk.util.serialize(r).replace(/^"/,"").replace(/"$/,"")}catch(s){n=s,i=r+"",sdk.util.log("storage.set Error: "+n.message)}return sdk.util.setIni(l,e,i)},get:function(e,r){return null==r&&(r=t),sdk.util.getIni(r,e)}}}(),sdk.tools.storage=t}).call(this);
(function(){var t;t=function(){function t(){}return t.prototype._getBasicInfo=function(){var t,e;return e=sdk.client.info,t={dm:"/wps/client/plugins",action:"bubble",p1:e.getAppVersion(),p2:e.getDistNum(),p10:e.getAppName(),p11:e.getHdid(),_t:new Date-0}},t.prototype._send=function(t,e){return null==t&&(t={}),null==e&&(e=1),this._sendByUrl(t,e,"http://info.wps.cn/wpsv6internet/infos.ads"),this._sendByUrl(t,e,"http://bubble.ic.ksosoft.com/wpsv6internet/infos.ads")},t.prototype._sendByUrl=function(t,e,s){var n,i,o,l,r,d;if(null==t&&(t={}),null==e&&(e=1),null==s&&(s="http://info.wps.cn/wpsv6internet/infos.ads"),1===Math.ceil(Math.random()/e)){s+="?v=D1S1E1&d=",l=this._getBasicInfo();for(r in t)d=t[r],l[r]=d+"";n=[];for(r in l)d=l[r],n.push(r+"="+d);n.push("pnum=10"),s+=sdk.util.encodeBase64(n.join("&"));try{sdk.client.webview.execute(0,"sdk.util.httpGet('"+s+"')")}catch(o){i=o,sdk.util.httpGet(""+s)}return sdk.util.log("send info: "+n.join(","))}},t.prototype._sendEncryptedByUrl=function(t,e,s,n){var i,o,l,r;if(null==t&&(t={}),null==e&&(e=1),null==s&&(s="http://info.wps.cn/wpsv6internet/infos.ads"),null==n&&(n=!0),1===Math.ceil(Math.random()/e)){if(sdk.util.log("send info:"+sdk.util.serialize(t)),sdk.util.log("send info base64:"+sdk.util.encodeBase64(sdk.util.serialize(t))),i=sdk.util.encryptStringByD1S1E2(sdk.util.serialize(t)),i instanceof Error&&"not support"===i.message)return sdk.util.log("插件版本低，不支持encryptStringByD1S1E2接口");if(n){s=s+"?v=D1S1E2&d="+i;try{return sdk.client.webview.execute(0,"sdk.util.httpGet('"+s+"')")}catch(l){return o=l,sdk.util.httpGet(""+s)}}else try{return s+="?v=D1S1E2",sdk.client.webview.execute(0,"sdk.util.httpPost('"+s+"', '"+i+"')")}catch(r){return o=r,sdk.util.httpPost(""+s)}}},t.prototype._getEncryptedBasicInfo=function(){var t,e;return e=sdk.client.info,t={p0:e.getProjectGuid()+"|"+e.getHdid()+"|"+e.getUuid(),p1:e.getAppVersion(),p2:e.getDistNum(),p12:sdk.system.getOsName(),p13:sdk.as.getAsProcess("name",";")}},t.prototype._sendEncryptedAll=function(t){var e,s,n,i,o,l,r;s=this._getEncryptedBasicInfo();for(i in t)r=t[i],s[i]=r;for(l=[],o=[],e=n=0;n<=15;e=++n)0!==e&&l.push("p"+e),o.push((s["p"+e]||"")+"");return t={sn:l.join("|"),dm:"/wps/client/plugins",action:"bubble_detail",params:o,_t:new Date-0},this._sendEncryptedByUrl(t,1,"http://post.ksosoft.com/wpsv6internet/infos.ads",!1)},t.prototype._logToDb=function(t,e,s,n){var i,o,l,r;if(sdk.util.db.available()){i=window.featureConfig&&window.featureConfig.dbName||"feature.db",r=window.featureConfig&&window.featureConfig.dbSourceTable||"feature_source",n.bubble_id=t,n.bubble_name=e;for(o in n)n[o]+="";return l={type:"bubble_"+s,time:sdk.util.getNow()-0,detail:n},sdk.client.webview.execute(0,"sdk.util.db.insert('"+i+"', '"+r+"', "+sdk.util.serialize(l)+", sdk.noop, sdk.noop)")}},t.prototype.recordToMinisiteReg=function(t){var e,s,n,i,o;return i="HKEY_CURRENT_USER\\Software\\kingsoft\\Office\\6.0\\plugins\\minisiteex",e="kbbblclckdt",s="kbbblclckid",o=sdk.util.formatDate(new Date,"yyyy-MM-dd"),sdk.system.getReg(e,i)===o?(n=sdk.system.getReg(s,i),sdk.system.setReg(s,n+"#"+t,i)):(sdk.system.setReg(s,t,i),sdk.system.setReg(e,o,i))},t.prototype.sendStatistics=function(t){var e,s,n,i;if(null==t&&(t={}),sdk.util.log("sendStatistics",t),n=t.probability||1,1===Math.ceil(Math.random()/n)){e=[];for(s in t)i=t[s],null!=i&&"undefined"!=typeof i&&""!==i&&e.push(s+"="+i);return sdk.util.justSend("http://pcfg.wps.cn:9002/info?"+e.join("&"))}},t.prototype.sendMsgTrace=function(t,e,s,n){var i,o,l,r,d,a;if(e&&s&&(e-=0,r=Math.floor((new Date-0)/1e3),a=r-e,n?l=s+"/base64:"+sdk.util.encodeBase64(n):/\/base64:/.test(s)?(l=s,s=l.split("/base64:")[0]):l=s,sdk.util.log("sendNotify",t,s,e,a),d=.01,"browsetheweb"!==s&&"browsetheweb_common"!==s||(d=1e-4),"wps_start"!==s&&"wpp_start"!==s&&"et_start"!==s&&"wpsclose"!==s||(d=.001),1===Math.ceil(Math.random()/d)))return o=sdk.client.info,i={sn:"p4|p7|p8",dm:"/wps/client/plugins",action:"msg_trace4",params:[o.getProjectGuid()+"|"+o.getHdid()+"|"+o.getUuid(),o.getAppVersion(),o.getDistNum(),o.getPlgVersion(),t,1,"",s,l,a,1/d],_t:new Date-0},this._sendEncryptedByUrl(i,1,"http://ic.wps.cn/wpsv6internet/infos.ads",!1)},t.prototype.start=function(){var t;return t={p3:"start"},this._send(t,.001)},t.prototype.startJL=function(){},t.prototype.popup=function(t,e,s,n,i){var o,l,r,d,a,u,p,b,c,f,g,k;if(null==i&&(i=!1),f=.01,u=sdk.bubble.getMaterialInfo(t,"materialId"),p=sdk.bubble.getMaterialInfo(t,"materialName"),s=s||sdk.bubble.getMaterialInfo(t,"abTestId"),r=sdk.bubble.getMaterialInfo(t,"is_ad"),o=sdk.util.iniCache.get("cCloseBtnSize"),g=sdk.bubble.getBubbleInfo(t,"substanceGroup"),g&&(sdk.bubble.setSubstancePopup(g),sdk.bubble.popupMutexToReg(t,g),sdk.bubble.kbStatusToReg("show",g)),k=sdk.util.iniCache.get(t+"_zOrder"),c=sdk.bubble.getBubbleInfo(t,"msgInfo"),d=sdk.bubble.getMaterialInfo(t,"keyword")||sdk.util.iniCache.get(t+"_msgKeyword")||"",i||(l={p3:"popup",p4:t,p5:e,p6:sdk.bubble.getBubbleInfo(t,"adType")||0,p9:u||sdk.bubble.getMaterialInfo(t,"adxId")||"",p15:p||""},this._send(l),this._sendEncryptedAll(sdk.util.assign(l,{p10:n||"",p11:c||"",p14:d||""}))),this._logToDb(t,e,"popup",{msgGroup:n}),this.sendStatistics({action:"popup",probability:u||s?1:.01,bubbleId:t,abTestId:s,materialId:u,as:this.getUserAsInfo(),value:k,is_ad:sdk.bubble.getMaterialInfo(t,"isAd")}),a="",b="",u&&(s&&(b="&abTest_id="+s,s=""),a="?material_id="+u+b),(s||b)&&sdk.util.justSend("http://pcfg.wps.cn:9002/config/info/popup"+(s?"-"+s:"")+"/"+t+"/1/0"+a),1===Math.ceil(Math.random()/f)&&!s&&!b)return sdk.util.justSend("http://pcfg.wps.cn:9002/config/info/popup/"+t+"/"+f+"/0"+a)},t.prototype.close=function(t,e,s,n,i,o){var l,r,d,a,u;return o=sdk.bubble.getMaterialInfo(t,"materialId"),a=sdk.bubble.getMaterialInfo(t,"materialName"),l=sdk.bubble.getMaterialInfo(t,"abTestId"),u=sdk.bubble.getBubbleInfo(t,"msgInfo"),d=sdk.bubble.getMaterialInfo(t,"keyword")||sdk.util.iniCache.get(t+"_msgKeyword")||"",r={p3:"close",p4:t,p5:e,p6:s/1e3,p7:n,p9:o||sdk.bubble.getMaterialInfo(t,"adxId")||"",p15:a||""},this._send(r),this._sendEncryptedAll(sdk.util.assign(r,{p10:i||"",p11:u||"",p14:d||""})),this._logToDb(t,e,"close",{aliveTime:s,type:n,msgGroup:i}),this.sendStatistics({action:"close",probability:1,bubbleId:t,abTestId:l,materialId:o,as:this.getUserAsInfo(),value:n,is_ad:sdk.bubble.getMaterialInfo(t,"isAd")})},t.prototype.click=function(t,e,s,n,i,o,l){var r,d,a,u,p,b,c,f,g,k;p=sdk.bubble.getMaterialInfo(t,"materialId"),b=sdk.bubble.getMaterialInfo(t,"materialName"),i=i||sdk.bubble.getMaterialInfo(t,"abTestId"),d=sdk.bubble.getMaterialInfo(t,"is_ad"),sdk.bubble.openUrl&&this.recordToMinisiteReg(t),sdk.tools.storage.set("time_click",sdk.util.getNow()-0,"bubble_"+t),k=sdk.bubble.getBubbleInfo(t,"substanceGroup"),k&&(sdk.bubble.setSubstanceClick(k),sdk.bubble.clickMutexToReg(t,k)),f=sdk.bubble.getBubbleInfo(t,"msgInfo"),a=sdk.bubble.getMaterialInfo(t,"keyword")||sdk.util.iniCache.get(t+"_msgKeyword")||"",r={p3:"click",p4:t,p5:e,p6:s,p7:n,p9:p||sdk.bubble.getMaterialInfo(t,"adxId")||"",p15:b||""},this._send(r),this._sendEncryptedAll(sdk.util.assign(r,{p8:(sdk.bubble.openUrl||"NULL").replace(/\?/g,"**").replace(/\&/g,"*").replace(/\=/g,"$")+"|"+(sdk.bubble.iconVersion||"NULL")+"|"+(sdk.bubble.openUrlByBrowser||"unknown"),p10:o||"",p11:f||"",p14:a||""})),this._logToDb(t,e,"click",{checkbox:n,msgGroup:o||"",mistake:l||0}),this.sendStatistics({action:"click",probability:1,bubbleId:t,abTestId:i,materialId:p,as:this.getUserAsInfo(),name:s,value:n+"_"+l,is_ad:sdk.bubble.getMaterialInfo(t,"isAd")}),u="",c="",p&&(i&&(c="&abTest_id="+i,i=""),u="?material_id="+p+c),sdk.util.justSend("http://pcfg.wps.cn:9002/config/info/click"+(i?"-"+i:"")+"/"+t+"/1/"+n+(null!=l?"/"+l:"")+u),g=.01,1!==Math.ceil(Math.random()/g)},t.prototype.hidden=function(t,e,s){var n,i,o,l,r,d,a,u;if(l=sdk.bubble.getMaterialInfo(t,"materialId"),r=sdk.bubble.getMaterialInfo(t,"materialName"),n=n||sdk.bubble.getMaterialInfo(t,"abTestId"),this.sendStatistics({action:"hidden",probability:"production"!==sdk.env?1:.1,bubbleId:t,abTestId:n,materialId:l,value:s,as:this.getUserAsInfo()}),a=sdk.bubble.getBubbleInfo(t,"msgInfo"),o=sdk.bubble.getMaterialInfo(t,"keyword")||sdk.util.iniCache.get(t+"_msgKeyword")||"",d=sdk.bubble.getMaterialInfo(t,"msgGroup"),i={p3:"hidden",p4:t,p7:s,p8:this.getDoubtfulProcess(),p9:l||sdk.bubble.getMaterialInfo(t,"adxId")||"",p10:d,p11:a,p14:o},this._sendEncryptedAll(i),1===Math.ceil(Math.random()/.1)&&this.sendLog({bus:"pcfg",ctn:sdk.system.listProcesses(),dist:sdk.client.info.getDistNum(),ver:sdk.client.info.getAppVersion(),pver:sdk.client.info.getPlgVersion()}),u="production"!==sdk.env?1:.1,1===Math.ceil(Math.random()/u))return sdk.util.justSend("http://pcfg.wps.cn:9002/config/info/hidden/"+t+"/"+u+"/"+this.getUserAsInfo())},t.prototype.subscribe=function(t,e,s){var n,i;return i=sdk.bubble.getMaterialInfo(t,"materialId"),n={p3:"subscribe",p4:t,p5:e,p6:s,p9:i||sdk.bubble.getMaterialInfo(t,"adxId")||""},this._send(n),this._sendEncryptedAll(n)},t.prototype.bubbleInit=function(t,e){var s;return s={p3:"bubble_load",p4:t,p5:e},this._send(s,.001)},t.prototype.bubblePopupFail=function(t,e,s){var n;return n={p3:"popup_fail",p4:t,p5:e,p6:s},this._send(n)},t.prototype.pluginExit=function(t){var e;return e={p3:"exit",p4:t},this._send(e)},t.prototype.pluginInfo=function(t){null==t&&(t=.01)},t.prototype.send=function(t,e){return null==t&&(t={}),null==e&&(e=1),sdk.util.log("上报数据：",t),this._send(t,e)},t.prototype.getDoubtfulProcess=function(){var t,e,s,n,i;e=sdk.system.listProcesses()||[],n="",i=constant.DOUBTFUL_PROCESS;for(s in i)t=i[s],sdk.util.indexOf(s,e)>-1&&(n+=t+";");return n},t.prototype.getUserAsInfo=function(){return sdk.as.getAsProcess("brand","_")},t.prototype.getDoubtfulProcess=function(){var t,e,s,n,i,o,l;for(t=sdk.system.listProcesses(),s="",l=constant.DOUBTFUL_PROCESS,n=i=0,o=l.length;i<o;n=++i)e=l[n],t.indexOf(e)>-1&&(s+=n+";");return s},t.prototype.getUserAsList=function(){return sdk.as.getAsProcess("id",";")},t.prototype.reportTag=function(t,e,s){return sdk.util.log("reportTag：该上报已去除"+t+","+e+","+s)},t.prototype.reportBubbleCloseMode=function(t,e,s,n,i){return sdk.util.log("reportBubbleCloseMode：该上报已去除",t,e,s,n,i)},t.prototype.sendLog=function(t){var e,s;return"string"!=typeof t&&(t=sdk.util.serialize(t)),e=sdk.util.generateAesKey(),t=sdk.util.aesEncryptEx(e,t),e=sdk.util.rsaEncrypt(e),sdk.util.log(e,t),s="http://log.u.wps.cn/v0/api/pl",sdk.util.httpPost(s,{key:encodeURIComponent(e),data:encodeURIComponent(t)},function(t){return sdk.util.log("成功上报",t)},function(t){return sdk.util.log("成功失败",t)})},t}(),sdk.service.info=new t}).call(this);
(function(){var e,t,o,i,r,n;n=sdk.client.webview.getCurrentViewId()-0;try{e=sdk.util.getUrlParam("bubble_id"),t=decodeURIComponent(sdk.util.getUrlParam("bubble_name"))}catch(i){o=i,sdk.util.log("解析参数失败!")}window.stopShowing=function(){return window.clearTimeout(r)},window.show=function(o){var i;return window.clearTimeout(r),e&&t&&0!==n&&(i="sdk.tools.observer.fire('"+e+"_show', "+o+")",sdk.client.webview.execute(0,i),sdk.tools.observer.fire("show"),sdk.util.log(""+i)),sdk.util.log(location.href+" is loaded!")},window.stop=function(){var t;return t="sdk.tools.observer.fire('"+e+"_stop')",sdk.client.webview.execute(0,t),sdk.util.log(""+t)},setInterval(function(){var t;if(0!==n)return t="sdk.tools.observer.fire('"+e+"_heartbeat')",sdk.client.webview.execute(0,t),sdk.util.log(""+t)},5e3),r=setTimeout(function(){return window.show()},3e3)}).call(this);
(function(){window.setTimeout(function(){var e,t,i;if(e="1"===sdk.system.getReg("bubble_debug","HKEY_CURRENT_USER\\SOFTWARE\\kingsoft"),i=sdk.client.webview.getCurrentViewId(),e&&(t='sdk.client.webview.inspector({id : "'+i+'"}, true)',sdk.client.webview.execute(0,t)),0===i&&(sdk.client.webview.enableHeartbeat(1),setInterval(function(){if(!e||"1"!==sdk.system.getReg("bubble_disable_heartbeat","HKEY_CURRENT_USER\\SOFTWARE\\kingsoft"))return sdk.client.webview.heartbeat()},5e3)),e)return setInterval(function(){var e,t;try{}catch(t){return e=t,_alert(e.message)}},5e3)},1)}).call(this);
(function(){var t;sdk.bubble={},t=sdk.bubble,t.id=sdk.util.getUrlParam("bubble_id"),t.name=function(){try{return decodeURIComponent(sdk.util.getUrlParam("bubble_name"))}catch(t){return""}}(),t.msg=sdk.util.iniCache.get(this.id+"_msg")||sdk.util.getUrlParam("bubble_msg")||"",t.msgInfo=sdk.util.iniCache.get(this.id+"_msgInfo"),t.msgKeyword=sdk.util.iniCache.get(this.id+"_msgKeyword"),t.bubbleTestId=sdk.util.getUrlParam("bubble_testId"),t.closeBtnId=[],t.clickBtnId=[],sdk.tools.observer.on("show",function(){return sdk.bubble.width=document.body.clientWidth,sdk.bubble.height=document.body.clientHeight})}).call(this);
(function(){var bubble,configPath,diffRecover,group,parseTagsV2,parseTagsV3,substanceIniPath;bubble=sdk.bubble,configPath="%appdata%\\kingsoft\\wps\\addons\\data\\win-i386\\kbubble_config.ini",diffRecover=function(t,e){var i,n,s,a,r,l,u,c;for(l="",n=0,a=0,r=e.length;a<r;a++)s=e[a],s.length&&(i=s[0],u=s[1],c=s[2],"d"===u?n+=i:l+="a"===u?c:t.slice(n,n+=i));return l},parseTagsV2=function(t){return sdk.util.bubbleCrypto.decompress(t)},parseTagsV3=function(str){var base64Str,error,key,oMap,tagsObj;if(tagsObj=eval("("+str+")"),key=sdk.util.getRsaSK(),oMap=sdk.util._rsaDecrypt(key,tagsObj.key),!oMap)return sdk.util.log("关键词rsa解密失败"),"";try{oMap=sdk.util.obfuscate.str2Map(oMap),base64Str=sdk.util.obfuscate.decryptBase64(tagsObj.data,oMap)}catch(error){return sdk.util.log("关键词rsa解密失败"),""}return sdk.util.decodeBase64(base64Str)},bubble.getDiffEffectTags=function(callback){var canReport,port,probability,tagsBase,tagsVer,url;return tagsVer=sdk.util.getIniByPath("material","tags_version",configPath)||0,tagsBase=sdk.util.getIniByPath("material","tags_base",configPath),"production"===sdk.env?(port="",url="http://switch.pcfg.cache.wpscdn.cn/materials/effect_tags_2"):(port=":9080",url="http://js1.pcfg.cache.wpscdn.cn/materials/effect_tags_2"),probability="production"===sdk.env?.001:1,canReport=Math.random()<probability,sdk.util.ajax({url:"//df.cache.wpscdn.cn"+port+"/api/v1/diff/fetch/"+sdk.util.encodeBase64(url)+"?version="+tagsVer+"&key=p1-e1",type:"get",timeout:10,success:function(ret){var error,tagStr;try{return ret=eval("("+ret+")"),200!==ret.result?callback(new Error("request error"),""):(sdk.util.setIniByPath("material","tags_version",ret.data.version||0,configPath),ret.data.updated===!1?(canReport&&sdk.util.justSend("http://pcfg.wps.cn:9002/report/effect_tags/req/diff/0/"+(ret.data.code||"unknown")),callback("","")):(ret.data.diff&&(tagStr=JSON.parse(parseTagsV2(ret.data.diff)),tagsBase=sdk.util.decodeBase64(tagsBase),tagStr=diffRecover(tagsBase,tagStr),canReport&&sdk.util.justSend("http://pcfg.wps.cn:9002/report/effect_tags/req/diff/1")),ret.data.content&&(tagStr=parseTagsV2(ret.data.content),canReport&&sdk.util.justSend("http://pcfg.wps.cn:9002/report/effect_tags/req/diff/2/"+(ret.data.code||"unknown"))),sdk.util.setIniByPath("material","tags_base",sdk.util.encodeBase64(tagStr),configPath),callback("",tagStr)))}catch(error){}return callback(new Error("parse error"),"")},error:function(t){return callback(t,"")}})},bubble.getWholeEffectTags=function(t){return sdk.util.ajax({url:"//switch.pcfg.cache.wpscdn.cn/materials/effect_tags_2",type:"get",timeout:10,success:function(e){var i;return i=parseTagsV2(e),sdk.util.setIniByPath("material","tags_version","",configPath),sdk.util.setIniByPath("material","tags_base",sdk.util.encodeBase64(i),configPath),t&&t("",i)},error:function(e){return t(e,"")}})},bubble.setMaterialTagsToIni=function(callback){var canReport,cb,last,probability;return"ruby"!==sdk.platform?callback&&callback():(last=sdk.util.getIni("material","last_exec_time")-0,sdk.util.getNow()-last<36e5?callback&&callback():(probability="production"===sdk.env?.001:1,canReport=Math.random()<probability,cb=function(str){var allTags,allTagsMap,err,error,id,j,len,tag,tags,tagsMap;sdk.util.removeIniGroup("material"),sdk.util.setIni("material","last_exec_time",sdk.util.getNow()-0);try{tagsMap=eval("("+str+")"),allTagsMap={};for(id in tagsMap)for(tags=tagsMap[id],sdk.util.setIni("material",id+"_tags",sdk.util.encodeBase64(tags.join(";"))),j=0,len=tags.length;j<len;j++)tag=tags[j],allTagsMap[tag]=1;allTags=[];for(tag in allTagsMap)allTags.push(tag);sdk.util.setIni("material","tags",sdk.util.encodeBase64(allTags.join(";")))}catch(error){err=error,sdk.util.log("物料标签解析出错",err.message),canReport&&sdk.util.justSend("http://pcfg.wps.cn:9002/report/effect_tags/err/parse/"+(err.message||"unknown").slice(0,20))}return sdk.util.log("物料标签获取解析完成"),canReport&&sdk.util.justSend("http://pcfg.wps.cn:9002/report/effect_tags/done"),callback&&callback()},canReport&&sdk.util.justSend("http://pcfg.wps.cn:9002/report/effect_tags/req/diff"),sdk.bubble.getDiffEffectTags(function(t,e){return t?(sdk.util.log("物料标签diff失败: "+t.message),canReport&&sdk.util.justSend("http://pcfg.wps.cn:9002/report/effect_tags/err/diff/"+(t.message||"unknown").slice(0,20)),canReport&&sdk.util.justSend("http://pcfg.wps.cn:9002/report/effect_tags/req/full"),sdk.bubble.getWholeEffectTags(function(t,e){return t?(canReport&&sdk.util.justSend("http://pcfg.wps.cn:9002/report/effect_tags/err/full/"+(t.message||"unknown").slice(0,20)),sdk.util.log("物料标签全量失败: "+t.message)):cb(e)})):""===e?sdk.util.log("物料标签没有更新或解析失败"):cb(e)})))},bubble.getMaterialTagsFromIni=function(t){var e;return e="tags",t&&(e=t+"_"+e),sdk.util.decodeBase64(sdk.util.getIni("material",e))},bubble.hasKeyWord=function(t,e){var i,n,s,a;for(a=e.split(/[,%]/),i=0,n=a.length;i<n;i++)if(s=a[i],t.indexOf(s)<0)return!1;return!0},bubble.ifMatchTags=function(t,e){var i,n,s,a;if(!t||!e)return!1;for(n=e.split(";"),s=0,a=n.length;s<a;s++)if(i=n[s],i&&this.hasKeyWord(t,i))return sdk.util.log("通知【"+t+"】包含字段【"+i+"】"),i;return!1},bubble.getAllMatchTags=function(t,e){var i,n,s,a,r;if(!t||!e)return!1;for(r=[],n=e.split(";"),s=0,a=n.length;s<a;s++)i=n[s],i&&this.hasKeyWord(t,i)&&r.push(i);return!!r.length&&(sdk.util.log("通知【"+t+"】包含字段【"+r+"】"),r.join(";"))},bubble.getAllMatchTitles=function(t,e){var i,n,s,a,r,l,u,c,o;if(!t||!e)return!1;for(u=[],o=t.split(";"),n=e.split(";"),s=0,r=o.length;s<r;s++)if(c=o[s])for(a=0,l=n.length;a<l;a++)if(i=n[a],i&&this.hasKeyWord(c,i)){u.indexOf(c)<0&&u.push(c);break}return!!u.length&&(sdk.util.log("通知【"+t+"】包含有效标题【"+u+"】"),u.join(";"))},bubble.addMaterialFailedNum=function(){var t;return t=sdk.bubble.getMaterialFailedNum(),sdk.bubble.setMaterialFailedNum(t+1)},bubble.getMaterialFailedNum=function(){var t;return t=sdk.util.formatDate(sdk.util.getNow(),"yyyy_MM_dd"),sdk.util.getIni("material",t+"_failed_num")-0},bubble.setMaterialFailedNum=function(t){var e;return e=sdk.util.formatDate(sdk.util.getNow(),"yyyy_MM_dd"),sdk.util.setIni("material",e+"_failed_num",t)},bubble.ifCurrentMsgInfoMatchMaterial=function(t){var e;return e=sdk.util.cache.get("currentMsgInfo"),sdk.util.log("当前浏览器标签",e),this.ifMatchMaterial(e,t)},bubble.ifMatchMaterial=function(t,e){var i;return i=this.getMaterialTagsFromIni(e),sdk.util.log("物料标签",i),sdk.util.log("是否满足",this.ifMatchTags(t,i)),this.ifMatchTags(t,i)},bubble.rmBrowserName=function(t){null==t&&(t="");try{return"string"!=typeof t&&(t=JSON.stringify(t)),t.replace(/\s\-\s[\u4e00-\u9fa5\w\s\.]+$/,"")}catch(e){}},bubble.parseBrowserInfo=function(msgInfo){var browserInfo,info,j,len,multiAll,multiMain,multiUrl;browserInfo={},multiMain=[],multiAll=[],multiUrl=[];try{for(msgInfo=eval("("+msgInfo+")").browserinfo,j=0,len=msgInfo.length;j<len;j++)info=msgInfo[j],info.isactive&&(browserInfo.top_main=JSON.stringify({name:info.name,pid:info.pid,text:sdk.bubble.rmBrowserName(info.text)}),info.tabname.length&&(browserInfo.top_all=JSON.stringify({name:info.name,pid:info.pid,text:info.tabname.join(";")})),info.url&&(browserInfo.top_url=JSON.stringify({name:info.name,pid:info.pid,text:info.url}))),info.text&&multiMain.push(sdk.bubble.rmBrowserName(info.text)),multiAll=multiAll.concat(info.tabname.length?info.tabname:sdk.bubble.rmBrowserName(info.text)),info.url&&(multiUrl=multiUrl.concat(info.url));multiMain.length&&(browserInfo.multi_main=JSON.stringify({text:multiMain.join(";")})),multiAll.length&&(browserInfo.multi_all=JSON.stringify({text:multiAll.join(";")})),multiUrl.length&&(browserInfo.multi_url=JSON.stringify({text:multiUrl.join(";")}))}catch(undefined){}return browserInfo},bubble.setMaterialInfo=function(t,e){var i,n,s;i="";for(n in e)s=e[n],sdk.bubble[n]=s,i+="sdk.util.cache.set('"+t+"_"+n+"', '"+s+"');";return sdk.util.log("setMaterialInfo:",i),sdk.client.webview.execute(0,i)},bubble.getBubbleInfo=bubble.getMaterialInfo=function(t,e){return e||(e=t,t=bubble.id),sdk.util.iniCache.get(t+"_"+e)||sdk.bubble[e]||sdk.util.cache.get(t+"_"+e)||""},substanceIniPath="%appdata%\\kingsoft\\wps\\addons\\data\\win-i386\\kbubble_sub.ini",group="bubble",bubble.setSubstancePopup=function(t){return this.setSubstance("popup",t)},bubble.setSubstanceClick=function(t){return this.setSubstance("click",t)},bubble.getSubstancePopup=function(t){return this.getAllSubstancePopup()[t]-0||0},bubble.getSubstanceClick=function(t){return this.getAllSubstanceClick()[t]-0||0},bubble.checkSubstancePopup=function(t,e){return null==e&&(e=24),new Date-this.getSubstancePopup(t)>3600*e*1e3},bubble.checkSubstanceClick=function(t,e){return null==e&&(e=72),new Date-this.getSubstanceClick(t)>3600*e*1e3},bubble.getAllSubstancePopup=function(){var t;return t=null,function(){return t||(t=this._getAllSubstance("popup"),setTimeout(function(){return t=null},1)),t||{}}}(),bubble.getAllSubstanceClick=function(){var t;return t=null,function(){return t||(t=this._getAllSubstance("click"),setTimeout(function(){return t=null},1)),t||{}}}(),bubble._getAllSubstance=function(t){var e,i,n,s,a,r,l,u,c,o,b,f,g;for(c=sdk.util.getIniByPath(group,t+"_list",substanceIniPath).split(";"),""===c[0]&&c.pop(),b={},s=0,r=c.length;s<r;s++)n=c[s],b[n+"_"+t]="";for(f={},f[group]=b,i=sdk.util.getIniByPathWithObj(substanceIniPath,f)[group]||{},e=[],a=0,l=c.length;a<l;a++)n=c[a],new Date-i[n+"_"+t]<2592e6&&e.push(n);for(e.length<c.length&&sdk.util.setIniByPath(group,t+"_list",e.join(";"),substanceIniPath),g={},o=0,u=e.length;o<u;o++)n=e[o],g[n]=i[n+"_"+t];return g},bubble.setSubstance=function(t,e){var i;if(sdk.util.setIniByPath(group,e+"_"+t,sdk.util.getNow()-0,substanceIniPath),i=sdk.util.getIniByPath(group,t+"_list",substanceIniPath).split(";"),""===i[0]&&i.pop(),sdk.util.indexOf(e,i)<0)return i.push(e),sdk.util.setIniByPath(group,t+"_list",i.join(";"),substanceIniPath)},bubble.getSubstance=function(t,e){return sdk.util.getIniByPath(group,e+"_"+t,substanceIniPath)},bubble.getMiniPopup=function(t){var e,i,n,s;if(n=sdk.util.cache.get("mini_popup_"+t))return n;if(s=sdk.system.getReg("adtryicnpppinf","HKEY_CURRENT_USER\\Software\\kingsoft\\Office\\6.0\\plugins\\minisiteex"),s&&(s=s.split(",")))for(i=s.length-1;i>=0;i+=-1)if(e=s[i]){if(e=e.split("#"),n=sdk.util.parseDate(e[4])-0,new Date-n>1296e6)return sdk.util.cache.set("mini_popup_"+t,0,300),0;if(5===e.length&&e[1]===t)return sdk.util.cache.set("mini_popup_"+t,n,300),n}return 0},bubble.getMiniLastPopup=function(){var t;return t=sdk.system.getReg("adtryicnlstppptm","HKEY_CURRENT_USER\\Software\\kingsoft\\Office\\6.0\\plugins\\minisiteex"),t?sdk.util.parseDate(t)-0:0},bubble.getMiniClick=function(t){var e,i,n,s;if(n=sdk.util.cache.get("mini_click_"+t))return n;if(s=sdk.system.getReg("adtryicnclkinf","HKEY_CURRENT_USER\\Software\\kingsoft\\Office\\6.0\\plugins\\minisiteex"),s&&(s=s.split(",")))for(i=s.length-1;i>=0;i+=-1)if(e=s[i]){if(e=e.split("#"),n=sdk.util.parseDate(e[4])-0,new Date-n>1296e6)return sdk.util.cache.set("mini_click_"+t,0,300),0;if(5===e.length&&e[1]===t)return sdk.util.cache.set("mini_click_"+t,n,300),n}return 0},bubble.getMiniLastClick=function(){var t;return t=sdk.system.getReg("adtryicnlstclstm","HKEY_CURRENT_USER\\Software\\kingsoft\\Office\\6.0\\plugins\\minisiteex")||0,t?sdk.util.parseDate(t)-0:0},bubble.checkMiniPopup=function(t,e){return null==e&&(e=72),new Date-sdk.bubble.getMiniPopup(t)>3600*e*1e3},bubble.checkMiniClick=function(t,e){return null==e&&(e=72),new Date-sdk.bubble.getMiniClick(t)>3600*e*1e3},bubble.checkMiniAlive=function(){return"show"===sdk.system.getReg("adtryicnstts","HKEY_CURRENT_USER\\Software\\kingsoft\\Office\\6.0\\plugins\\minisiteex")},bubble.checkClickMutex=function(t,e){return null==t&&(t=""),null==e&&(e=1728),t.indexOf("#")<0?sdk.bubble.checkSubstanceClick(t,e):sdk.bubble.checkSubstanceClick(t,e)&&sdk.bubble.checkMiniClick(t.split("#")[1],e)},bubble.checkSubstanceMutex=function(t,e){var i;return null==t&&(t=""),!e||(i=e.split("#"),!(sdk.bubble.checkMiniAlive()&&new Date-sdk.bubble.getMiniLastPopup()<3600*i[0]*1e3)&&sdk.bubble.checkClickMutex(t,i[1]))},bubble.popupMutexToReg=function(t,e){var i,n,s,a,r;if(null==e&&(e=""),!(e.indexOf("#")<0))return s=e.split("#")[1],a="HKEY_CURRENT_USER\\Software\\kingsoft\\Office\\6.0\\plugins\\minisiteex",i="kbtrypopinf",n=sdk.system.getReg(i,a)||"",n=n.split(",").slice(-60),r=sdk.util.formatDate(new Date,"yyyy-MM-dd hh:mm:ss"),n.push(r+"#"+s+"#"+t),sdk.system.setReg(i,n.join(","),a)},bubble.clickMutexToReg=function(t,e){var i,n,s,a,r;if(null==e&&(e=""),!(e.indexOf("#")<0))return s=e.split("#")[1],a="HKEY_CURRENT_USER\\Software\\kingsoft\\Office\\6.0\\plugins\\minisiteex",i="kbtryclcinf",n=sdk.system.getReg(i,a)||"",n=n.split(",").slice(-60),r=sdk.util.formatDate(new Date,"yyyy-MM-dd hh:mm:ss"),n.push(r+"#"+s+"#"+t),sdk.system.setReg(i,n.join(","),a)},bubble.kbStatusToReg=function(t,e){var i,n;if(null==t&&(t="show"),null==e&&(e=""),n="HKEY_CURRENT_USER\\Software\\kingsoft\\Office\\6.0\\plugins\\minisiteex",i="kbtrystatus",!(e.indexOf("#")<0&&"show"===t))return sdk.system.setReg(i,t,n)}}).call(this);
(function(){var e;e=sdk.feature,e.setFeatureScore=function(e,t){return e=sdk.util.encodeBase64Escape(sdk.util.bubbleCrypto.encrypt(e)),sdk.util.setIni("feature",e,t)},e.getFeatureScore=function(e){var t;return e=sdk.util.encodeBase64Escape(sdk.util.bubbleCrypto.encrypt(e)),t=sdk.util.getIni("feature",e),t?t-0:-1}}).call(this);
// B93F93507FE2F293153D327BAA20544A769F603651B6D48264CB83319D551A33BC77FAAACAC39920AB7CD95831E29920C3757E422380B04F73963D520CEA5710